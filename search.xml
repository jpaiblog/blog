<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>お問い合わせ時の留意事項</title>
      <link href="/blog/2025/05/21/about-support/"/>
      <url>/blog/2025/05/21/about-support/</url>
      
        <content type="html"><![CDATA[<p>テクニカルサポートチームでは、お客様のお役に立てるよう日々努めていますが、お客様の協力があって初めてご支援が可能となることも多くあります。調査を迅速に開始し、コミュニケーションを円滑に進めるため、以下の点にご協力ください。</p><span id="more"></span><br><h3 id="1-お問い合わせは、事象の発生後できるだけ早くご起票ください"><a href="#1-お問い合わせは、事象の発生後できるだけ早くご起票ください" class="headerlink" title="1. お問い合わせは、事象の発生後できるだけ早くご起票ください"></a>1. お問い合わせは、事象の発生後できるだけ早くご起票ください</h3><p>Azure 基盤ログの保存期間には期限があります。<br>事象の発生から時間が経つとログが残っておらず、調査ができない場合がありますので、お問い合わせはできるだけ早めにご起票ください。<br><br></p><h3 id="2-有償-Azure-テクニカル-サポートの対応範囲について"><a href="#2-有償-Azure-テクニカル-サポートの対応範囲について" class="headerlink" title="2. 有償 Azure テクニカル サポートの対応範囲について"></a>2. 有償 Azure テクニカル サポートの対応範囲について</h3><p>有償 Azure テクニカル サポートの対応範囲は原則として、トラブルシューティング (Break fix) です。<br>個別のお客様に合わせた以下のような詳細サポートの提供はありません。<br><br>例）</p><ul><li>お客様の個別的な要件を満たす Azure 製品構成やコードの提案。 </li><li>設計、アーキテクチャ、コードの レビュー。 </li><li>アプリケーション、パフォーマンス、構成のチューニング。 </li><li>(コーディングの言語やスクリプトの種類に関わらず）カスタム コードのサンプル提供。</li></ul><p>上記のようなご要望については、別途のサポートメニューの利用をご提案させていただく場合があります。<br><br></p><h3 id="3-お問い合わせの分割起票について"><a href="#3-お問い合わせの分割起票について" class="headerlink" title="3. お問い合わせの分割起票について"></a>3. お問い合わせの分割起票について</h3><p>テクニカルサポートでは、各製品の専任エンジニアが担当となり支援を差し上げています。<br>そのため、以下のようなご質問は可能な限り、製品ごとに分割したお問い合わせ起票をお願いします。</p><ul><li><p>特定のサービスが公開している機能の範囲にはない、複数の製品やサービスがかかわる問い合わせ </p><ul><li>対応範囲内の例: Azure OpenAI On Your Data を使用した際の連携先サービスのロール割り当てについて </li><li>製品ごとの問い合わせが必要な例: Azure AI Vision の画像解析と Azure OpenAI Service の Vision 対応モデルの比較</li></ul></li><li><p>同 API に対する、性質の異なる質問や問い合わせ </p><ul><li>問い合わせ 1: Azure OpenAI Service の Chat Completion API を使用したときに発生したエラーの解消 </li><li>問い合わせ 2: Azure OpenAI Service の Chat Completion API で使用する要求パラメーターの詳細に関する確認</li></ul></li><li><p>同じ種類の問題でも、発生日時など背景状況が異なる問い合わせ </p><ul><li>例: 2025&#x2F;05&#x2F;01 に発生した 5xx エラーが、2025&#x2F;05&#x2F;02 時点で解消したが、2025&#x2F;05&#x2F;04 からまた発生した <br></li></ul></li></ul><h3 id="4-お客様側での情報採取や確認にお時間がかかる場合について"><a href="#4-お客様側での情報採取や確認にお時間がかかる場合について" class="headerlink" title="4. お客様側での情報採取や確認にお時間がかかる場合について"></a>4. お客様側での情報採取や確認にお時間がかかる場合について</h3><p>お客様側での情報採取や案内内容の確認などにお時間がかかる場合には、10日程度を目安に、それ以上のお時間が必要な場合には、お問い合わせのクローズにご理解ください。<br>テクニカルサポートは、原則として短期的な課題に対して集中した支援を差し上げるサービスとして、数営業日ごとにお客様の状況の確認を実施しています。<br><br></p><h3 id="5-長期にわたる修正について"><a href="#5-長期にわたる修正について" class="headerlink" title="5. 長期にわたる修正について"></a>5. 長期にわたる修正について</h3><p>調査の結果、サービス側の改修が必要となることがありますが、修正が長期にわたることが想定される場合は、原則として、お問い合わせをクローズとさせていただきます。<br>定期的な修正状況の確認や進捗報告をご希望の場合は、ご確認が必要なタイミングでその都度お問い合わせを起票いただくようお願いします。<br><br></p><h3 id="6-クローズ後の再開方法について"><a href="#6-クローズ後の再開方法について" class="headerlink" title="6. クローズ後の再開方法について"></a>6. クローズ後の再開方法について</h3><p>クローズ後にご質問が発生した場合には、以前のお問い合わせ番号を記載してお問い合わせいただければ、情報を引き継いで支援を再開することが可能です。<br>これにより、過去のやり取りを踏まえた上でスムーズにサポートを提供することができます。<br><br></p><h3 id="7-リリース時期や今後の予定に関するご質問について"><a href="#7-リリース時期や今後の予定に関するご質問について" class="headerlink" title="7. リリース時期や今後の予定に関するご質問について"></a>7. リリース時期や今後の予定に関するご質問について</h3><p>新機能のリリース時期や修正の展開時期など、今後の予定に関するご質問には基本的にはお答えできません。<br>状況に応じてベストエフォートで開発部門への確認を行い、目安として案内を差し上げることがありますが、案内する時期についてはあくまでもその時点での予定であり、変更となる可能性が多分にあることをご承知おきください。<br><br></p><h3 id="8-公開情報の修正依頼・追加依頼について"><a href="#8-公開情報の修正依頼・追加依頼について" class="headerlink" title="8. 公開情報の修正依頼・追加依頼について"></a>8. 公開情報の修正依頼・追加依頼について</h3><p>サポートチームは責任をもってお客様に回答を差し上げていますため、障害発生時や製品に不具合が発生している場合、サポートからの回答をもってマイクロソフトからの正式な案内とさせていただく場合があります。<br>公開情報に情報の記載がない場合、サポートチームよりフィードバックすることは可能ですが、情報の記載をお約束することはできかねますのでご了承ください。<br><br></p><h3 id="9-プレビュー機能について"><a href="#9-プレビュー機能について" class="headerlink" title="9. プレビュー機能について"></a>9. プレビュー機能について</h3><p>プレビュー版製品や機能のサポートの前提については、以下の Azure サポート一般の FAQ 内容をご参照ください。<br>プレビュー版の公開状況や機能内容は予告なく変更される場合があり、原則として現状有姿 (AS-IS) でのご提供となることをご承知おきください（そのためベストエフォートでのご対応となり、例えばプレビュー版機能への修正ご要望などについては、弊社開発部門へのフィードバックに留まる場合もあります）。<br></p><ul><li><a href="https://azure.microsoft.com/ja-jp/support/faq/">Azure サポート プランに関する FAQ</a><blockquote><p>Q. プレビューのサービスや機能とは何ですか? </p><p>A. （前略）<br>Azure のプレビューのサービスや機能には、お客様のサービス契約で規定されているものとは異なる縮小版のサービス条件と、プレビューの追加使用条件が適用されます。<br>プレビューは、現状のまま、すべての欠点を含み、提供可能な場合に提供され、サービス レベル アグリーメント (SLA) や、Microsoft が一般提供を開始している Azure サービスに対して提供する限定的な保証からは除外されています。</p></blockquote></li></ul><br><hr><p><code>変更履歴</code><br><code>2025/05/21 created by Uehara</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> はじめに </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Speech で作成したモデルを Speech Translation で使用する方法</title>
      <link href="/blog/2025/05/02/speech-translation-with-custom-speech/"/>
      <url>/blog/2025/05/02/speech-translation-with-custom-speech/</url>
      
        <content type="html"><![CDATA[<p>Custom Speech で作成したモデルを Speech Translation で使用する方法をご紹介します。</p><span id="more"></span><br><hr><h1 id="Custom-Speech-で作成したモデルを-Speech-Translation-で使用する方法"><a href="#Custom-Speech-で作成したモデルを-Speech-Translation-で使用する方法" class="headerlink" title="Custom Speech で作成したモデルを Speech Translation で使用する方法"></a>Custom Speech で作成したモデルを Speech Translation で使用する方法</h1><p>Speech Services の音声翻訳 (Speech Translation) は、まず Speech-to-Text で文字起こしされた結果を元に Text Translation で翻訳を行います。</p><ul><li><a href="https://www.microsoft.com/en-us/translator/business/machine-translation/#howspeech">How does speech translation work?</a></li></ul><p>この時、Speech-to-Text の処理で使用される音声認識モデルは Custom Speech でカスタマイズすることができます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/custom-speech-overview">Custom Speech</a></li></ul><h2 id="C-NET-を使用する場合のコード例"><a href="#C-NET-を使用する場合のコード例" class="headerlink" title="C# (.NET) を使用する場合のコード例:"></a>C# (.NET) を使用する場合のコード例:</h2><p><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.cognitiveservices.speech.speechtranslationconfig?view=azure-dotnet">SpeechTranslationConfig</a> のプロパティ <code>EndpointId</code> にモデルのエンドポイント ID を指定します。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SpeechTranslationConfig config = SpeechTranslationConfig.FromSubscription(SubscriptionKey, Region);</span><br><span class="line"></span><br><span class="line">// Custom Speech のモデル指定</span><br><span class="line">// 例: エンドポイント ID が 51747863-4b1a-4efa-a1cb-84be48ae50d7 の場合</span><br><span class="line"></span><br><span class="line">config.EndpointId = &quot;51747863-4b1a-4efa-a1cb-84be48ae50d7&quot;;</span><br><span class="line"></span><br><span class="line">// 以降の音声認識・翻訳は通常と同じ</span><br></pre></td></tr></table></figure><h2 id="JavaScript-を使用する場合のコード例"><a href="#JavaScript-を使用する場合のコード例" class="headerlink" title="JavaScript を使用する場合のコード例:"></a>JavaScript を使用する場合のコード例:</h2><p>Speech SDK for JavaScript の場合、<a href="https://learn.microsoft.com/en-us/javascript/api/microsoft-cognitiveservices-speech-sdk/speechconfig?view=azure-node-latest">Speech to Text</a> では endpointId を使用していますが、<a href="https://learn.microsoft.com/en-us/javascript/api/microsoft-cognitiveservices-speech-sdk/speechtranslationconfig?view=azure-node-latest">Speech Translation</a> では endpointId のプロパティは参照されません。<br>そのため、エンドポイントの URL パラメーター <code>cid</code> として指定する必要があります。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// リージョンが Japan East, エンドポイント ID が 51747863-4b1a-4efa-a1cb-84be48ae50d7 の場合</span><br><span class="line"></span><br><span class="line">speechConfig = SpeechSDK.SpeechTranslationConfig.fromEndpoint(new URL(&quot;wss://japaneast.s2s.speech.microsoft.com/speech/translation/cognitiveservices/v1?cid=51747863-4b1a-4efa-a1cb-84be48ae50d7&quot;),settings.subscriptionKey);</span><br><span class="line"></span><br><span class="line">// 以降の音声認識・翻訳は通常と同じ</span><br></pre></td></tr></table></figure><p>エンドポイントの URL を確認する方法については、<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/speech-service/speech-services-private-link?tabs=portal#construct-endpoint-url">こちらのドキュメント</a>の “エンドポイント URL の構築” をご参照ください。</p><h3 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h3><p>Speech Translation の場合に endpointId が参照されないことは <a href="https://github.com/microsoft/cognitive-services-speech-sdk-js/tree/master">GitHub で公開されているソースコード</a>からご確認いただけます。</p><p><strong>Speech to Text の場合:</strong></p><p><a href="https://github.com/microsoft/cognitive-services-speech-sdk-js/blob/master/src/common.speech/TranscriberConnectionFactory.ts">TranscriberConnectionFactory.ts</a> より抜粋:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public setQueryParams(queryParams: IStringDictionary&lt;string&gt;, config: RecognizerConfig, endpointUrl: string): void &#123;</span><br><span class="line"></span><br><span class="line">    const endpointId: string = config.parameters.getProperty(PropertyId.SpeechServiceConnection_EndpointId, undefined);</span><br></pre></td></tr></table></figure><p><strong>Speech Translation の場合:</strong></p><p><a href="https://github.com/microsoft/cognitive-services-speech-sdk-js/blob/master/src/common.speech/TranslationConnectionFactory.ts">TranslationConnectionFactory.ts</a> より抜粋:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public setQueryParams(queryParams: IStringDictionary&lt;string&gt;, config: RecognizerConfig, endpointUrl: string): void &#123;</span><br><span class="line">    // Common parameters for both V1 and V2 endpoints</span><br><span class="line">    queryParams.from = config.parameters.getProperty(PropertyId.SpeechServiceConnection_RecoLanguage);</span><br><span class="line">    queryParams.to = config.parameters.getProperty(PropertyId.SpeechServiceConnection_TranslationToLanguages);</span><br><span class="line">    queryParams.scenario = config.recognitionMode === RecognitionMode.Interactive ? &quot;interactive&quot; :</span><br><span class="line">        config.recognitionMode === RecognitionMode.Conversation ? &quot;conversation&quot; : &quot;&quot;;</span><br></pre></td></tr></table></figure><h2 id="翻訳のカスタマイズについて"><a href="#翻訳のカスタマイズについて" class="headerlink" title="翻訳のカスタマイズについて"></a>翻訳のカスタマイズについて</h2><p>Custom Translator で作成した翻訳モデルも同時に使用する場合は<a href="https://jpaiblog.github.io/blog/2021/05/17/speech-translation-with-custom-translator/">こちらのブログ</a>をご参照ください。</p><hr><p><code>変更履歴</code><br><code>2025/05/02 created by Nakagami</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Speech Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Speech Services </tag>
            
            <tag> Custom Translator </tag>
            
            <tag> Speech SDK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI Service のレスポンスを確認する方法</title>
      <link href="/blog/2025/05/01/AzureOpenAIService-Monitor-Response/"/>
      <url>/blog/2025/05/01/AzureOpenAIService-Monitor-Response/</url>
      
        <content type="html"><![CDATA[<p>この記事では、Azure OpenAI Service のレスポンスを Azure サービス側で確認する方法をご紹介します。</p><span id="more"></span><br><hr><h2 id="Azure-OpenAI-Service-の-API-レスポンスについて"><a href="#Azure-OpenAI-Service-の-API-レスポンスについて" class="headerlink" title="Azure OpenAI Service の API レスポンスについて"></a>Azure OpenAI Service の API レスポンスについて</h2><p>Azure OpenAI Service では状況によって成功 (HTTP ステータスコード 2xx) 以外の応答が返る場合があります (具体的な例については<a href="https://jpaiblog.github.io/blog/2023/12/29/AzureOpenAIService-error-codes/">別のブログ記事</a>にまとまっています)。<br><br/><br>その原因を調査するには、具体的にどのような応答が返っているのかを確認する必要がありますが、これは API を呼び出すクライアント (アプリケーション) 側で記録することが一般的です。<br><br/><br>もし呼び出し元で確認することが難しい場合は、レスポンス コードや API の種類など、限られた情報であれば Azure サービス側に組み込まれた機能で確認することができます。</p><h2 id="方法-1-Azure-Monitor-のメトリックを使用する"><a href="#方法-1-Azure-Monitor-のメトリックを使用する" class="headerlink" title="方法 1. Azure Monitor のメトリックを使用する"></a>方法 1. Azure Monitor のメトリックを使用する</h2><p>Azure OpenAI Service で利用できる <a href="https://learn.microsoft.com/ja-jp/azure/azure-monitor/metrics/data-platform-metrics">Azure Monitor のメトリック</a> <code>Azure OpenAI Requests</code> には、ディメンション (Dimension) として HTTP ステータスコードを表す <code>StatusCode</code> や、デプロイ名を表す <code>ModelDeploymentName</code> などが用意されています。<br><br/><br>これらを使用して<a href="https://learn.microsoft.com/ja-jp/azure/azure-monitor/metrics/analyze-metrics#use-dimension-filters-and-splitting">メトリックを分割・フィルター</a>することにより、API 呼び出しの種類やデプロイ名、ステータス コードなどを確認することができます。</p><p><strong>Azure ポータルでの表示例:</strong></p><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Monitor-Response/AOAI-Metrics.png" width=800px><br/><p><a href="https://learn.microsoft.com/ja-jp/azure/azure-monitor/metrics/analyze-metrics#configure-the-time-range">メトリックの保持期間</a>を超えない範囲であれば、過去のメトリックを参照するために事前の設定は必要ありません。</p><p>参考ドキュメント:</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/monitor-openai">Azure OpenAI を監視する</a></li><li><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/monitor-openai-reference#category-azure-openai---http-requests">Azure OpenAI monitoring data reference</a></li></ul><hr><h2 id="方法-2-診断ログ-Diagnostic-Log-を使用する"><a href="#方法-2-診断ログ-Diagnostic-Log-を使用する" class="headerlink" title="方法 2. 診断ログ (Diagnostic Log) を使用する"></a>方法 2. 診断ログ (Diagnostic Log) を使用する</h2><p>Azure OpenAI Service では、他の Azure AI services と同様に、API 呼び出し毎にステータスコードなどの記録を行う<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/diagnostic-logging">診断ログ</a>がサポートされています。 <strong>事前に</strong> Log Analaytics などへログを出力する設定を行うことで、API 呼び出しの種類やレスポンス コードなどを確認することができます。</p><p><strong>Azure ポータル (Log Analytics) での表示例:</strong><br><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Monitor-Response/AOAI-DiagLog.png" width=800px></p><br/><p>Azure OpenAI Service のデータ プレーン API 呼び出しの記録は <code>RequestResponse</code> のカテゴリー (Category) で記録されます。また  代表的なプロパティは以下の通りです。</p><br/><table><thead><tr><th>プロパティ名</th><th>説明</th></tr></thead><tbody><tr><td>OperationName</td><td>API の種類 (例. Chat Completions)。</td></tr><tr><td>CallerIPAddress</td><td>呼び出し元の IP アドレス。<br/> 注: IPv4 アドレスの最終オクテットはマスクされます。これを解除する方法はありません。またサービス エンドポイントなど仮想ネットワーク経由でアクセスした場合、Azure 内部で使われる IPv6 アドレスが記録される場合があります。</td></tr><tr><td>ResultSignature</td><td>HTTP ステータスコード (例. 200 &#x2F; 429 など)。</td></tr><tr><td>CorrelationId</td><td>API 呼び出しの識別子。<br/> Azure サポートへお問い合わせいただく際にはこの ID を含めていただくと API 呼び出しの特定が迅速に行えるようになります。</td></tr><tr><td>properties_s.apiName</td><td>API バージョン (例. 2025-01-01-preview)。</td></tr><tr><td>properties_s.modelDeploymentName</td><td>デプロイ名。</td></tr><tr><td>properties_s.modelName</td><td>モデル名 (例. gpt-4o)。</td></tr><tr><td>properties_s.modelVersion</td><td>モデル バージョン (例. 2024-11-20)。</td></tr></tbody></table><p>参考ドキュメント:</p><ul><li><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/reference">Azure OpenAI Service REST API reference</a></li></ul><h2 id="ご留意点"><a href="#ご留意点" class="headerlink" title="ご留意点"></a>ご留意点</h2><p>診断ログについては、API 呼び出しから Log Analytics へ記録されるまでに 10 分以上の時間を要する場合があります。<br><br/><br>また、いずれの方法でも、HTTP リクエストやレスポンスの詳細、例えばリクエスト本文 (例. プロンプトの内容) や応答本文 (例. 生成されたテキストやエラーメッセージ)、ヘッダーなどは確認できません。これらの情報は呼び出し元のアプリケーションで記録する必要があります。顧客データ取り扱いの観点から、Azure サポートにお問い合わせいただいても、エンジニアはこれらの詳細を確認することはできません。</p><br/><hr><p><code>変更履歴</code><br><code>2025-05-01 created by Nakagami</code>   </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Text to Speech の API を Entra ID 認証で呼び出す方法</title>
      <link href="/blog/2025/04/21/speech-how-to-call-API-with-Entra-ID-auth/"/>
      <url>/blog/2025/04/21/speech-how-to-call-API-with-Entra-ID-auth/</url>
      
        <content type="html"><![CDATA[<p>Speech Service の API、特に Text to Speech の API を Entra ID 認証で呼び出す方法について、Azure VM と curl を使用した場合の具体的な手順例をご紹介します。</p><span id="more"></span><br><hr><h1 id="Speech-Service-の-API-を-Entra-ID-認証で呼び出す方法"><a href="#Speech-Service-の-API-を-Entra-ID-認証で呼び出す方法" class="headerlink" title="Speech Service の API を Entra ID 認証で呼び出す方法"></a>Speech Service の API を Entra ID 認証で呼び出す方法</h1><p>Speech Service の API を Entra ID 認証で呼び出すには、<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/what-are-ai-services">他の Azure AI services</a> とは異なり、<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/speech-service/how-to-configure-azure-ad-auth?tabs=portal">認証トークンに追加の処理</a>が必要です。<br>この点を踏まえた具体的な手順例を以下にまとめていますので、アプリケーションへ組み込みいただく際の参考としてご利用ください。</p><h2 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h2><ol><li><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/managed-identities-azure-resources/how-to-configure-managed-identities?pivots=qs-configure-portal-windows-vm">Azure VM でシステム割り当てのマネージド ID を有効</a> にします。</p></li><li><p>(1) のマネージド ID に、Speech Service のリソースに対して Cognitive Services Speech User のロールを割り当てます。</p><p> <a href="https://learn.microsoft.com/ja-jp/azure/ai-services/speech-service/role-based-access-control">Cognitive Services User など他のロール</a>でも可能です。</p></li><li><p>Speech Service のリソースで<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/cognitive-services-custom-subdomains">カスタムサブドメイン名</a>を有効にします。</p><p> Entra ID 認証を使用するにはカスタムサブドメイン名を有効にする必要があります。この点は<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/authentication">他の Azure AI services と共通</a>です。</p></li></ol><h2 id="API-呼び出し"><a href="#API-呼び出し" class="headerlink" title="API 呼び出し"></a>API 呼び出し</h2><p>以降は Azure VM (Linux) に SSH でログインして curl のコマンドで動作確認します。</p><ol start="4"><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/managed-identities-azure-resources/how-to-use-vm-token">マネージド ID を使用して Entra ID トークンを取得</a>します。</li></ol><p>コマンド例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET &quot;http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&amp;resource=https%3A%2F%2Fcognitiveservices.azure.com&quot; -H &quot;Metadata: true&quot;</span><br></pre></td></tr></table></figure><p>応答例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;access_token&quot;: &quot;eyJ0eX...g&quot;,</span><br><span class="line">    &quot;client_id&quot;: &quot;2a...3&quot;,</span><br><span class="line">    &quot;expires_in&quot;: &quot;86061&quot;,</span><br><span class="line">    &quot;expires_on&quot;: &quot;1738835772&quot;,</span><br><span class="line">    &quot;ext_expires_in&quot;: &quot;86399&quot;,</span><br><span class="line">    &quot;not_before&quot;: &quot;1738749072&quot;,</span><br><span class="line">    &quot;resource&quot;: &quot;https://cognitiveservices.azure.com&quot;,</span><br><span class="line">    &quot;token_type&quot;: &quot;Bearer&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>“aad#{resourceId}#{aadToken}” の形式で<a href="https://learn.microsoft.com/en-us/azure/ai-services/speech-service/how-to-configure-azure-ad-auth?tabs=portal&pivots=programming-language-csharp">トークンを成形</a>します。</li></ol><p>例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aad#/subscriptions/&lt;Sub ID&gt;/resourceGroups/&lt;Resource Group&gt;/providers/Microsoft.CognitiveServices/accounts/&lt;Resource&gt;#eyJ0eX...g</span><br></pre></td></tr></table></figure><ol start="6"><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/speech-service/rest-text-to-speech?tabs=streaming">Text to Speech の API</a> を呼び出します</li></ol><p>コマンド例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">curl -v --location --request POST &quot;https://&lt;Custom subdomain&gt;.cognitiveservices.azure.com/tts/cognitiveservices/v1&quot; \</span><br><span class="line">--header &quot;Authorization: aad#/subscriptions/&lt;Sub ID&gt;/resourceGroups/&lt;Resource Group&gt;/providers/Microsoft.CognitiveServices/accounts/&lt;Resource&gt;#eyJ0eX...g&quot; \</span><br><span class="line">--header &#x27;Content-Type: application/ssml+xml&#x27; \</span><br><span class="line">--header &#x27;X-Microsoft-OutputFormat: audio-16khz-128kbitrate-mono-mp3&#x27; \</span><br><span class="line">--header &#x27;User-Agent: curl&#x27; \</span><br><span class="line">--data-raw &#x27;&lt;speak version=&#x27;\&#x27;&#x27;1.0&#x27;\&#x27;&#x27; xml:lang=&#x27;\&#x27;&#x27;en-US&#x27;\&#x27;&#x27;&gt;</span><br><span class="line">    &lt;voice xml:lang=&#x27;\&#x27;&#x27;en-US&#x27;\&#x27;&#x27; xml:gender=&#x27;\&#x27;&#x27;Female&#x27;\&#x27;&#x27; name=&#x27;\&#x27;&#x27;en-US-AvaMultilingualNeural&#x27;\&#x27;&#x27;&gt;</span><br><span class="line">        my voice is my passport verify me</span><br><span class="line">    &lt;/voice&gt;</span><br><span class="line">&lt;/speak&gt;&#x27; &gt; output.mp3</span><br></pre></td></tr></table></figure><p>応答例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt; HTTP/2 200</span><br><span class="line">&lt; date: Wed, 05 Feb 2025 10:02:43 GMT</span><br><span class="line">&lt; content-type: audio/mpeg</span><br></pre></td></tr></table></figure><p>指定したフォーマット (audio-16khz-128kbitrate-mono-mp3) で音声ファイル (output.mp3) が出力されます。</p><hr><p><code>変更履歴</code><br><code>2025/04/21 created by Nakagami</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Speech Service </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Speech Service </tag>
            
            <tag> Text-to-Speech </tag>
            
            <tag> Synthesis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI Service に関する FAQ</title>
      <link href="/blog/2025/04/10/AzureOpenAIService-FAQ/"/>
      <url>/blog/2025/04/10/AzureOpenAIService-FAQ/</url>
      
        <content type="html"><![CDATA[<p>この記事では、Azure OpenAI Service に関して <a href="https://learn.microsoft.com/ja-jp/azure/azure-portal/supportability/how-to-create-azure-support-request">Azure サポート</a> によくお問い合わせいただくご質問と回答 (FAQ) をまとめています。</p><span id="more"></span><br><hr><h1 id="1-制限付きアクセス-Limited-Access-について"><a href="#1-制限付きアクセス-Limited-Access-について" class="headerlink" title="(1) 制限付きアクセス (Limited Access) について"></a>(1) 制限付きアクセス (Limited Access) について</h1><p>Azure OpenAI Service には制限付きアクセス (<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access">Limited Access</a>) のため、利用に事前の申請が必要なケースがあります。例:</p><ul><li>新しくリリースされた制限付きアクセスのモデル (例: computer-use-preview) の利用</li><li>Modified Content Filtering の有効化</li><li>Modified Abuse Monitoring の有効化</li></ul><p>Limited Access の申請・審査のプロセスは、マイクロソフト本社の特別な部門が管理しています。そのため Azure ポータルからのお問い合わせでは回答できません。申請フォームに記載のメールアドレス <strong><a href="mailto:&#x63;&#x73;&#x67;&#97;&#116;&#101;&#64;&#x6d;&#105;&#x63;&#114;&#111;&#115;&#x6f;&#102;&#x74;&#46;&#x63;&#111;&#109;">&#x63;&#x73;&#x67;&#97;&#116;&#101;&#64;&#x6d;&#105;&#x63;&#114;&#111;&#115;&#x6f;&#102;&#x74;&#46;&#x63;&#111;&#109;</a></strong> にご連絡ください。<br>また <strong><a href="mailto:&#x63;&#x73;&#103;&#x61;&#x74;&#x65;&#x40;&#x6d;&#x69;&#x63;&#114;&#x6f;&#x73;&#111;&#102;&#x74;&#46;&#99;&#111;&#x6d;">&#x63;&#x73;&#103;&#x61;&#x74;&#x65;&#x40;&#x6d;&#x69;&#x63;&#114;&#x6f;&#x73;&#111;&#102;&#x74;&#46;&#99;&#111;&#x6d;</a></strong> へのお問い合わせは <strong>英語のみ</strong> での対応となりますのでご留意ください。</p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="Q"><a href="#Q" class="headerlink" title="Q:"></a>Q:</h3><ul><li>申請フォームに記載するべき内容について確認したい。</li><li>申請が受理・承認されるまでの時間の目安を知りたい。</li><li>申請フォームからアクセスをリクエストしたが応答が無いため状況を確認したい。</li><li>申請が拒否されたのでその理由を知りたい・再審査を要求したい。</li><li>Content Filtering &#x2F; Abuse Monitoring について “オプトアウト” をリクエストしたい。 (注: マイクロソフトのドキュメントでは “オプトアウト” という単語は使用していません)</li></ul><p>A. 申請フォームに記載のメールアドレス <strong><a href="mailto:&#x63;&#115;&#103;&#x61;&#x74;&#101;&#64;&#x6d;&#105;&#99;&#x72;&#x6f;&#115;&#x6f;&#x66;&#116;&#x2e;&#x63;&#111;&#x6d;">&#x63;&#115;&#103;&#x61;&#x74;&#101;&#64;&#x6d;&#105;&#99;&#x72;&#x6f;&#115;&#x6f;&#x66;&#116;&#x2e;&#x63;&#111;&#x6d;</a></strong> にご連絡ください。Azure ポータルからのお問い合わせでは回答できません。</p><br><hr><h1 id="2-クォータ申請について"><a href="#2-クォータ申請について" class="headerlink" title="(2) クォータ申請について"></a>(2) クォータ申請について</h1><p>Azure OpenAI Service では多くのお客様にご利用いただけるよう、利用量の上限 (<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/quota">クォータ</a>) が設けられています。TPM &#x2F; RPM やユニット数に関する既定のクォータが不足する場合は、<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/quotas-limits#how-to-request-quota-increases">専用のフォームから引き上げをリクエスト</a>することができます。</p><h2 id="Q-amp-A-1"><a href="#Q-amp-A-1" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="Q-Azure-サポートに-TPM-x2F-RPM-のクォータ引き上げを依頼したい。"><a href="#Q-Azure-サポートに-TPM-x2F-RPM-のクォータ引き上げを依頼したい。" class="headerlink" title="Q. Azure サポートに TPM &#x2F; RPM のクォータ引き上げを依頼したい。"></a>Q. Azure サポートに TPM &#x2F; RPM のクォータ引き上げを依頼したい。</h3><p>A. Azure サポートを通じたクォータ引き上げリクエストはお承りしておりません。上記の通り専用のフォームからリクエストいただけます。</p><h3 id="Q-申請できるクォータの上限を知りたい。承認されるかどうか事前に確認したい。"><a href="#Q-申請できるクォータの上限を知りたい。承認されるかどうか事前に確認したい。" class="headerlink" title="Q. 申請できるクォータの上限を知りたい。承認されるかどうか事前に確認したい。"></a>Q. 申請できるクォータの上限を知りたい。承認されるかどうか事前に確認したい。</h3><p>A. Azure サポートでは承認可否を事前に確認することはできません。実際に必要なクォータをフォームからリクエストいただくことをご検討ください。申請フォームでリクエスト可能な数量を超える場合、マイクロソフトのアカウント担当者 (以下、”アカウント チーム”) にお問い合わせください。</p><h3 id="Q-クォータの申請が受理・承認されるまでの時間の目安を知りたい。"><a href="#Q-クォータの申請が受理・承認されるまでの時間の目安を知りたい。" class="headerlink" title="Q. クォータの申請が受理・承認されるまでの時間の目安を知りたい。"></a>Q. クォータの申請が受理・承認されるまでの時間の目安を知りたい。</h3><p>A. クォータの引き上げ申請は Azure サポートではなく、専門の部署 (<a href="mailto:&#109;&#x73;&#97;&#x7a;&#117;&#114;&#x65;&#x6f;&#112;&#101;&#110;&#97;&#x69;&#x40;&#x6d;&#x69;&#x63;&#114;&#111;&#x73;&#111;&#102;&#116;&#46;&#99;&#x6f;&#x6d;">&#109;&#x73;&#97;&#x7a;&#117;&#114;&#x65;&#x6f;&#112;&#101;&#110;&#97;&#x69;&#x40;&#x6d;&#x69;&#x63;&#114;&#111;&#x73;&#111;&#102;&#116;&#46;&#99;&#x6f;&#x6d;</a>) で審査されています。申請は受け付けた順に処理されます。リードタイムに関する保証はありません。</p><h3 id="Q-クォータの引き上げをリクエストしたが応答が無いため状況を確認したい。"><a href="#Q-クォータの引き上げをリクエストしたが応答が無いため状況を確認したい。" class="headerlink" title="Q. クォータの引き上げをリクエストしたが応答が無いため状況を確認したい。"></a>Q. クォータの引き上げをリクエストしたが応答が無いため状況を確認したい。</h3><p>A. Azure サポートでは申請の状況を確認したり、加速したりすることはできません。申請受領の応答メールにある担当部門の連絡先 (<a href="mailto:&#x6d;&#115;&#97;&#x7a;&#117;&#x72;&#x65;&#x6f;&#112;&#x65;&#x6e;&#97;&#105;&#64;&#x6d;&#105;&#99;&#114;&#111;&#115;&#111;&#102;&#x74;&#46;&#99;&#x6f;&#109;">&#x6d;&#115;&#97;&#x7a;&#117;&#x72;&#x65;&#x6f;&#112;&#x65;&#x6e;&#97;&#105;&#64;&#x6d;&#105;&#99;&#114;&#111;&#115;&#111;&#102;&#x74;&#46;&#99;&#x6f;&#109;</a>, 英語のみ) にお問い合わせいただくことをご検討ください。<br>また個別の審査状況についてビジネス面からの優先対応をご要望の場合はアカウント チームへご相談ください。</p><p><a href="https://aka.ms/oai/quotaincrease">申請フォーム</a>より抜粋:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Azure Technical Support cannot be used to expedite the submission process.</span><br></pre></td></tr></table></figure><h3 id="Q-クォータ引き上げのリクエストが拒否された。"><a href="#Q-クォータ引き上げのリクエストが拒否された。" class="headerlink" title="Q. クォータ引き上げのリクエストが拒否された。"></a>Q. クォータ引き上げのリクエストが拒否された。</h3><p>A. Azure OpenAI Service は世界中から需要があるため、リクエストされた内容 (リージョン・デプロイの種類・数量) によってはお承りできない場合があります。リクエスト内容を変更して再度申請いただくことをご検討ください。Azure サポートでは具体的な理由の説明や再審査のリクエストは受付できません。もし同じ内容での再審査をご希望の場合はアカウント チームへご相談ください。</p><h3 id="Q-Provisioned-のデプロイで-1000-ユニットを超えるクォータをリクエストしたい。"><a href="#Q-Provisioned-のデプロイで-1000-ユニットを超えるクォータをリクエストしたい。" class="headerlink" title="Q. Provisioned のデプロイで 1000 ユニットを超えるクォータをリクエストしたい。"></a>Q. Provisioned のデプロイで 1000 ユニットを超えるクォータをリクエストしたい。</h3><p>A. 申請フォームでリクエスト可能な数量を超える場合、アカウント チームにお問い合わせください。</p><h3 id="Q-TPM-x2F-RPM-のクォータ変更をリクエストをしていないがクォータの上限が変更された。"><a href="#Q-TPM-x2F-RPM-のクォータ変更をリクエストをしていないがクォータの上限が変更された。" class="headerlink" title="Q. TPM &#x2F; RPM のクォータ変更をリクエストをしていないがクォータの上限が変更された。"></a>Q. TPM &#x2F; RPM のクォータ変更をリクエストをしていないがクォータの上限が変更された。</h3><p>A. クォータの上限は変更される可能性があります。変更後のクォータで不足する場合は上記の通り専用のフォームからリクエストいただけます。</p><ul><li>参考: <a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/quota?tabs=rest#assign-quota">Manage Azure OpenAI Service quota</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Important</span><br><span class="line">Quotas and limits are subject to change, for the most up-date-information consult our quotas and limits article.</span><br></pre></td></tr></table></figure></li></ul><h3 id="Q-CSP-サブスクリプションでは誰が申請するべきか？パートナーか、エンドユーザーか？"><a href="#Q-CSP-サブスクリプションでは誰が申請するべきか？パートナーか、エンドユーザーか？" class="headerlink" title="Q. CSP サブスクリプションでは誰が申請するべきか？パートナーか、エンドユーザーか？"></a>Q. CSP サブスクリプションでは誰が申請するべきか？パートナーか、エンドユーザーか？</h3><p>A.<br>原則としてはサブスクリプションの種類によらず、リクエスト対象の Azure サブスクリプションについて<a href="https://azure.microsoft.com/ja-jp/support/legal/">契約</a>上の責任を負う方から申請いただくことを想定しています。Azure サポートでは個別のケースについて具体的な入力内容のアドバイスをすることはできません。</p><br><hr><h1 id="3-サンプルの-Web-アプリについて"><a href="#3-サンプルの-Web-アプリについて" class="headerlink" title="(3) サンプルの Web アプリについて"></a>(3) サンプルの Web アプリについて</h1><p><a href="https://oai.azure.com/">Azure OpenAI Studio</a> や <a href="https://ai.azure.com/">Azure AI Foundry</a> のチャット プレイグランドでは、 <a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/use-web-app">サンプルの Web アプリ</a>をデプロイすることができます。この Web アプリはサンプルであり、マイクロソフトが動作を保証するものではありません。お客様ご自身が独自に開発されたアプリケーションと同じ扱いになります。このサンプルのサポートについては <a href="https://github.com/microsoft/sample-app-aoai-chatGPT/blob/main/SUPPORT.md">GitHub</a> に記載されています。</p><h2 id="Q-amp-A-2"><a href="#Q-amp-A-2" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="Q-デプロイされた-Web-アプリにアクセスできない。"><a href="#Q-デプロイされた-Web-アプリにアクセスできない。" class="headerlink" title="Q. デプロイされた Web アプリにアクセスできない。"></a>Q. デプロイされた Web アプリにアクセスできない。</h3><p>A. Web アプリケーションのどこで問題が発生しているのか (例. Entra ID 認証がエラーになる) についてはお客様側で切り分けが必要です。ソースコードは <a href="https://github.com/microsoft/sample-app-aoai-chatGPT/tree/main">GitHub</a> でご確認いただけます。</p><h3 id="Q-Web-アプリで操作-例-チャットのメッセージ送信-を行うとエラーになる。"><a href="#Q-Web-アプリで操作-例-チャットのメッセージ送信-を行うとエラーになる。" class="headerlink" title="Q. Web アプリで操作 (例. チャットのメッセージ送信) を行うとエラーになる。"></a>Q. Web アプリで操作 (例. チャットのメッセージ送信) を行うとエラーになる。</h3><p>A. お客様側で Web アプリの実装に依存しないことが切り分けされている (例. curl で呼び出した場合でも再現することを確認している) 場合は、具体的にエラーになっているサービス・API について Azure サポートで調査を支援することは可能です。</p><h3 id="Q-環境変数を変更したが期待する動作にならない。"><a href="#Q-環境変数を変更したが期待する動作にならない。" class="headerlink" title="Q. 環境変数を変更したが期待する動作にならない。"></a>Q. 環境変数を変更したが期待する動作にならない。</h3><p>A. サンプルコードの問題は <a href="https://github.com/microsoft/sample-app-aoai-chatGPT/blob/main/SUPPORT.md">GitHub</a> の Issues で報告いただけます。サンプルコードの調査・デバッグは Azure サポートの対応範囲外です。</p><h3 id="Q-仮想ネットワークに統合してプライベート-エンドポイント経由でアクセスできるようにしたい。"><a href="#Q-仮想ネットワークに統合してプライベート-エンドポイント経由でアクセスできるようにしたい。" class="headerlink" title="Q. 仮想ネットワークに統合してプライベート エンドポイント経由でアクセスできるようにしたい。"></a>Q. 仮想ネットワークに統合してプライベート エンドポイント経由でアクセスできるようにしたい。</h3><p>A. 各サービスのネットワークに関連した機能についてそれぞれご確認ください。このサンプルを前提とした手順や構成例は用意されていません。</p><p>Azure OpenAI Service、特に On-Your-Data をご利用の場合に、ネットワークを制限 (いわゆる “閉域化”) を行う方法については、<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/on-your-data-configuration">ドキュメント</a>が用意されています。それぞれの製品 (例. <a href="https://learn.microsoft.com/ja-jp/azure/app-service/overview-vnet-integration">App Service の仮想ネットワーク統合</a>) の具体的な設定に関するお問い合わせは対象のサービス・リソースを選択して Azure ポータルからご起票ください。</p><h3 id="Q-サンプルの-Web-アプリで可能ことを確認したい。"><a href="#Q-サンプルの-Web-アプリで可能ことを確認したい。" class="headerlink" title="Q. サンプルの Web アプリで可能ことを確認したい。"></a>Q. サンプルの Web アプリで可能ことを確認したい。</h3><p>A. Web アプリの実装や機能に関する解説は Azure サポートでは行っておりません。具体的な実装は <a href="https://github.com/microsoft/sample-app-aoai-chatGPT/tree/main">GitHub</a> をご確認ください。</p><h3 id="Q-Web-アプリの表示を変更したい・機能を追加したい。"><a href="#Q-Web-アプリの表示を変更したい・機能を追加したい。" class="headerlink" title="Q. Web アプリの表示を変更したい・機能を追加したい。"></a>Q. Web アプリの表示を変更したい・機能を追加したい。</h3><p>A. お客様個別のご要件に応じた設定のアドバイスや、カスタマイズされたコードの提供は Azure サポートでは行っておりません。<a href="https://github.com/microsoft/sample-app-aoai-chatGPT/tree/main">GitHub</a> のソースコードを元に必要な変更を行ってください。</p><br><hr><h1 id="4-新しいモデル・機能やリージョンの利用可否について"><a href="#4-新しいモデル・機能やリージョンの利用可否について" class="headerlink" title="(4) 新しいモデル・機能やリージョンの利用可否について"></a>(4) 新しいモデル・機能やリージョンの利用可否について</h1><p>将来のリリース予定については、一般に公開 (マイクロソフト公式のドキュメントやブログで広くアナウンス) されていない限り、ビジネス上の機密情報に当たるため、Azure サポートでは回答できません。</p><h2 id="Q-amp-A-3"><a href="#Q-amp-A-3" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="Q-1"><a href="#Q-1" class="headerlink" title="Q:"></a>Q:</h3><ul><li>OpenAI が発表した新機能が Azure OpenAI Service でいつ利用できるようになるのか。</li><li>OpenAI の新しいモデルを Azure で利用したいが提供予定を教えてほしい。</li><li>あるリージョン (例. 東日本) で特定のモデル・バージョンが利用できるようになる時期を知りたい。</li><li><a href="https://azure.microsoft.com/en-us/explore/global-infrastructure/data-residency/">データの所在地</a>に要件があるため <a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/deployment-types#standard">Standard のデプロイ</a>で利用したい。Standard のデプロイで利用できるようになる予定はあるか。</li></ul><p>A. 公開情報でのアナウンスをお待ちください。</p><p>Azure OpenAI Service や Azure AI Foundry のリリース情報は<a href="https://azure.microsoft.com/en-us/blog/category/ai-machine-learning/">製品開発部門のブログ</a>でもご確認いただけます。</p><h3 id="補足-ドキュメントの更新について"><a href="#補足-ドキュメントの更新について" class="headerlink" title="補足: ドキュメントの更新について"></a>補足: ドキュメントの更新について</h3><p><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models">リージョンやモデルの利用可否を列挙している公開ドキュメント</a>は手動で更新されており、最新の状況が反映されていない場合があります。また Limited Access のため一部のサブスクリプションに限定して提供されている場合もあります。</p><p>そのため実際に利用可能なモデル・バージョン・リージョン・デプロイの種類に関する最新の情報は、ご利用の Azure サブスクリプションで <a href="https://learn.microsoft.com/en-us/rest/api/aiservices/accountmanagement/model-capacities/list?view=rest-aiservices-accountmanagement-2024-10-01&tabs=HTTP">Model Capacities - List</a> の API を使用してご確認いただくことが推奨されます。</p><ul><li>Azure CLI での実行例:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ az rest --method get --url &quot;/subscriptions/&lt;YOUR SUB ID&gt;/providers/Microsoft.CognitiveServices/modelCapacities?api-version=2024-04-01-preview&amp;modelFormat=OpenAI&amp;modelName=gpt-4o&amp;modelVersion=2024-11-20&quot;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">    &#123;</span><br><span class="line">     &quot;id&quot;: &quot;/subscriptions//&lt;YOUR SUB ID&gt;/providers/Microsoft.CognitiveServices/locations/japaneast/models/OpenAI.gpt-4o.2024-11-20/skuCapacities/Standard&quot;,</span><br><span class="line">      &quot;location&quot;: &quot;japaneast&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Standard&quot;,</span><br><span class="line">     &quot;properties&quot;: &#123;</span><br><span class="line">       &quot;availableCapacity&quot;: 50,</span><br><span class="line">       &quot;model&quot;: &#123;</span><br><span class="line">         &quot;format&quot;: &quot;OpenAI&quot;,</span><br><span class="line">         &quot;name&quot;: &quot;gpt-4o&quot;,</span><br><span class="line">         &quot;version&quot;: &quot;2024-11-20&quot;</span><br><span class="line">       &#125;,</span><br><span class="line">       &quot;skuName&quot;: &quot;Standard&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">     &quot;type&quot;: &quot;Microsoft.CognitiveServices/locations/models/skuCapacities&quot;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li></ul><p>Azure CLI については Azure ポータルの <a href="https://learn.microsoft.com/ja-jp/azure/cloud-shell/overview">Cloud Shell</a> でも利用できます。</p><br><hr><h1 id="5-利用契約や関連法規について"><a href="#5-利用契約や関連法規について" class="headerlink" title="(5) 利用契約や関連法規について"></a>(5) 利用契約や関連法規について</h1><p>Azure の <strong>技術 (テクニカル)</strong> サポートは API 呼び出し時のエラーなど、何らか技術的な問題が発生した際のトラブルシューティングや修正 (break fix) を支援するものです。 Azure サポートでは利用規約や法規に関するご質問、例えば法律的な解釈や法務的なアドバイスを差し上げることはできません。</p><h2 id="Q-amp-A-4"><a href="#Q-amp-A-4" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="Q-現在想定している使い方は利用規約の観点から問題無いか。"><a href="#Q-現在想定している使い方は利用規約の観点から問題無いか。" class="headerlink" title="Q. 現在想定している使い方は利用規約の観点から問題無いか。"></a>Q. 現在想定している使い方は利用規約の観点から問題無いか。</h3><p>A. Azure サポートでは個別の利用シナリオについて可否を判断することはできません。関連する利用規約や法規に照らした場合に問題無いかどうかは、必要に応じて専門家 (法務部門や顧問弁護士など) を交えて、ユーザー側の責任でご判断いただく必要があります。</p><h3 id="Q-Azure-OpenAI-Service-の準拠法・管轄裁判所について教えてほしい。"><a href="#Q-Azure-OpenAI-Service-の準拠法・管轄裁判所について教えてほしい。" class="headerlink" title="Q. Azure OpenAI Service の準拠法・管轄裁判所について教えてほしい。"></a>Q. Azure OpenAI Service の準拠法・管轄裁判所について教えてほしい。</h3><p>A. Azure OpenAI Service は <a href="https://azure.microsoft.com/ja-jp/support/legal/">Azure サブスクリプションの契約</a>に基づいて提供されます。準拠法や管轄裁判所は Azure OpenAI Service 固有ではなく、Azure サブスクリプションの契約で規定されているため、契約内容をご確認ください。</p><h3 id="Q-Azure-OpenAI-Service-で日本国外のリージョンを使用する場合、個人情報保護法で規定された第三者提供に当たるのか。"><a href="#Q-Azure-OpenAI-Service-で日本国外のリージョンを使用する場合、個人情報保護法で規定された第三者提供に当たるのか。" class="headerlink" title="Q. Azure OpenAI Service で日本国外のリージョンを使用する場合、個人情報保護法で規定された第三者提供に当たるのか。"></a>Q. Azure OpenAI Service で日本国外のリージョンを使用する場合、個人情報保護法で規定された第三者提供に当たるのか。</h3><p>A. 関連する利用規約やドキュメントを元にユーザー側でご判断ください。</p><ul><li>Azure OpenAI Service に限らず、多くの Azure サービスにおける顧客情報の取り扱いについては、サブスクリプションの利用開始時に同意されている<a href="(https://azure.microsoft.com/ja-jp/support/legal/)">契約条項</a>が適用されます。</li><li>顧客情報の取り扱い (例. EU の GDPR への準拠等) については、<a href="https://www.microsoft.com/licensing/docs/view/Microsoft-Products-and-Services-Data-Protection-Addendum-DPA">“Microsoft 製品およびサービス データ保護補遺” (Microsoft Products and Services Data Protection Addendum , DPA)</a> に規定されています。</li><li>Azure OpenAI Service については製品固有の利用条件 (<a href="https://go.microsoft.com/fwlink/?linkid=2185110">Product Terms</a>) があり、例えば <a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/abuse-monitoring">Abuse Monitoring</a> について規定されています。</li><li>具体的な Azure OpenAI Service における顧客情報の取り扱いについては <a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/data-privacy">Data, privacy, and security for Azure OpenAI Service</a> でも説明されています。</li></ul><p>これらに照らした場合に、想定されている利用方法が日本の個人情報保護法の観点で問題があるかどうかについては、Azure サポートでは回答できません。必要に応じて専門家 (法務部門や顧問弁護士など) にご相談ください。</p><p>また公開情報に記載が無い、製品の内部仕様については回答できません。内部仕様は予告無く変更される可能性があるため、法務的な判断に利用することは推奨できかねます。</p><h3 id="Q-Azure-OpenAI-Service-を使用して生成されたテキストや画像の著作権はサービスの利用者に帰属するのか。"><a href="#Q-Azure-OpenAI-Service-を使用して生成されたテキストや画像の著作権はサービスの利用者に帰属するのか。" class="headerlink" title="Q. Azure OpenAI Service を使用して生成されたテキストや画像の著作権はサービスの利用者に帰属するのか。"></a>Q. Azure OpenAI Service を使用して生成されたテキストや画像の著作権はサービスの利用者に帰属するのか。</h3><p>A. ユーザーが Azure OpenAI Service を利用して生成したテキストや画像は顧客データです。一方これは生成物の知的財産権 (例.著作権) がユーザーに帰属することをマイクロソフトが約束するものではありません。</p><p>「AI が生成したものに著作権が認められるのかどうか？」は各国や地域の法律、また具体的な事例によっても判断が異なっています。例えば日本では文化庁が<a href="https://www.bunka.go.jp/seisaku/chosakuken/aiandcopyright.html">生成 AI と著作権に関するガイドライン (外部リンク)</a>を公開しています。</p><p>想定されている利用方法で知的財産権に関する問題が無いかどうかは、必要に応じて専門家 (例. 著作権を専門とする弁護士) にご相談ください。</p><p>補足として、Customer Copyright Commitment (CCC) は「知的財産権 (intellectual property) に限って、もし第三者から権利侵害の申し立てがあった場合に、一定の要件を満たせば、マイクロソフトがお客様に代わって防御 (defend) する」という規定です。知的財産権の帰属を担保するものではありません。</p><ul><li><p>製品条項 (Product Terms) の規定より抜粋:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Customer Copyright Commitment</span><br><span class="line">Microsoft’s obligation to defend Customer against third-party intellectual property claims under Customer’s volume licensing agreement will apply to Customer’s use or distribution of Output Content of a Covered Product if all the following additional conditions are met:</span><br></pre></td></tr></table></figure></li><li><p><a href="https://www.microsoft.com/licensing/docs/customeragreement">Microsoft Customer Agreement</a> の日本語ドキュメントより抜粋:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">第三者からの申し立てに対する防御</span><br><span class="line"> </span><br><span class="line">両当事者は、本条に規定する第三者からの申し立てについて、他方当事者を防御し、敗訴の確定判決または他方当事者が承認した和解によって生じた金員を支払うものとします。ただし、防御を行う当事者が、当該申し立てについて速やかに書面で通知を受け、その防御および和解を管理する決定権を与えられた場合に限ります。防御される当事者は、防御を行う当事者に対し、要請されたすべての支援、情報および権限を提供しなければなりません。防御を行う当事者は、他方当事者が支援の提供のために現実に支出した合理的な経費を補償します。本条は、かかる申し立てにおける両当事者の唯一の権利および全責任について規定するものです。</span><br></pre></td></tr></table></figure></li></ul><h3 id="Q-Customer-Copyright-Commitment-CCC-について適用条件を満たすために十分と言えるかどうか判断してほしい。"><a href="#Q-Customer-Copyright-Commitment-CCC-について適用条件を満たすために十分と言えるかどうか判断してほしい。" class="headerlink" title="Q. Customer Copyright Commitment (CCC) について適用条件を満たすために十分と言えるかどうか判断してほしい。"></a>Q. Customer Copyright Commitment (CCC) について<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/customer-copyright-commitment">適用条件</a>を満たすために十分と言えるかどうか判断してほしい。</h3><p>A. 条件に準拠していることはユーザー自身が判断して示す必要があります。</p><p>例えば “Testing and Evaluation Report” の項目について、現在実施している内容が十分かどうかは関連するドキュメントに照らしてユーザーが判断する必要があります。</p><p>もしコンテンツ フィルターなどの技術的な設定で問題がある場合は Azure サポートで対応できます。</p><ul><li>参考: <a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/faq">Azure OpenAI Service に関してよく寄せられる質問</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Customer Copyright Commitment に基づくカバレッジを取得するにはどうすればよいですか?</span><br><span class="line">Customer Copyright Commitment は、2023 年 12 月 1 日の Microsoft の製品条項に含まれる規定であり、出力コンテンツに関連する特定のサードパーティの知的財産権に関するクレームから顧客を保護するための Microsoft の義務を説明するものです。 クレームの対象が Azure OpenAI Service (または顧客が安全システムを構成できる他の対象製品) から生成された出力コンテンツである場合は、カバレッジを受けるために、顧客は出力コンテンツを提供するオファリングで Azure OpenAI Service ドキュメントで必要とされるすべての軽減策を実装している必要があります。 必要な軽減策については、こちらに記載されており、継続的に更新されています。 新しいサービス、機能、モデル、またはユース ケースの場合、新しい CCC 要件が投稿され、そのようなサービス、機能、モデル、またはユース ケースの開始時または開始後に有効になります。 それ以外の場合、CCC のカバレッジを維持するために、顧客は公開から 6 か月以内に新しい軽減策を実装することになります。 顧客がクレームを申し立てる場合、その顧客は関連する要件への準拠を示す必要があります。 これらの軽減策は、Azure OpenAI Service を含め、顧客が安全システムを構成できる対象製品に必要です。他の対象製品を使っている顧客のカバレッジには影響しません。</span><br></pre></td></tr></table></figure></li></ul><br><hr><p><code>変更履歴</code><br><code>2025/04/10 created by Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI Service の Provisioned デプロイについて</title>
      <link href="/blog/2024/08/29/AzureOpenAIService-Provisioned-Deployment/"/>
      <url>/blog/2024/08/29/AzureOpenAIService-Provisioned-Deployment/</url>
      
        <content type="html"><![CDATA[<p>この記事では、 Azure OpenAI Service のデプロイの種類のひとつである Provisioned (プロビジョニング済み) について説明します。</p><span id="more"></span><br><hr><h2 id="Provisioned-プロビジョニング済み-のデプロイの概要"><a href="#Provisioned-プロビジョニング済み-のデプロイの概要" class="headerlink" title="Provisioned (プロビジョニング済み) のデプロイの概要"></a>Provisioned (プロビジョニング済み) のデプロイの概要</h2><p>Azure OpenAI Service では、モデルをデプロイする際に<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/deployment-types">デプロイの種類</a>を選択します。その中で今回紹介するのは “プロビジョニング済み” (Provisioned または Provisioned-managed) のデプロイです。</p><p><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/concepts/provisioned-migration">2024年8月の更新</a>により、広く一般に Provisioned のデプロイが利用できるようになりました (それ以前は、Microsoft のアカウントチームを通じて個別でリクエストが必要でした)。これに伴い、利用方法や料金体系も変更となっています。</p><h3 id="新しい-Provisioned-のポイント"><a href="#新しい-Provisioned-のポイント" class="headerlink" title="新しい Provisioned のポイント"></a>新しい Provisioned のポイント</h3><ol><li>ユーザーは<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/concepts/provisioned-throughput#model-independent-quota">割り当てられたクォータ</a>の範囲で、デプロイの種類:Provisioned-managed のデプロイを作成することができます</li><li>Provisioned-managed のデプロイを作成すると、<strong>ユニット数および利用時間に応じた課金が発生します</strong> (処理されたトークン数に基づく従量課金ではありません)</li><li>(必要に応じて) 月単位または年単位で予約 (Reservation) を購入することで料金が割り引かれます</li><li>時間単位の課金を停止するにはデプロイを削除します</li></ol><h3 id="時間単位の課金について"><a href="#時間単位の課金について" class="headerlink" title="時間単位の課金について"></a>時間単位の課金について</h3><p>Provisioned のデプロイでは、指定されたユニット (Provisioned Throughput Unit, PTU) の数に応じて、ハードウェアの処理容量 (キャパシティ) が占有されます。これにより、トークン数に応じた従量課金 (Standard, Global Standard) のデプロイよりも安定したパフォーマンスが見込める一方で、高性能なハードウェアを占有するために比較的高い単価となっています (1 ユニット、 1 時間当たり 2 USD など)。また、モデル毎に最低ユニット数が決まっており、例えば gpt-4o mini であれば 25 PTU が最小単位であるため、時間単位の課金では最低でも 25 * 2 &#x3D; <strong>50 USD</strong> が 1 時間ごとに課金されます。<br>※最新の価格は<a href="https://azure.microsoft.com/ja-jp/pricing/details/cognitive-services/openai-service/">Azure OpenAI Service の価格</a>をご参照ください。</p><h3 id="利用可能なリージョンやモデルについて"><a href="#利用可能なリージョンやモデルについて" class="headerlink" title="利用可能なリージョンやモデルについて"></a>利用可能なリージョンやモデルについて</h3><p>リージョンやモデル、バージョンによって、Provisioned のデプロイの利用可否は異なります。例えば、東日本リージョンでは gpt-4o は Standard では提供されていませんが、Provisioned であれば提供されています。最新の提供状況については<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models">Azure OpenAI Service models</a>をご参照ください。</p><h3 id="デプロイ時の表示について"><a href="#デプロイ時の表示について" class="headerlink" title="デプロイ時の表示について"></a>デプロイ時の表示について</h3><p>Azure OpenAI Studio からモデルをデプロイする際には、デプロイの種類は Provisioned-managed と表示されます。また、指定されたユニット数に応じた時間単位の課金額の見込みも確認できます。</p><ul><li>Azure OpenAI Studio での表示例:</li></ul><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Provisioned-Deployment/create-new-deployment.png" width=800px>  <h2 id="Provisioned-のデプロイを制限する方法"><a href="#Provisioned-のデプロイを制限する方法" class="headerlink" title="Provisioned のデプロイを制限する方法"></a>Provisioned のデプロイを制限する方法</h2><p>Azure サブスクリプションで Provisioned のデプロイを作成できないように制限する必要がある場合は、<a href="https://learn.microsoft.com/ja-jp/azure/governance/policy/overview">Azure Policy</a> により利用可能なデプロイの種類を限定できます。</p><ul><li><p>Provisioned のデプロイを禁止するポリシー定義の例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;policyRule&quot;: &#123;</span><br><span class="line">        &quot;if&quot;: &#123;</span><br><span class="line">            &quot;allOf&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;field&quot;: &quot;type&quot;,</span><br><span class="line">                    &quot;equals&quot;: &quot;Microsoft.CognitiveServices/accounts/deployments&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;field&quot;: &quot;Microsoft.CognitiveServices/accounts/deployments/sku.name&quot;,</span><br><span class="line">                    &quot;equals&quot;: &quot;ProvisionedManaged&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;then&quot;: &#123;</span><br><span class="line">            &quot;effect&quot;: &quot;Deny&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ポリシーにより操作がブロックされた場合の表示例:</p></li></ul><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Provisioned-Deployment/blocked-by-policy.png" width=500px>  <ul><li>参考 1. <a href="https://learn.microsoft.com/ja-jp/azure/governance/policy/tutorials/create-and-manage#implement-a-new-custom-policy">チュートリアル:コンプライアンスを強制するポリシーの作成と管理 - 新しいカスタム ポリシーを実施する</a></li><li>参考 2. <a href="https://learn.microsoft.com/ja-jp/azure/governance/policy/assign-policy-portal#create-a-policy-assignment">クイックスタート: Azure portal を使用して、ポリシーの割り当てを作成し、準拠していないリソースを特定する - ポリシー割り当てを作成する</a></li></ul><p>以上は2024年8月29日時点の情報です。日本語での表示名等は今後変わる可能性があります。最新の情報は<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/">公式ドキュメント</a>を併せてご参照ください。</p><hr><p><code>変更履歴</code><br><code>2024-08-29 created by nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>メトリック エクスプローラーを用いてAzure OpenAI の トークン使用量を確認する方法</title>
      <link href="/blog/2024/07/25/AzureOpenAIService-Metric-TPM/"/>
      <url>/blog/2024/07/25/AzureOpenAIService-Metric-TPM/</url>
      
        <content type="html"><![CDATA[<p>この記事はAzure Portal 上で使用できるメトリック エクスプローラーを用いて、トークン使用量の推移をグラフで表示させる方法についてご紹介します。</p><span id="more"></span><br><hr><h1 id="メトリックについて"><a href="#メトリックについて" class="headerlink" title="メトリックについて"></a>メトリックについて</h1><p>メトリックとは、Azure 上で特定のリソースに紐づいて集計された測定値のことを指します。<br>Azure OpenAI リソースで集計されるメトリックには、リソースのパフォーマンスや使用状況を評価するための指標が含まれます。</p><p>具体的には、Azure OpenAI リソースに関する、HTTP 要求数、入出力で処理されたトークン数、微調整モデルで処理されたトレーニング時間数などが含まれます。<br>このように、メトリックを確認することで現在までのトークンの使用量を簡単に確認することできるため、トークン数の消費が多い時間帯の可視化が可能になります。</p><h1 id="メトリックを通じて-Azure-OpenAI-モデルで処理された入出力トークン数を確認する方法"><a href="#メトリックを通じて-Azure-OpenAI-モデルで処理された入出力トークン数を確認する方法" class="headerlink" title="メトリックを通じて Azure OpenAI モデルで処理された入出力トークン数を確認する方法"></a>メトリックを通じて Azure OpenAI モデルで処理された入出力トークン数を確認する方法</h1><p>Azure Portal 上で該当するメトリックを確認する手順についてご紹介します。<br>まず、以下の画像のようにAzure Portal のホーム画面から、対象の Azure OpenAI のリソースを開きます。</p><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Metric-TPM/step1.png" width=1200px>  <p>次に、以下の画像のように、上でアクセスしたAzure OpenAIリソース画面の左側のタブから「メトリック」を選択します。<br>選択しますと、ページ上にメトリック エクスプローラーを開くことが出来ます。<br>この時メトリック エクスプローラーを操作し、「スコープ」に Azure OpenAI リソース名、「メトリック名前空間」に「コグニティブ サービス 標準的なメトリック」が表示されているかを確認します。</p><p>ここでは、Azure OpenAI モデルで処理された入出力トークンの数「Processed Inference Tokens」を示すことを考えてみます。</p><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Metric-TPM/step2.png" width=1200px>  <p>公式ドキュメント<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/monitoring#azure-openai-metrics">Azure OpenAI Service の監視</a> より「Azure OpenAIのメトリック」を参照することで、Azure Portalで確認できる「メトリック」と「集計」の情報を確認することができます。</p><p>以下は公式ドキュメントの一部を抜粋したものですが、今回該当するメトリックは、入力と出力の合計のトークンであることから「メトリック」の列を見ると「Processed Inference Tokens」であることがわかります。<br>また、その集計方法については、「集計」の列を見ると「SUM」(合計)であることがわかります。<br>そのため、「メトリック」に 「Processed Inference Tokens」、「集計」に 「合計」をプルダウンから選択することでトークンの使用量を確認することが可能です。　</p><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Metric-TPM/metricscreenshot.png" width=1200px>  <p>上記の画像の通り、メトリックに「Processed Inference Tokens」、集計に「合計」を入力した結果、以下のようにトークンの使用量を確認することができました。</p><p>また、画面右上(赤枠部)より時刻表示の調整が可能になります。<br>デフォルトでの表示以外のスケール(過去7日間や過去30日間など)で時刻の表示をすることができます。</p><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Metric-TPM/step3.png" width=1200px>  <p>ここで、次の画像のように、時間の粒度を「1 分」と選択することで、1 分あたりの入出力トークンの合計を算出することが出来ます。<br>先ほどの「集計」で「合計」を選択したため、1 分あたりのトークン数の合計値が、グラフに描画されています。</p><img src="https://jpaiblog.github.io/images/AzureOpenAIService-Metric-TPM/step4.png" width=600px><p>以上の手順で、メトリック　エクスプローラーで 1 分あたりの入出力トークン数をグラフに描画することができました。</p><h1 id="関連ドキュメント"><a href="#関連ドキュメント" class="headerlink" title="関連ドキュメント"></a>関連ドキュメント</h1><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/overview">Azure OpenAI Service とは - Azure AI services | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/quota?tabs=rest">Azure OpenAI Service のクォータを管理する - Azure AI services | Microsoft Learn</a><br>-<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/quotas-limits">Azure OpenAI Service のクォータと制限 - Azure AI services | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/azure-monitor/essentials/tutorial-metrics">Azure リソースのメトリックを分析する - Azure Monitor | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/monitoring#azure-openai-metrics">Azure OpenAI Service の監視 - Azure AI services | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/azure-monitor/essentials/metrics-aggregation-explained">Azure Monitor メトリックによる集計と表示の説明 - Azure Monitor | Microsoft Learn</a></li></ul><hr><p><code>変更履歴</code><br><code>2024/07/25 created by naokatayama</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI Service の使用中に発生する可能性がある一般的なエラー コードについて</title>
      <link href="/blog/2023/12/29/AzureOpenAIService-error-codes/"/>
      <url>/blog/2023/12/29/AzureOpenAIService-error-codes/</url>
      
        <content type="html"><![CDATA[<p>この記事では、Azure OpenAI Service の使用中に発生する可能性がある一般的なエラー コードの内容や原因、解決策についてご紹介します。 </p><span id="more"></span><br><hr><h2 id="HTTP-400-エラー-x2F-Bad-Request"><a href="#HTTP-400-エラー-x2F-Bad-Request" class="headerlink" title="HTTP 400 エラー &#x2F; Bad Request"></a>HTTP 400 エラー &#x2F; Bad Request</h2><p>このエラーは、クライアント側から送信したリクエストに問題があることを示します。<br>原因として、プロンプトの誤入力、プロンプトがコンテンツフィルターによりブロックされている可能性が挙げられます。</p><p><strong>対処方法：</strong> </p><ul><li>クライアント側から送信したプロンプトを見直してください (Jsonペイロードの形式や、パラメーターのミススペルなど)</li><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/concepts/content-filter?tabs=warning,python">コンテンツのフィルター処理</a> の設定を確認し、必要に応じてレベルを調整してください。  <br></li></ul><hr><h2 id="HTTP-401-エラー-x2F-Unauthorized"><a href="#HTTP-401-エラー-x2F-Unauthorized" class="headerlink" title="HTTP 401 エラー &#x2F; Unauthorized"></a>HTTP 401 エラー &#x2F; Unauthorized</h2><p>このエラーは、認証に問題が発生していることを示します。<br>原因として、Azure OpenAI Service へのリクエストに必要な API キーなどの認証情報に誤りがある可能性が挙げられます。  </p><p>例：リクエスト時にキーが含まれていない、キーに余分なスペースや欠落文字がある、アクセス トークンの有効期限が切れている、必要なロールが割り当てられていない  </p><p><strong>対処方法：</strong><br>API キー 認証をご使用の場合は、リクエスト時に必要なENDPOINT, API-KEY, DEPLOYMENT-NAME が正しいかどうかをご確認ください。<br>確認方法は、以下の公開情報をご参照ください。  </p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/quickstart?tabs=command-line,python&pivots=rest-api#retrieve-key-and-endpoint">キーとエンドポイントを取得する | クイック スタート: Azure OpenAI Service を使用してテキストの生成を開始する</a></li></ul><p>Microsoft Entra ID 認証をご使用の場合は、リクエストを行うユーザーに対して、必要なロールが割り当たっているかどうかをご確認ください。<br>詳細は、以下の公開情報をご参照ください。 </p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/managed-identity">Cognitive Services User ロールに自分自身を割り当てる | マネージド ID を使用して Azure OpenAI Service を構成する方法</a>  <br></li></ul><hr><h2 id="HTTP-403-エラー-x2F-Forbidden"><a href="#HTTP-403-エラー-x2F-Forbidden" class="headerlink" title="HTTP 403 エラー &#x2F; Forbidden"></a>HTTP 403 エラー &#x2F; Forbidden</h2><p>このエラーは、ネットワーク制限により生じている可能性があります。</p><p><strong>対処方法：</strong></p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/cognitive-services-virtual-networks?context=/azure/ai-services/openai/context/context&tabs=portal#manage-default-network-access-rules">Azure OpenAI Service リソースに設定したネットワーク設定</a> を確認します。  <br></li></ul><hr><h2 id="HTTP-404-エラー-x2F-Not-Found"><a href="#HTTP-404-エラー-x2F-Not-Found" class="headerlink" title="HTTP 404 エラー &#x2F; Not Found"></a>HTTP 404 エラー &#x2F; Not Found</h2><p>このエラーは、クライアント側の要求で指定されたリソースが、サーバー側で見つけられなかったことを示します。 <br /><br>原因として、API エンドポイントが正しくないといったことが挙げられます。 </p><p><strong>対処方法：</strong></p><ul><li><p><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/reference">API リファレンス</a> や SDK リファレンスを参照し、API エンドポイントの指定が正しいことを確認します</p></li><li><p>エンドポイント指定時の必須パラメーターを確認します。 (リソース名、デプロイメントID、API バージョン (後述))</p></li><li><p>API バージョン　(モデルバージョンとは異なります）が正しいかどうかをご確認ください。 (API エンドポイントは、指定された要求が正しく最新であることを確認するために、バージョン管理に api-version クエリ パラメーターを使用しており、サービス API のすべてのバージョンは、YYYY-MM-DD の日付構造になっています。)  </p><blockquote><p>例）https:&#x2F;&#x2F; (中略) &#x2F;openai&#x2F;deployments&#x2F;my-first-deployment&#x2F;completions?api-version&#x3D;<strong>2022-12-01</strong></p></blockquote></li></ul><br><hr><h2 id="HTTP-408-エラー-x2F-Request-Timeout"><a href="#HTTP-408-エラー-x2F-Request-Timeout" class="headerlink" title="HTTP 408 エラー &#x2F; Request Timeout"></a>HTTP 408 エラー &#x2F; Request Timeout</h2><p>このエラーは、サーバー側の応答がない、ネットワーク接続が不安定などでリクエストがタイムアウトしたことを示します。<br /><br>原因として、クライアント側のインターネット接続の速度が遅い、大きな要求の送信に時間がかかりすぎている、サーバー側に要求の処理に遅延を引き起こす何らかの問題がある、などが挙げられます。 </p><p><strong>対処方法：</strong> </p><ul><li>ご利用のインターネット環境において、リクエストを送信するのに十分な安定性と速度があることをご確認ください。そのうえで、再度リクエストを送信しエラーが解消するかどうかをご確認ください。</li><li>大きなクエリが送信されている場合は、要求を複数の小さなクエリに分割することをご検討ください。これにより、Azure OpenAI は情報をより効率的に処理することができ、タイムアウトの可能性が低減します。</li><li>Chat Completions API を使用している場合は、API リクエストを行う際に stream&#x3D;true を設定することを検討してください。これにより、サーバー側は、部分的な結果が利用可能になったときに送信できるため、タイムアウトの可能性が低減します。  <br></li></ul><hr><h2 id="HTTP-429-エラー-x2F-Too-Many-Requests"><a href="#HTTP-429-エラー-x2F-Too-Many-Requests" class="headerlink" title="HTTP 429 エラー &#x2F; Too Many Requests"></a>HTTP 429 エラー &#x2F; Too Many Requests</h2><p>このエラーは、定義されたレート制限を超過していることや、バックエンドサービスがスケーリング中であることを示します。<br/><br>原因として、モデルデプロイに割り当てられているクォーターの TPM (Tokens-per-Minute) が少ない場合や、Azure OpenAI サービスが需要に合わせてスケールアップしているときにスローされ、必要なスケールに達しなかった一時的なエラーの可能性が挙げられます。</p><p><strong>対処方法：</strong> </p><ul><li>モデルデプロイに対して割り当てている TPM のレート制限の変更を検討します。<br /><br><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/quota?tabs=rest#assign-quota">Azure OpenAI Service のクォータを管理する - Azure AI services | Microsoft Learn</a><blockquote><p>デプロイ後は、Azure AI Studio の [管理&gt;デプロイ] で [デプロイの編集] を選択して、TPM の割り当てを調整できます。 この選択は、新しいクォータ管理エクスペリエンスの [管理&gt;クォータ] で変更することもできます。 </p></blockquote></li><li>429エラーがスローされたときに提示される時間を空けて再度実行していただくことが必要となります。<br /><br><a href="https://learn.microsoft.com/ja-jp/azure/architecture/best-practices/retry-service-specific">Azure サービスの再試行ガイダンス - Best practices for cloud applications | Microsoft Learn</a><blockquote><p>429 エラーの場合は、Retry-After ヘッダーに示されている時間が経過した後でのみ再試行してください。</p></blockquote></li></ul><p><strong>参考情報：</strong> </p><ul><li><p><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/quota?tabs=rest#introduction-to-quota">Azure OpenAI Service のクォータを管理する - Azure AI services | Microsoft Learn</a></p><blockquote><p>デプロイが作成されると、割り当てられた TPM は、推論要求で適用される TPM (Tokens-per-Minute) のレート制限に直接マップされます。 1 分あたりの要求 (RPM) レート制限も適用され、その値は次の比率を使用して TPM 割り当てに比例して設定されます。<br><br> 1000 TPM あたり 6 RPM。<br>(<em>中略</em>)<br><br>RPM レート制限は、時間の経過と同時に受信した要求の数に基づいています。 <br>レート制限では、1 分間に要求が均等に分散されることを想定しています。 <br>この平均フローが維持されない場合、1 分間測定しても制限が満たされない場合でも、要求は 429 応答を受け取る可能性があります。<br>この動作を実装するために、Azure OpenAI Service は、短い時間 (通常は 1 秒または 10 秒) にわたる受信要求の速度を評価します。<br>その間に受信した要求の数が設定された RPM 制限で予想される数を超えた場合、新しい要求は次の評価期間まで 429 応答コードを受け取ります。<br>たとえば、Azure OpenAI が 1 秒間隔で要求レートを監視している場合、1 秒ごとに 10 件を超える要求を受信すると、600 RPM デプロイでレート制限が発生します (1 分あたり 600 件の要求 &#x3D; 1 秒あたり 10 件の要求)。</p></blockquote></li><li><p><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/quota?tabs=rest#rate-limit-best-practices">レート制限のベスト プラクティス</a>  </p><br></li></ul><h2 id="HTTP-500-x2F-503-エラー-x2F-Service-Unavailable"><a href="#HTTP-500-x2F-503-エラー-x2F-Service-Unavailable" class="headerlink" title="HTTP 500 &#x2F; 503 エラー &#x2F; Service Unavailable"></a>HTTP 500 &#x2F; 503 エラー &#x2F; Service Unavailable</h2><p>このエラーは、サーバー側で問題が発生したことを表しており、以下のようなメッセージと共に応答されることがあります。<br /></p><blockquote><p>“Service Unavailable”</p></blockquote><blockquote><p>“The server had an error while processing your request.”</p></blockquote><p>多くの場合、これは<a href="https://learn.microsoft.com/ja-jp/azure/architecture/best-practices/transient-faults">一時的な (一過性の) 事象</a>です。Azure OpenAI Service では、多くのユーザーが同じ処理基盤を共有しており、一時的なリソースのひっ迫や処理の失敗により、これらのエラーが応答されることがあります。<br /><br><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/deployment-types">デプロイの種類</a>によらず、<a href="https://www.microsoft.com/licensing/docs/view/Service-Level-Agreements-SLA-for-Online-Services?lang=1">サービスの可用性</a>は 100% ではないため、この種のエラーの発生頻度をゼロにすることはできません。</p><p><strong>対処方法：</strong> </p><ul><li>時間を空けて API 呼び出し (HTTP リクエスト) をリトライ (再試行) します。再試行が短時間に集中しないよう、<a href="https://learn.microsoft.com/ja-jp/azure/architecture/best-practices/transient-faults#determine-an-appropriate-retry-count-and-interval">試行間隔の無作為化や指数バックオフ</a>を組み込むことが推奨されます。</li><li>再試行を繰り返しても失敗する状況が長時間継続している場合は、既知の問題の有無を<a href="https://learn.microsoft.com/ja-jp/azure/service-health/overview">サービス正常性</a>で確認します。<br></li></ul><hr><p><code>変更履歴</code><br><code>2025-04-30 updated by Nakagami</code><br><code>2023-12-29 created by Uehara</code>   </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>openai-python ライブラリについて</title>
      <link href="/blog/2023/10/19/AzureOpenAIService-OpenaiPythonLibrary/"/>
      <url>/blog/2023/10/19/AzureOpenAIService-OpenaiPythonLibrary/</url>
      
        <content type="html"><![CDATA[<p>この記事は、 Azure OpenAI の公式ドキュメント上に記載がある openai-python ライブラリについてご紹介します。</p><span id="more"></span><br><hr><h2 id="openai-python-ライブラリについて"><a href="#openai-python-ライブラリについて" class="headerlink" title="openai-python ライブラリについて"></a>openai-python ライブラリについて</h2><p>本ライブラリは OpenAI の API を Python で利用するための公式ライブラリで、機械学習モデルの訓練や予測など、 OpenAI の各種サービスに利用することができます。<br>openai-python ライブラリは、 OpenAI 社によって管理されています。<br>その為、本ライブラリに関して弊社( Microsoft )の技術サポート サービスより正式なご案内をすることはできません。  </p><p>最新の情報を確認するには、 GitHub 上の<a href="https://github.com/openai/openai-python/releases">リリース履歴</a>や<a href="https://github.com/openai/openai-python/discussions/categories/announcements">アナウンス</a>をご覧ください。</p><h2 id="openai-python-ライブラリのお問い合わせ先について"><a href="#openai-python-ライブラリのお問い合わせ先について" class="headerlink" title="openai-python ライブラリのお問い合わせ先について"></a>openai-python ライブラリのお問い合わせ先について</h2><p>openai-python に関する正式な見解が必要な場合、大変お手数ですが  <a href="https://github.com/openai/openai-python">openai-python コミュニティ</a>へ直接お問い合わせをお願いします。 GitHub の <a href="https://github.com/openai/openai-python/issues">issue</a> や pull request を通じて、開発者コミュニティと直接コミュニケーションを取ることが可能です。</p><h2 id="Azure-OpenAI-Service-に対する-openai-python-ライブラリを使用する際の注意点"><a href="#Azure-OpenAI-Service-に対する-openai-python-ライブラリを使用する際の注意点" class="headerlink" title="Azure OpenAI Service に対する openai-python ライブラリを使用する際の注意点"></a>Azure OpenAI Service に対する openai-python ライブラリを使用する際の注意点</h2><p>Azure OpenAI Service の機能変更に伴い、過去バージョンのライブラリの互換性が失われる可能性があります。 上記にて記載していますとおり、弊社では openai-python ライブラリと Azure OpenAI Service の互換性を保証していないため、ライブラリへの依存性のリスクを回避したい場合は、Azure OpenAI Service の <a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/reference">REST API レファレンス</a>に準拠した HTTP リクエスト クライアントの実装をご検討ください。</p><h2 id="特定のバージョンを指定してopenai-python-ライブラリをインストールする方法"><a href="#特定のバージョンを指定してopenai-python-ライブラリをインストールする方法" class="headerlink" title="特定のバージョンを指定してopenai-python ライブラリをインストールする方法"></a>特定のバージョンを指定してopenai-python ライブラリをインストールする方法</h2><p>もし特定のバージョンを利用する必要が生じた場合には、以下のコマンドを実施することで特定のバージョンを指定してライブラリを使用することが可能です。<br>例) v0.28.1 のバージョンを指定してインストールするコマンドは以下の通りです：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install openai==0.28.1</span><br></pre></td></tr></table></figure><p>(参考: <a href="https://docs.python.org/ja/3/installing/index.html#basic-usage">https://docs.python.org/ja/3/installing/index.html#basic-usage</a> )</p><h2 id="Azure-公式ドキュメントに記載のある-openai-python-ライブラリの取り扱いについて"><a href="#Azure-公式ドキュメントに記載のある-openai-python-ライブラリの取り扱いについて" class="headerlink" title="Azure 公式ドキュメントに記載のある openai-python ライブラリの取り扱いについて"></a>Azure 公式ドキュメントに記載のある openai-python ライブラリの取り扱いについて</h2><p>Azure 公式ドキュメント内や Azure OpenAI Studio 内で、 openai-python ライブラリを使用したサンプルコードを提供しています。これらのコードは、 Azure OpenAI Service を Python のコードでよりシンプルに記載するための参考資料となっております。<br>これらのサンプルコードは上記にてご案内させていただいております通り、弊社技術サポート対象としてご提供させていただいているわけではないこと、また、これらのコードはあくまで参考であり、それらがすべてのユースケースや状況で正確に動作することを保証するものではないことを前提に利用いただくようお願いします。</p><hr><p><code>変更履歴</code><br><code>2023-10-19 created by Kudou</code>   </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI Service に対するアクセス制御について</title>
      <link href="/blog/2023/07/28/AzureOpenAIService-NetworkLimit/"/>
      <url>/blog/2023/07/28/AzureOpenAIService-NetworkLimit/</url>
      
        <content type="html"><![CDATA[<p>この記事は、Azure OpenAI Service に対するアクセス制御についてご紹介します。</p><span id="more"></span><br><hr><h2 id="Azure-OpenAI-Service-にて仮想ネットワークを構成する"><a href="#Azure-OpenAI-Service-にて仮想ネットワークを構成する" class="headerlink" title="Azure OpenAI Service にて仮想ネットワークを構成する"></a>Azure OpenAI Service にて仮想ネットワークを構成する</h2><p>Azure OpenAI Service は、他の Cognitive Services と同様、アクセス元を「特定の IP アドレス範囲」または「仮想ネットワーク」に限定することが可能です。<br>詳細につきましては、以下のドキュメントをご参照ください。</p><ul><li><p><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/cognitive-services-virtual-networks?tabs=portal">Configure Virtual Networks for Azure Cognitive Services</a></p><blockquote><p>Azure Cognitive Services は、多層型のセキュリティ モデルを採用しています。<br>このモデルでは、ネットワークの特定のサブセットに、Cognitive Services アカウントを固定することができます。<br>ネットワーク ルールを構成すると、指定したネットワークのセットを経由してデータを要求しているアプリケーションのみが、アカウントにアクセスできます。</p></blockquote></li></ul><p>なお、Azure OpenAI Service のエンドポイントのホスト名は以下となります。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;リソース名&gt;.openai.azure.com</span><br></pre></td></tr></table></figure><p>すべての Azure OpenAI Service リソースのエンドポイントは、リソース名以外が共通のため、リソース名が Azure 全体( Global )で一意である必要があります。</p><h2 id="Azure-OpenAI-Studio-をプライベート-エンドポイント接続にて使用するには"><a href="#Azure-OpenAI-Studio-をプライベート-エンドポイント接続にて使用するには" class="headerlink" title="Azure OpenAI Studio をプライベート エンドポイント接続にて使用するには"></a>Azure OpenAI Studio をプライベート エンドポイント接続にて使用するには</h2><!-- TrackingID#2305100060000313 --><p>Azure OpenAI Service は、前述のアクセス元の制限に加え、プライベート エンドポイント利用をサポートしています。<br>プライベート エンドポイントを利用する場合、 Azure OpenAI Service の エンドポイント (*.openai.azure.com )　へのアクセスを仮想ネットワーク内のクライアントに限定することが可能です。<br>ただし、留意点として、Azure OpenAI Studio(<a href="https://oai.azure.com/">https://oai.azure.com/</a>)  へのアクセスでは、プライベートではない一定範囲のパブリック IP アドレスでネットワーク アクセスが必要となります。  </p><p>具体的には、Azure OpenAI Studioへアクセスするクライアントマシンのデプロイ先サブネットに紐づく NSG 及び Firewall にて、以下のドキュメントに記載されているサービスタグを許可する必要があります。  </p><ul><li><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/cognitive-services-virtual-networks?tabs=portal">Configure Virtual Networks for Azure Cognitive Services</a><blockquote><p>Azure OpenAI、LUIS、Speech Services、または言語サービスを使用している場合、CognitiveServicesManagement タグを指定しても、SDK または REST API を使用してサービスを使用できるようになるだけです。<br>仮想ネットワークから Azure OpenAI Studio、LUIS ポータル、Speech Studio または言語サービスにアクセスして使用するには、次のタグを使用する必要があります。<br>･ AzureActiveDirectory<br>･ AzureFrontDoor.Frontend<br>･ AzureResourceManager<br>･ CognitiveServicesManagement<br>･ CognitiveServicesFrontEnd</p></blockquote></li></ul><!-- - [Azure OpenAI Service を Private Endpoint 経由で利用する](https://blog.aimless.jp/archives/2023/04/use-azure-openai-service-with-privateendpoint/)  ※弊社社員が有志で執筆した記事となります。 --><p>Azure OpenAI Studio は、Azure OpenAI Service の機能 (HTTP REST API) を簡便に試すための、簡易な (サンプル) アプリケーションという扱いになります。<br>Azure OpenAI Studio の Web サイトそのものは、特定のユーザーやリソースに紐づかない、パブリックな Web サイトとして公開されています。<br>そのため、Azure OpenAI Studio の Web サイトの表示に必要なリソース (画像や JavaScript 等) のダウンロードはプライベート エンドポイント経由とはなりません。</p><h2 id="特定の国からのアクセス制御について"><a href="#特定の国からのアクセス制御について" class="headerlink" title="特定の国からのアクセス制御について"></a>特定の国からのアクセス制御について</h2><!-- TrackingID#2305240060001683 --><p>Azure OpenAI Service は、特定の国からのアクセスを制限するような、内部的なアクセス制御を行っておりません。<br>エンドポイントは、パブリックなインターネット経由 (すなわちインターネット上で到達可能なグローバル IP アドレスから) のアクセスを全て許可します。<br>一方で、実際のアクセス可否は、特定の国のネットワーク制限 (例. Great Firewall of China) や法規制に左右されます。特定の地域やネットワーク環境下におけるアクセス可否は、お客様側で現地にてご確認いただく必要があります。<br>ご参考 :  <a href="https://learn.microsoft.com/en-us/azure/virtual-wan/interconnect-china">Azure Virtual WAN とセキュリティ保護付きハブを使用した中国との相互接続</a></p><hr><p><code>変更履歴</code><br><code>2023/07/28 created by Kudou</code>   </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI Service のトークン数の上限について</title>
      <link href="/blog/2023/07/19/AzureOpenAIService-TokenLimit/"/>
      <url>/blog/2023/07/19/AzureOpenAIService-TokenLimit/</url>
      
        <content type="html"><![CDATA[<p>この記事は、Azure OpenAI Service のトークン数の上限についてご紹介します。</p><span id="more"></span><br><!-- TrackingID#2305290060000459 --><!-- TrackingID#2306270060001789 --><hr><h2 id="トークン数の上限値-最大要求-とは"><a href="#トークン数の上限値-最大要求-とは" class="headerlink" title="トークン数の上限値(最大要求)とは"></a>トークン数の上限値(最大要求)とは</h2><p>Azure OpenAI Service では、モデル毎にトークン数の上限値(最大要求)が設定されています。</p><p>モデル毎のトークン数の上限値(最大要求)は、下記ドキュメントに記載されています。</p><ul><li><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/concepts/models#model-summary-table-and-region-availability">Model Summary table and region availability : Max Request (tokens)</a></li></ul><h2 id="トークン数の上限値-最大要求-を超えた場合の挙動"><a href="#トークン数の上限値-最大要求-を超えた場合の挙動" class="headerlink" title="トークン数の上限値(最大要求)を超えた場合の挙動"></a>トークン数の上限値(最大要求)を超えた場合の挙動</h2><p>現在の Azure OpenAI Service の動作では、トークン数の上限値(最大要求)を超えるトークンが消費された要求も、エラーが発生せず処理される場合があります。<br>しかし、この挙動は、あくまで現状の内部動作の関係で生じます。<br>将来的に予告無く変更される可能性があるため、ドキュメントに記載されているトークン数の上限値(最大要求)を超えないよう、利用することを強くお勧めします。</p><p>この留意事項は、下記ドキュメント抜粋部分でも明記しております。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/how-to/chatgpt?pivots=programming-language-chat-completions#managing-conversations">GPT-35-Turbo および GPT-4 モデルの操作方法 : 会話の管理</a><blockquote><p>注意<br>すべてのモデルに関する文書化された入力トークンの制限を超えることができる場合でも、その制限内に留まることを強くお勧めします。</p></blockquote></li></ul><h2 id="トークン数の上限値-最大要求-を超えないようにする方法"><a href="#トークン数の上限値-最大要求-を超えないようにする方法" class="headerlink" title="トークン数の上限値(最大要求)を超えないようにする方法"></a>トークン数の上限値(最大要求)を超えないようにする方法</h2><p>Azure OpenAI Service が使用するモデルを開発している OpenAI 社では、指定された文章からモデルが判定するトークン数を計算するライブラリ ( tiktoken ) を提供しています。</p><p>下記ドキュメントでは、サンプル コードを交えた、ライブラリの使用例を紹介しております。<br>この使用例では、過去の会話が続くことでトークンの合計数が上限 (例では 4096 トークン) を超える場合に、古い会話を削除しつつ、上限のトークン数以下の会話を実現します。<br>モデル利用時にトークンを管理する一例として、ご参考になれば幸いです。  </p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/how-to/chatgpt?pivots=programming-language-chat-completions#managing-convesations">ChatGPT および GPT-4 モデルの操作方法の説明 : 会話の管理</a><blockquote><p>次のコード サンプルは、OpenAI の tiktoken ライブラリを使用して 4096 トークン数を処理する手法を使用した単純なチャット ループの例を示しています。</p></blockquote></li></ul><p>なお、tiktoken 自体はマイクロソフトのサービスの一部ではないため、Azure の技術サポートの範囲外です。予めご了承ください。  </p><ul><li><a href="https://github.com/openai/tiktoken">openai&#x2F;tiktoken (GitHub)</a></li></ul><hr><p><code>変更履歴</code><br><code>2023/07/19 created by Kudou</code>   </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI Service の Fine-tuning について</title>
      <link href="/blog/2023/07/18/AzureOpenAIService-Fine-tuning/"/>
      <url>/blog/2023/07/18/AzureOpenAIService-Fine-tuning/</url>
      
        <content type="html"><![CDATA[<p>この記事は、Azure OpenAI Service で実施可能である Fine-tuning の 2023 年 7 月 14 日現在の状況についてご紹介します。</p><span id="more"></span><br><!-- TrackingID#2306300060001437 --><!-- TrackingID#2306290060002036 --><hr><h2 id="Fine-tuning-微調整-とは"><a href="#Fine-tuning-微調整-とは" class="headerlink" title="Fine-tuning (微調整)とは"></a>Fine-tuning (微調整)とは</h2><p>Azure OpenAI Service では、Fine-tuning (微調整)という機能が提供されています。</p><p><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/how-to/fine-tuning?pivots=programming-language-studio">Azure OpenAI Service を使用してモデルをカスタマイズする方法</a>  </p><blockquote><p>“微調整” と呼ばれるプロセスを使用して、個人用データセットに合わせてモデルを調整できます。  </p></blockquote><h2 id="Fine-tuning-微調整-の現状"><a href="#Fine-tuning-微調整-の現状" class="headerlink" title="Fine-tuning (微調整)の現状"></a>Fine-tuning (微調整)の現状</h2><p>2023 年 7 月 14 日現在、 下記ドキュメントにも記載の通り、微調整 (Fine-tuning) されたモデルを実行可能なリージョンは現状ありません (いずれのリージョンも N&#x2F;A となっています)。</p><ul><li><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/concepts/models#model-summary-table-and-region-availability">Model Summary table and region availability : Fine-Tuning Regions</a></li></ul><p>※日本語版のドキュメントは翻訳の遅れにより情報が古い場合がありますので、最新の情報は英語版のドキュメントを参照ください。  </p><p>なお、今後 予定されている機能として、「 GPT-3.5 Turbo 」および「 GPT-4 」モデルの Fine-tuning 機能があります。以下製品開発部門のブログ内で、今年 2023 年後半に向けた段階的なリリースを予定している旨を案内しています。</p><ul><li><a href="https://techcommunity.microsoft.com/t5/ai-cognitive-services-blog/announcing-updates-to-azure-openai-service-models/ba-p/3866757">Announcing Updates to Azure OpenAI Service Models - Microsoft Community Hub</a><blockquote><p>Introducing new models<br>・Offer a preview of fine-tuning for GPT-3.5-Turbo and GPT-4.<br>We are working on safely enabling fine-tuning for GPT-3.5 Turbo and GPT-4 and expect this feature to be available later this year.<br>This service will initially be available on a limited basis, prioritizing customers who have previously fine-tuned the Davinci series.<br>Fine-tuning of GPT-3.5-Turbo will replace Text and Code-Davinci-002 fine-tunable models.</p></blockquote></li></ul><h2 id="Fine-tuning-微調整-の一般的な位置付け"><a href="#Fine-tuning-微調整-の一般的な位置付け" class="headerlink" title="Fine-tuning (微調整)の一般的な位置付け"></a>Fine-tuning (微調整)の一般的な位置付け</h2><p>補足事項といたしまして、ここで一般的な Fine-tuning の位置付けについて説明します。<br>一般的に、微調整 (Fine-tuning) は最後の手段 (last resort) と位置付けられます。<br>Fine-tuning の検討の前に、プロンプトを工夫 (プロンプト エンジニアリングを実施) することが推奨されています。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/concepts/prompt-engineering">プロンプト エンジニアリングの概要</a>    </li><li><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/concepts/advanced-prompt-engineering?pivots=programming-language-chat-completions">プロンプト エンジニアリングの手法</a></li></ul><p>特に現在は、Fine-tuning が可能な古いモデル (ada, curie 等) よりも高性能とされる gpt-35-turbo (ChatGPT) や GPT-4 などのモデルがリリースされています。<br>これらの新しいモデルでプロンプト エンジニアリングを組み合わせることで、古いモデルで Fine-tuning を行うよりも、高いパフォーマンスが得られることが多くあります。  </p><p>上記の点は以下のセミナー動画でも説明されておりますので、こちらもご覧いただけますと幸いです。   </p><ul><li><a href="https://youtu.be/tFgqdHKsOME">Azure OpenAI Developers セミナー</a><br>※プロンプト エンジニアリングや Fine-tuning については動画の 22:25 頃から確認できます。</li></ul><h2 id="Fine-tuning-微調整-の代替手段"><a href="#Fine-tuning-微調整-の代替手段" class="headerlink" title="Fine-tuning (微調整)の代替手段"></a>Fine-tuning (微調整)の代替手段</h2><p>Fine-tuning の目的が「内部情報の活用」である場合、Azure OpenAI 以外のサービスと組み合わせた手法があります。</p><p>具体的には、「独自データ」を格納した Azure Cognitive Search と組み合わせることにより、Fine-tuning を使用せずに、基本モデルを使用して内部情報に基づいた回答文を生成できます。<br>さらに、回答を提示する際に、Bing AI チャットのように、回答のソースとなるドキュメントへのポインターを表示することも可能です。  </p><ul><li><p>Azure OpenAI Service×Cognitive Searchでの独自データを利用したボット</p><ul><li>日本語の解説記事:<br><a href="https://qiita.com/nohanaga/items/803c09b5a3a4e2d1776f">Azure で ChatGPT × Cognitive Search を使ったエンタープライズサーチを実現</a><br>※弊社社員が有志で執筆した記事となります。</li></ul><p>上記の元になる製品開発部門のブログ: </p><ul><li><p>Revolutionize your Enterprise Data with ChatGPT:<br><a href="https://techcommunity.microsoft.com/t5/ai-applied-ai-blog/revolutionize-your-enterprise-data-with-chatgpt-next-gen-apps-w/ba-p/3762087">Next-gen Apps w&#x2F; Azure OpenAI and Cognitive Search</a></p></li><li><p>サンプルコード:<br><a href="https://github.com/Azure-Samples/azure-search-openai-demo/">ChatGPT + Enterprise data with Azure OpenAI and Cognitive Search</a></p></li></ul></li></ul><p>上記を比較的簡単にお試しいただける方法として以下のプレビュー機能もリリースされています。</p><ul><li><p>プレビュー段階の機能:<br><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/use-your-data-quickstart?tabs=command-line&pivots=programming-language-studio">クイック スタート: 独自のデータを使用して Azure OpenAI モデルとチャットする</a></p><p>※プレビュー段階での機能であるため、「現状有姿のまま」、「瑕疵を問わない条件」で、かつ「提供可能な場合に限り提供しうる形」で提供されておりますこと事前にご理解のほどお願いいたします。<br>(プレビュー機能に関する使用条件: <a href="https://www.microsoft.com/licensing/terms/en-US/product/ForOnlineServices/MOSA">Online Services Terms</a> の「Preview」事項を参照)</p></li></ul><p><code>変更履歴</code><br><code>2023/07/18 created by Kudou</code>   </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI 関連の申請について</title>
      <link href="/blog/2023/04/21/RequestAccess-to-AzureOpenAIService/"/>
      <url>/blog/2023/04/21/RequestAccess-to-AzureOpenAIService/</url>
      
        <content type="html"><![CDATA[<p><strong>※以下は2024年1月時点の情報です。最新の状況については <a href="https://jpaiblog.github.io/blog/2025/04/10/AzureOpenAIService-FAQ/">Azure OpenAI Service のよくあるご質問と回答(FAQ)に関するブログ記事</a>も併せてご参照ください。</strong></p><p>Azure OpenAI 関連の申請について、以下にご説明します。</p><span id="more"></span><br><hr><h2 id="Azure-OpenAI-Service-の利用開始時に行う申請"><a href="#Azure-OpenAI-Service-の利用開始時に行う申請" class="headerlink" title="Azure OpenAI Service の利用開始時に行う申請"></a>Azure OpenAI Service の利用開始時に行う申請</h2><p>Azure OpenAI Service は申請フォーム 「<a href="https://aka.ms/oai/access">Request Access to Azure OpenAI Service</a>」 より必要事項を入力して送信、承認されたサブスクリプションにて利用が可能になります。<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access">[1]</a>  </p><p>申請状況に関する確認はメールアドレス <a href="mailto:&#x63;&#115;&#103;&#97;&#116;&#101;&#64;&#109;&#105;&#99;&#114;&#x6f;&#115;&#x6f;&#102;&#x74;&#46;&#x63;&#111;&#x6d;">&#x63;&#115;&#103;&#97;&#116;&#101;&#64;&#109;&#105;&#99;&#114;&#x6f;&#115;&#x6f;&#102;&#x74;&#46;&#x63;&#111;&#x6d;</a> にて受け付けています。 この宛先は Azure OpenAI Service の利用申請を管理・レビューしている米国本社内の専用部門となり、公平性と独立性のために、技術サポート部門を含めた各国の他の部門はレビュープロセスに直接介入できません。 そのため、当該メールでのご質問は <strong>英語のみ</strong> となる点にご留意ください。  </p><br><hr><h2 id="用途に応じて行う申請"><a href="#用途に応じて行う申請" class="headerlink" title="用途に応じて行う申請"></a>用途に応じて行う申請</h2><h3 id="追加のユース-ケース"><a href="#追加のユース-ケース" class="headerlink" title="追加のユース ケース"></a>追加のユース ケース</h3><p>利用開始申請時に選択したユース ケースとは別に、追加でユース ケースを申請する場合、申請フォーム 「<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR7en2Ais5pxKtso_Pz4b1_xUM003VEJPRjRSOTZBRVZBV1E5N1lWMk1XUyQlQCN0PWcu">Azure OpenAI Additional Use Case Form</a>」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access">[1]</a></p><h3 id="オプトアウト"><a href="#オプトアウト" class="headerlink" title="オプトアウト"></a>オプトアウト</h3><p>弊社が定める責任ある AI の原則に従って、倫理的・社会的に問題があると考えられる利用 (abuse) を防止するために、人間によるレビューが行われる場合があります。これは要件を満たす場合にはオプトアウトすることが可能です。以下の申請フォームより必要事項を入力して送信ください。 <a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access">[1]</a>  </p><ul><li><p>コンテンツフィルターの変更：<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR7en2Ais5pxKtso_Pz4b1_xUMlBQNkZMR0lFRldORTdVQzQ0TEI5Q1ExOSQlQCN0PWcu">Azure OpenAI Limited Access Review:  Modified Content Filtering</a> </p></li><li><p>不正使用監視の変更：<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR7en2Ais5pxKtso_Pz4b1_xUOE9MUTFMUlpBNk5IQlZWWkcyUEpWWEhGOCQlQCN0PWcu">Azure OpenAI Limited Access Review:<br>Modified Abuse Monitoring</a></p></li><li><p>オプトアウト申請に関する FAQ   </p><blockquote><p>Q. オプトアウトを申請して承認されましたが、きちんと反映されているか確認したいです。確認方法はありますか？<br>A. はい、確認方法があります。<br>Abuse Monitoring は “ContentLogging” の項目が”false”となっているかを参照することで確認可能です。<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/data-privacy#how-can-a-customer-verify-if-data-storage-for-abuse-monitoring-is-off">[2]</a><br>Content Filtering については Azure OpenAI Studio [管理]-&gt;[Content Filters]よりFilteringをオフに設定可能かどうかで確認可能です。<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/content-filters#configuring-content-filters-via-azure-openai-studio-preview">[6]</a><br><img src="https://jpaiblog.github.io/images/RequestAccess-to-AzureOpenAIService/contentFiltering-01.png" alt="contentFiltering-01" title="contentFiltering-01"></p></blockquote></li></ul><h3 id="クォータの引き上げ"><a href="#クォータの引き上げ" class="headerlink" title="クォータの引き上げ"></a>クォータの引き上げ</h3><p>Azure OpenAI には、適用されるクォータによる制限があります。 この引き上げを希望する場合、Azure OpenAI Studio の [管理 &gt; クォータ &gt; クォータの要求] の申請フォーム 「<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR4xPXO648sJKt4GoXAed-0pUMFE1Rk9CU084RjA0TUlVSUlMWEQzVkJDNCQlQCN0PWcu">Azure OpenAI Service: Request for Quota Increase</a>」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/quota?tabs=rest#view-and-request-quota">[3]</a>  </p><ul><li><p>2023&#x2F;05&#x2F;23現在の状況    </p><blockquote><p>Azure OpenAI Service は世界中から非常に高い需要が続いています。<br>そのため、大変恐れ入りますがリソースまたはクォータの制限を引き上げる要求は、現在受付を停止しています。<br>受付が再開される時期については、今後の更新をお待ちいただけますと幸いです。 </p></blockquote></li><li><p>2023&#x2F;10&#x2F;19現在の状況    </p><blockquote><p>クォータの引き上げ要求の受付は再開されました。<br>最新の状況については <a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/quotas-limits#how-to-request-increases-to-the-default-quotas-and-limits">Azure OpenAI Service のクォータと制限</a>のドキュメントをご参照ください。<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/quotas-limits#how-to-request-increases-to-the-default-quotas-and-limits">[5]</a></p></blockquote></li></ul><h3 id="GPT-4-モデル"><a href="#GPT-4-モデル" class="headerlink" title="GPT-4 モデル"></a>GPT-4 モデル</h3><p>以前は、GPT-4モデルを利用するためには申請が必要でしたが、2023年10月19日現在、申請は不要となりました。しかし、GPT-4モデルへの高い需要のため、Azure OpenAI Serviceが利用できるすべてのリージョンでGPT-4モデルが利用可能なわけではなく、利用できるリージョンは限られています<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models">[4]</a> 。使用中のリージョンでGPT-4が表示されない場合は、時間を置いて再度確認をお願いします。</p><h3 id="Azure-OpenAI-on-your-data-のプライベート-ネットワークのサポート"><a href="#Azure-OpenAI-on-your-data-のプライベート-ネットワークのサポート" class="headerlink" title="Azure OpenAI on your data のプライベート ネットワークのサポート"></a>Azure OpenAI on your data のプライベート ネットワークのサポート</h3><p>Azure OpenAI on your dataにてプライベートネットワークの利用を可能にする場合、申請フォーム 「<a href="https://forms.office.com/pages/responsepage.aspx?id=v4j5cvGGr0GRqy180BHbRw_T3EIZ1KNCuv_1duLJBgpUMUcwV1Y5QjI3UTVTMkhSVUo3R09NNVQxSyQlQCN0PWcu">Apply Azure AI Search Private Endpoint Request for Azure OpenAI on Your Data</a>  」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/use-your-data-securely#inbound-security-networking-1">[7]</a>  </p><br><hr><h2 id="関連ドキュメント"><a href="#関連ドキュメント" class="headerlink" title="関連ドキュメント"></a>関連ドキュメント</h2><ul><li><p><a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access">[1]: Limited access to Azure OpenAI Service - Azure Cognitive Services | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/data-privacy?context=/azure/cognitive-services/openai/context/context">[2]: Data, privacy, and security for Azure OpenAI Service - Azure Cognitive Services | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/quota?tabs=rest#view-and-request-quota">[3]: Manage Azure OpenAI Service quota - Azure AI services | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#gpt-4-models">[4]: Azure OpenAI Service models - Azure OpenAI | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/quotas-limits#how-to-request-increases-to-the-default-quotas-and-limits">[5]: Azure OpenAI Service quotas and limits - Azure Cognitive Services | Microsoft Learn</a>   </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/content-filters">[6]: How to use content filters (preview) with Azure OpenAI Service - Azure OpenAI | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/use-your-data-securely#inbound-security-networking-1">[7]: Using your data with Azure OpenAI securely - Azure OpenAI | Microsoft Learn</a>  </p></li><li><p>申請関連の FAQ については、以下のドキュメントも参考になります。<br><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-limited-access#faq-about-limited-access">Cognitive Services の制限付きアクセス機能 - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><dl><dt>制限付きアクセスに関する FAQ</dt><dd>中略<br>Q.制限付きアクセスのサービスを使用する資格があるのはだれですか?<br>Q.管理下の顧客とは? 管理下の顧客に該当するかどうかがわからない場合はどうすればよいですか?<br>Q.申請が拒否された場合、私のデータはどうなりますか?</dd></dl></blockquote></li></ul><br><hr><p><code>変更履歴</code><br><code>2023/04/21 created by Kudou</code><br><code>2023/05/23 update  by Kudou</code><br><code>2023/07/04 update  by Kudou</code><br><code>2023/08/18 update  by Kudou</code><br><code>2023/10/19 update  by Kudou</code><br><code>2024/01/05 update  by Uehara</code><br><code>2025/04/15 add link  by Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure Face API 顔認識機能の制限および利用申請について</title>
      <link href="/blog/2023/03/14/Register-for-LimitedAccessfeatures-of-FaceAPI/"/>
      <url>/blog/2023/03/14/Register-for-LimitedAccessfeatures-of-FaceAPI/</url>
      
        <content type="html"><![CDATA[<p>Azure Face API 顔認識機能の制限および、利用申請について、以下にご説明します。</p><span id="more"></span><br><hr><h1 id="Face-リソース作成日と機能制限"><a href="#Face-リソース作成日と機能制限" class="headerlink" title="Face リソース作成日と機能制限"></a>Face リソース作成日と機能制限</h1><p>2022 年 6 月より前に作成された Face リソースでは、2023 年 6 月 30 日までの間、Face API が提供する全ての機能が利用することができました。<br><br>これは、Face API の機能制限に関する発表が 2022 年 6 月に行われたため、それより前に作成された Face リソースに対する約１年の移行措置でした。<br><br><br>なお、移行措置は 2023年 6月 30日 に終了しました。<br>それ以降にも、後述する「顔認識」機能を継続利用する場合は、利用申請および承認が必要です。<br></p><p><a href="https://azure.microsoft.com/en-us/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">Responsible AI investments and safeguards for facial recognition | Azure Blog and Updates | Microsoft Azure (Posted on June 21, 2022)</a></p><blockquote><p>Starting June 30, 2023, existing customers will no longer be able to access facial recognition capabilities if their facial recognition application has not been approved.</p></blockquote><p><a href="https://portal.azure.com/">Azure ポータル</a> で Face リソースページの [プロパティ] メニューを開くと、リソース作成日が確認できます。</p><p><img src="https://jpaiblog.github.io/images/Register-for-LimitedAccessfeatures-of-FaceAPI/face01.png" alt="face01" title="face01"></p><h1 id="Face-API-提供機能について"><a href="#Face-API-提供機能について" class="headerlink" title="Face API 提供機能について"></a>Face API 提供機能について</h1><p>Azure Face API の提供機能は、主に、以下の 2つの機能（顔検出、顔認識）に大別できます。</p><pre><code>1. 顔検出2. 顔認識</code></pre><p>上記のうち、「顔検出」（<B>Facial Detection</B>）機能には  「<B>廃止された機能</B>」 と、2023 年 6 月 30 日以降も  「<B>申請不要で利用できる機能</B>」および、 「<B>申請および承認が必要な機能</B>」 の 3 つが含まれます。<br><br>「顔認識」 機能は、その配下の 「顔識別」 （<B>Facial identification</B>） および 「顔検証」（<B>Facial verification</B>） ともに全て 「<B>申請および承認が必要な機能</B>」 です。</p><p>それぞれの詳細を、以下に詳述します。</p><h1 id="廃止された機能"><a href="#廃止された機能" class="headerlink" title="廃止された機能"></a>廃止された機能</h1><h2 id="「顔検出」機能を通じて得られる顔属性の一部の情報"><a href="#「顔検出」機能を通じて得られる顔属性の一部の情報" class="headerlink" title="「顔検出」機能を通じて得られる顔属性の一部の情報"></a>「顔検出」機能を通じて得られる顔属性の一部の情報</h2><p>「顔検出」機能を通じて得られる顔属性のうち、特定の一部情報は廃止されました。詳細は以下をご参照ください。 これらは、申請を行っても利用することはできません。<p><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/computer-vision/concept-face-detection#attributes">顔検出と顔属性 - Face - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><p> 注意事項：感情の状態やアイデンティティの属性の推測に使用できる顔認識機能は廃止されました。この機能は使い方を誤ると、ステレオタイプ化、差別、サービスの不当な拒否に人々をさらす可能性があります。 たとえば、感情、性別、年齢、笑顔、顔ひげ、髪、メイクを予測する機能が該当します。 </p></blockquote></p><h1 id="申請不要で利用できる機能"><a href="#申請不要で利用できる機能" class="headerlink" title="申請不要で利用できる機能"></a>申請不要で利用できる機能</h1><p>「顔検出」 機能のみを利用する場合は、利用申請は不要です。<br>この機能は 「この画像に 1 つ以上の人間の顔がありますか?」 という質問に答えます。画像内の人間の顔が検出され、その位置を示す座標情報と属性情報が返されます。<br>たとえば、人数（顔の数）を数えたり、プライバシーのために画像の顔領域に "ぼかし" を入れたりするだけのユースケースでの利用が想定されています。<br><p><a href="https://www.microsoft.com/ja-jp/events/azurebase/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">顔認識に関する責任あるAIポリシーの変更とガイダンスについて | Microsoft Base</a></p><blockquote><p>顔検出機能 (ぼかし、露出、眼鏡、頭部姿勢、ランドマーク、ノイズ、オクルージョン、顔の境界ボックスなど) は引き続き一般提供を行いますので、申請は不要です。</p></blockquote></p><p>なお、「顔検出」機能において、もし、顔情報を一意の識別子文字列で特定するための「Face ID」を利用する場合には、申請および承認が必要です。<br><p><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/computer-vision/concept-face-detection#face-id">顔検出、属性、入力データ | Microsoft Learn</a></p><blockquote><p>Face ID には、申し込みフォーム（ <a href="https://aka.ms/facerecognition">https://aka.ms/facerecognition</a> ）に入力することで申請できる、制限付きアクセスの承認が必要です。<br><br></p></blockquote><p>そのため、申請承認なしで「顔検出」機能の Detect API を利用する場合には、「Face ID」利用有無を指定する「returnFaceId」 パラメーター を 明示的に「false」 として設定するようにご留意ください。（既定値「true」の設定のまま利用する場合には、申請承認が必要です）</p><p><a href="https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395236">Face API - v1.0　API Reference | Face - Detect</a></p><blockquote><p>Request parameters &#x2F; <B>returnFaceId</B> (optional) &#x2F; boolean &#x2F;<br>Return faceIds of the detected faces or not. <B>The default value is true.</B></p></blockquote></p><h1 id="申請および承認が必要な機能"><a href="#申請および承認が必要な機能" class="headerlink" title="申請および承認が必要な機能"></a>申請および承認が必要な機能</h1><p>「顔認識」機能は、「申請および承認が必要な機能」です。<br>なお、Face API における「顔認識」機能配下の「<B>顔識別（Facial identification）</B>」、「<B>顔検証（Facial verification）</B>」の両機能の差異については、以下のドキュメント抜粋をご参照ください。<p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/computer-vision/overview-identity#identification">Azure Face サービスとは - Azure Cognitive Services | Microsoft Docs</a></p><blockquote><p>顔識別では、画像内の 1 つの顔を、安全なリポジトリ内の一連の顔と <B>“一対多”</B> で照合できます。</p></blockquote><blockquote><p>検証操作は、”これら 2 つの顔は同じ人物のものでしょうか?” という質問に答えます。<br>また、検証では、画像内の顔をセキュリティで保護されたリポジトリや写真からの 1 つの顔と <B>“1 対 1”</B> で照合して、それらが同じ個人であることが確認されます</p></blockquote></p><p><p><a href="https://aka.ms/facerecognition">顔認識利用申請フォーム</a> では、申請対象ユース ケースが「顔識別」か「顔検証」かどちらに該当するかを選択して申請する必要があります。</p><p>ユースケースに関する詳細は、以下のドキュメントもご参照ください。<br><br><a href="https://learn.microsoft.com/ja-jp/legal/cognitive-services/face/transparency-note?context=/azure/cognitive-services/computer-vision/context/context">Use cases for Face - Azure Cognitive Services | Microsoft Learn</a> </p></p><p><p>申請フォームに記載されたもの以外のユースケースに関するフィードバックについては、申請フォームとは別途の <a href="https://aka.ms/CogSvcsLimitedAccessFeedback">フィードバックフォーム</a> が用意されています。<br><br>なお、こちらのフォームに登録した内容はフィードバックに留まり、利用申請とはみなされない点にご留意ください。</p></p><h1 id="申請に関する情報"><a href="#申請に関する情報" class="headerlink" title="申請に関する情報"></a>申請に関する情報</h1><P><p><a href="https://aka.ms/facerecognition">申請フォーム</a> および申請後のご連絡メール等は、英語のみでの対応となり、日本語対応はございません。<br><br>Face API の利用申請を管理・レビューするのは米国本社内の専用部門であり、公平性と独立性のために、技術サポート部門を含めた各国の他の部門はレビュープロセスに直接介入できないためです。</p></p><P>申請に関する FAQ については、以下のドキュメントもご参考として頂けます。<p><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-limited-access#faq-about-limited-access">Cognitive Services の制限付きアクセス機能 - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><p>制限付きアクセスに関する FAQ <br>（抜粋）<br><br>Q.制限付きアクセスのサービスを使用する資格があるのはだれですか?<br><br>Q.管理下の顧客とは? 管理下の顧客に該当するかどうかがわからない場合はどうすればよいですか?<br><br>Q.申請が拒否された場合、私のデータはどうなりますか?<br></p></blockquote></P><h1 id="関連ドキュメント"><a href="#関連ドキュメント" class="headerlink" title="関連ドキュメント"></a>関連ドキュメント</h1><P><ul><li><a href="https://azure.microsoft.com/en-us/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">Responsible AI investments and safeguards for facial recognition | Azure Blog and Updates | Microsoft Azure</a><br></li><li><a href="https://www.microsoft.com/ja-jp/events/azurebase/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">顔認識に関する責任あるAIポリシーの変更とガイダンスについて | Microsoft Base　（※ 上記ドキュメントの日本語翻訳です）</a><br></li><li><a href="https://azure.microsoft.com/ja-jp/updates/facelimitedaccess/">Responsible AI investments and safeguards for Facial Recognition | Azure の更新情報 | Microsoft Azure</a><br></li></ul><hr><p><code>変更履歴</code><br><code>2023/03/22 created by Uehara</code><br><code>2024/05/20 modified by Uehara</code></p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Face API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Face API Recognition Identify </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision モデルのドメイン変更方法</title>
      <link href="/blog/2023/02/28/how-to-convert-the-domain-of-an-existing-cvmodel/"/>
      <url>/blog/2023/02/28/how-to-convert-the-domain-of-an-existing-cvmodel/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision モデルのドメイン変更方法をご紹介します。</p><span id="more"></span><br><hr><h1 id="Custom-Vision-モデルのドメインについて"><a href="#Custom-Vision-モデルのドメインについて" class="headerlink" title="Custom Vision モデルのドメインについて"></a>Custom Vision モデルのドメインについて</h1><p>Azure Custom Vision を使用して、画像のクラス分類 &#x2F; または 物体検出のモデル作成が可能です。<br>モデルのトレーニング開始前には、モデルのドメイン（対応領域）を選択します。ドメインの詳細については、以下のドキュメントをご確認ください。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/select-domain">Custom Vision プロジェクトのドメインを選択する</a></li></ul><p>一方で、モデルのトレーニングが完了した後にも、ドメインの変更は可能です。ドメインを変更することで、ご自分のシナリオに、より適したモデルとなり、精度の向上が見込める場合があります。</p><p>なお、ドメインの変更に際して、再度、画像のタグ付けの作業を行って頂く必要はありません。</p><p>また、ドメインの変更の結果が、既存モデルに上書きされることはありません。<br>１つのプロジェクトの中で、ドメインを変更したトレーニング結果は別々に保持されます。</p><p>以下は、Custom Vision ポータルで、１つのプロジェクトに異なるドメイン（General (Compact[S1] と General (Compact)) ）が保持されている例のスクリーンショットです。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain01.jpg" alt="cv-domain01" title="cv-domain01"> </p><p>この記事では、既存モデルのドメインの変更方法をご紹介します。</p><h1 id="既存モデルのドメイン変更手順"><a href="#既存モデルのドメイン変更手順" class="headerlink" title="既存モデルのドメイン変更手順"></a>既存モデルのドメイン変更手順</h1><h3 id="1-プロジェクト設定画面の表示"><a href="#1-プロジェクト設定画面の表示" class="headerlink" title="(1)  プロジェクト設定画面の表示"></a>(1)  プロジェクト設定画面の表示</h3><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) 上で、プロジェクトを一覧表示します。</p><p>一覧から、対象のプロジェクトを選択し、ページ右上にある 歯車 アイコンを選択して、プロジェクト設定画面を表示します。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain02.jpg" alt="cv-domain02" title="cv-domain02"> </p><h3 id="2-ドメインの選択と、変更の保存"><a href="#2-ドメインの選択と、変更の保存" class="headerlink" title="(2) ドメインの選択と、変更の保存"></a>(2) ドメインの選択と、変更の保存</h3><p>[Domains] セクションで、[General [A1]] 等、任意ドメインを変更先として選択します。 [Save Changes] を選択して変更を保存します。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain03.jpg" alt="cv-domain03" title="cv-domain03"> </p><h3 id="3-再トレーニング実行"><a href="#3-再トレーニング実行" class="headerlink" title="(3) 再トレーニング実行"></a>(3) 再トレーニング実行</h3><p>[Train] ボタンを使用して、再度トレーニングを行います。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain04.jpg" alt="cv-domain04" title="cv-domain04"> </p><h3 id="4-新しいモデルのテスト"><a href="#4-新しいモデルのテスト" class="headerlink" title="(4) 新しいモデルのテスト"></a>(4) 新しいモデルのテスト</h3><p>トレーニング完了後、[Performance] タブで、ドメイン変更が反映されたモデルの新しい Iteration のパフォーマンスを確認できます。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain05.jpg" alt="cv-domain05" title="cv-domain05"> </p><p>個別の画像に対する精度を確認する場合には、[Quick Test] ボタンを使用して、該当の Iteration を指定したテストを行います。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain06.jpg" alt="cv-domain06" title="cv-domain06"> 　</p><hr><p><code>変更履歴</code><br><code>2023/02/28 created by Uehara</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Translator Text API へのアクセスを VNET やプライベート エンドポイントに限定する方法</title>
      <link href="/blog/2022/04/13/TranslatorTextAPI-VNET-and-PrivateEndpoint/"/>
      <url>/blog/2022/04/13/TranslatorTextAPI-VNET-and-PrivateEndpoint/</url>
      
        <content type="html"><![CDATA[<p>Translator Text API の呼び出しを特定の VNET やプライベート エンドポイント経由に限定する方法について紹介します。</p><span id="more"></span><br><hr><h1 id="Cognitive-Services-における-VNET-との統合"><a href="#Cognitive-Services-における-VNET-との統合" class="headerlink" title="Cognitive Services における VNET との統合"></a>Cognitive Services における VNET との統合</h1><p>Translator Text API を含む Cognitive Services では、リソースを VNET と統合して、API へのアクセスを特定の VNET やプライベート エンドポイント経由に限定する方法を提供しています。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-virtual-networks?tabs=portal">Azure Cognitive Services 仮想ネットワークを構成する</a></li></ul><p>Translator Text API については他の API とは一部異なる点があるため、本ブログ記事では具体的な設定および API の呼び出し手順を例として紹介します。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/reference/v3-0-reference#virtual-network-support">Translator Text API v3.0 - 仮想ネットワークのサポート</a></li></ul><h1 id="Translator-Text-API-を-VNET-に統合する"><a href="#Translator-Text-API-を-VNET-に統合する" class="headerlink" title="Translator Text API を VNET に統合する"></a>Translator Text API を VNET に統合する</h1><p>Translator Text API へのアクセスを VNET やプライベート エンドポイントに限定した場合は、通常とは以下の点が異なります。</p><ul><li>グローバル トランスレーター エンドポイント (“api.cognitive.microsofttranslator.com”) は使用できません。代わりに<a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-custom-subdomains">カスタム サブドメイン</a>を使用します。</li><li>認証にトークン (Authorization ヘッダー)　を使うことはできません。代わりにサブスクリプション キー (Ocp-Apim-Subscription-Key) を使用します。</li><li>Ocp-Apim-Subscription-Region ヘッダーで Translator リソースのリージョンを指定します。(global の場合のみ省略可能)</li></ul><p>上記を踏まえた手順例を以下で紹介します。ここでは簡便のためリクエストの送信元を Azure 上の仮想マシン (VM) とします。</p><h2 id="手順例"><a href="#手順例" class="headerlink" title="手順例"></a>手順例</h2><h3 id="1-Ubuntu-Server-18-04-の-VM-および仮想ネットワークを新規で作成します"><a href="#1-Ubuntu-Server-18-04-の-VM-および仮想ネットワークを新規で作成します" class="headerlink" title="(1) Ubuntu Server 18.04 の VM および仮想ネットワークを新規で作成します"></a>(1) Ubuntu Server 18.04 の VM および仮想ネットワークを新規で作成します</h3><p>仮想ネットワークやその他のリソースのリージョンは東日本とします。</p><ul><li>参考: <a href="https://docs.microsoft.com/ja-jp/learn/modules/create-linux-virtual-machine-in-azure/">Azure で Linux 仮想マシンを作成する</a></li></ul><h3 id="2-Translator-Text-API-のリソースを作成します"><a href="#2-Translator-Text-API-のリソースを作成します" class="headerlink" title="(2) Translator Text API のリソースを作成します"></a>(2) Translator Text API のリソースを作成します</h3><p>リージョンとして東日本を選択します。</p><p>設定例:</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/2-create-resource-1.png" alt="Create Translator Azure Resource"></p><h3 id="3-Translator-Text-API-のネットワークの設定で-1-の仮想ネットワークを指定します"><a href="#3-Translator-Text-API-のネットワークの設定で-1-の仮想ネットワークを指定します" class="headerlink" title="(3) Translator Text API のネットワークの設定で (1) の仮想ネットワークを指定します"></a>(3) Translator Text API のネットワークの設定で (1) の仮想ネットワークを指定します</h3><p>Translator Text API へのアクセスを指定された仮想ネットーク (VNET) からのみに限定します。</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/3-add-vnet-1.png" alt="Add VNET"></p><p>VNET を指定したタイミングでカスタム サブドメイン名が割り当てられます。</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/3-custom-subdomain.png" alt="Custom subdomain"></p><h3 id="4-仮想マシンから-Translator-Text-API-の呼び出しが成功することを確認します"><a href="#4-仮想マシンから-Translator-Text-API-の呼び出しが成功することを確認します" class="headerlink" title="(4) 仮想マシンから Translator Text API の呼び出しが成功することを確認します"></a>(4) 仮想マシンから Translator Text API の呼び出しが成功することを確認します</h3><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/reference/v3-0-reference#virtual-network-support">仮想ネットワークのサポート – Translator Text API</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">カスタム エンドポイントを使用する Translator を呼び出す要求の例を次に示します。</span><br><span class="line">// Pass secret key and region using headers</span><br><span class="line">curl -X POST &quot;https://&lt;your-custom-domain&gt;.cognitiveservices.azure.com/translator/text/v3.0/translate?api-version=3.0&amp;to=es&quot; \</span><br><span class="line">     -H &quot;Ocp-Apim-Subscription-Key:&lt;your-key&gt;&quot; \</span><br><span class="line">     -H &quot;Ocp-Apim-Subscription-Region:&lt;your-region&gt;&quot; \</span><br><span class="line">     -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">     -d &quot;[&#123;&#x27;Text&#x27;:&#x27;Hello, what is your name?&#x27;&#125;]&quot;</span><br></pre></td></tr></table></figure></li></ul><p>コマンドと結果の例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X POST &quot;https://&lt;your-custom-domain&gt;.cognitiveservices.azure.com/translator/text/v3.0/translate?api-version=3.0&amp;to=es&quot;      -H &quot;Ocp-Apim-Subscription-Key:xxx &quot;      -H &quot;Ocp-Apim-Subscription-Region:japaneast&quot;      -H &quot;Content-Type: application/json&quot;      -d &quot;[&#123;&#x27;Text&#x27;:&#x27;Hello, what is your name?&#x27;&#125;]&quot;</span><br><span class="line"></span><br><span class="line">[&#123;&quot;detectedLanguage&quot;:&#123;&quot;language&quot;:&quot;en&quot;,&quot;score&quot;:1.0&#125;,&quot;translations&quot;:[&#123;&quot;text&quot;:&quot;Hola, ¿cómo te llamas?&quot;,&quot;to&quot;:&quot;es&quot;&#125;]&#125;]</span><br></pre></td></tr></table></figure><p>ここで、仮想ネットワーク外からアクセスしようとした場合、以下のようなエラーで失敗します。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;error&quot;:&#123;&quot;code&quot;:&quot;AccessDenied&quot;,&quot;message&quot;: &quot;Access denied due to Virtual Network/Firewall rules. Your IP address is XX.XX.XX.XX.&quot;&#125;&#125;</span><br></pre></td></tr></table></figure><p>この設定では、Translator Text API 側でアクセスを許可する送信元を特定の仮想ネットワークに限定しているだけで、VM から見た宛先は仮想ネットワークのプライベート IP アドレスではなくパブリック IP アドレスになります。<br>これは、仮想マシン上でカスタムサブドメイン名を名前解決した結果から確認できます。</p><h3 id="コマンドと結果の例"><a href="#コマンドと結果の例" class="headerlink" title="コマンドと結果の例:"></a>コマンドと結果の例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ dig &lt;your-custom-domain&gt;.cognitiveservices.azure.com</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">&lt;your-custom-domain&gt;.cognitiveservices.azure.com. 541 IN CNAME japaneast.prod.vnet.cog.trafficmanager.net.</span><br><span class="line">japaneast.prod.vnet.cog.trafficmanager.net. 60 IN CNAME vnetproxyv1-jpe-prod.japaneast.cloudapp.azure.com.</span><br><span class="line">vnetproxyv1-jpe-prod.japaneast.cloudapp.azure.com. 9 IN A 40.79.187.171</span><br></pre></td></tr></table></figure><p>パブリック IP アドレスである 40.79.187.171 に名前解決されています。</p><h3 id="5-プライベート-IP-アドレスで通信するためにプライベート-エンドポイントを追加します"><a href="#5-プライベート-IP-アドレスで通信するためにプライベート-エンドポイントを追加します" class="headerlink" title="(5) プライベート IP アドレスで通信するためにプライベート エンドポイントを追加します"></a>(5) プライベート IP アドレスで通信するためにプライベート エンドポイントを追加します</h3><p>Translator Text API は他の Cognitive Services と同様にプライベート エンドポイントをサポートしています。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-virtual-networks?tabs=portal#use-private-endpoints">プライベート エンドポイントを使用する</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">お使いの Cognitive Services リソースのプライベート エンドポイントを使用すると、仮想ネットワーク (VNet) 上のクライアントはプライベート リンクを介してデータに安全にアクセスできるようになります。 プライベート エンドポイントは、Cognitive Services リソースの VNet アドレス空間からの IP アドレスを使用します。</span><br></pre></td></tr></table></figure></li></ul><p>設定例:</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/5-add-private-endpoint.png" alt="Add private endpoint"></p><p> <a href="https://docs.microsoft.com/ja-jp/azure/private-link/private-endpoint-dns">DNS の設定</a>が更新されると、名前解決した結果がプライベート IP アドレスとなります。</p><p>コマンドと結果の例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ dig &lt;your-custom-domain&gt;.cognitiveservices.azure.com</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">&lt;your-custom-domain&gt;.cognitiveservices.azure.com. 900 IN CNAME &lt;your-custom-domain&gt;.privatelink.cognitiveservices.azure.com.</span><br><span class="line">&lt;your-custom-domain&gt;.privatelink.cognitiveservices.azure.com. 9 IN A 10.0.0.5</span><br></pre></td></tr></table></figure><p>この状態で仮想マシンから curl コマンドで Translator の API を呼び出すとプライベート IP アドレス (プライベートエンドポイント経由) でのアクセスになります。</p><hr><p><code>変更履歴</code><br><code>2022/04/13 created by Hiroki Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Translator Text API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Translator Text API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Speech to Text のコンテナーに関する FAQ</title>
      <link href="/blog/2022/04/08/Speech-to-Text-Conatiner-FAQ/"/>
      <url>/blog/2022/04/08/Speech-to-Text-Conatiner-FAQ/</url>
      
        <content type="html"><![CDATA[<p>Speech to Text のコンテナーに関する FAQ をまとめました。</p><p>主にベースライン (標準) モデルのコンテナーに関する内容となります。カスタム モデルの場合は異なることがあります。</p><span id="more"></span><br><hr><h2 id="コンテナーが起動しない、またはすぐに停止する"><a href="#コンテナーが起動しない、またはすぐに停止する" class="headerlink" title="コンテナーが起動しない、またはすぐに停止する"></a>コンテナーが起動しない、またはすぐに停止する</h2><p>まずはオプションを除いた最小限のパラメーター構成で動作を確認します。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -it -p 5000:5000 --memory 4g --cpus 4 \</span><br><span class="line">mcr.microsoft.com/azure-cognitive-services/speechservices/speech-to-text \</span><br><span class="line">Eula=accept \</span><br><span class="line">Billing=&#123;ENDPOINT_URI&#125; \</span><br><span class="line">ApiKey=&#123;API_KEY&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-howto?tabs=stt,csharp,simple-format#run-the-container-with-docker-run">docker run でコンテナーを実行する</a></li></ul><p>またコンテナーを実行しているマシンが動作要件を満たしているか確認します。CPU は最低 2 コア、メモリは 2 GB が必要となりますが、最新 (latest) のモデルでは以前よりもメモリ使用量が増大しているため、推奨構成 + α で確認することをお勧めします。</p><ul><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-howto?tabs=stt,csharp,simple-format#host-computer-requirements-and-recommendations">ホスト コンピューターの要件と推奨事項</a></p></li><li><p><a href="https://docs.microsoft.com/en-us/azure/cognitive-services/containers/container-image-tags?tabs=current#speech-to-text">Azure Cognitive Services container image tags and release notes</a></p></li></ul><p>加えて、コンテナーの実行には CPU が AVX2 の命令をサポートしている必要があります。ホスト OS が Linux であれば以下のコマンドで AVX2 のサポート有無を確認できます。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -q avx2 /proc/cpuinfo &amp;&amp; echo AVX2 supported || echo No AVX2 support detected</span><br></pre></td></tr></table></figure><p>Speech to Text のコンテナーは Azure VM でも実行することができるため、オンプレミス環境で動作しない場合は切り分けとして Azure VM での動作確認を検討します。VM のサイズによって CPU は異なりますが、AVX2 をサポートしている CPU かどうかについては以下のリストからも確認できます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/virtual-machines/linux/compute-benchmark-scores">Linux VM のコンピューティング ベンチマーク スコア</a></li></ul><p>※CPU の型番から AVX2 のサポート状況を確認するには各ベンダー (Intel, AMD など) の情報を参照します。</p><ul><li>例. <a href="https://ark.intel.com/content/www/us/en/ark.html#@Processors">Intel Product Specifications</a>※Intel 社のサイトとなります</li></ul><h2 id="コンテナーは起動したが音声認識の結果が期待と異なる"><a href="#コンテナーは起動したが音声認識の結果が期待と異なる" class="headerlink" title="コンテナーは起動したが音声認識の結果が期待と異なる"></a>コンテナーは起動したが音声認識の結果が期待と異なる</h2><p>Speech to Text のコンテナーは言語ごとにコンテナーのイメージが分かれています。latest のタグは英語 (en-us) の最新イメージです。その他の言語については下記のリストから該当する言語のイメージを取得・実行する必要があります。</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/cognitive-services/containers/container-image-tags?tabs=current#speech-to-text">Azure Cognitive Services container image tags and release notes</a></li></ul><p>日本語 (ja-jp) の場合のコマンド実行例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -it -p 5000:5000 --memory 4g --cpus 4 \</span><br><span class="line">mcr.microsoft.com/azure-cognitive-services/speechservices/speech-to-text:3.0.0-amd64-ja-jp \</span><br><span class="line">Eula=accept \</span><br><span class="line">Billing=&#123;ENDPOINT_URI&#125; \</span><br><span class="line">ApiKey=&#123;API_KEY&#125;</span><br></pre></td></tr></table></figure><h2 id="ホスト-OS-のディレクトリを指定したログの出力に失敗する"><a href="#ホスト-OS-のディレクトリを指定したログの出力に失敗する" class="headerlink" title="ホスト OS のディレクトリを指定したログの出力に失敗する"></a>ホスト OS のディレクトリを指定したログの出力に失敗する</h2><p>Speech to Text のコンテナーではディレクトリをマウントすることでホスト OS 上にログを出力することができます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-configuration?tabs=stt#logging-settings">Speech Service コンテナーを構成する - Logging の設定</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--mount type=bind,src=/home/azureuser/output,target=/output \</span><br></pre></td></tr></table></figure></li></ul><p>ここで指定されたホスト OS のディレクトリ (例. &#x2F;home&#x2F;azureuser&#x2F;output) は Docker コンテナーから書き込みできるようにアクセス許可が設定されている必要があります。もし書き込みが許可されていない場合はコンテナーの実行は以下のようなエラーで停止します。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating directory &#x27;/app/speechtotext/xxx&#x27; failed with error &#x27;Access to the path &#x27;/app/speechtotext/xxx&#x27; is denied.&#x27;. Please make sure that the path is writable.</span><br></pre></td></tr></table></figure><p>※Docker のマウントやプロセスの実行権限の詳細については利用しているプラットフォーム (OS) によって異なります。</p><ul><li>参考: <a href="https://docs.docker.com/storage/bind-mounts/">Docker docs - Use bind mounts</a>※Docker のサイトとなります</li></ul><h2 id="起動後しばらく動作した後に停止する"><a href="#起動後しばらく動作した後に停止する" class="headerlink" title="起動後しばらく動作した後に停止する"></a>起動後しばらく動作した後に停止する</h2><p>コンテナーから課金 (Billing) エンドポイントへの接続に失敗している可能性があります。Speech to Text のコンテナーは利用量を定期的に Azure クラウドに報告する必要があり、一定時間接続に失敗すると動作を停止します。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-howto?tabs=stt,csharp,simple-format#billing">課金エンドポイントへの接続について</a></li></ul><p>ホスト OS や Docker コンテナーのネットワーク構成として、課金エンドポイントに HTTPS (TCP ポート<br> 443) で通信が可能か確認します。例えばファイアウォールやプロキシが接続を拒否している可能性があります。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-configuration?tabs=stt#http-proxy-credentials-settings">Speech Service コンテナーのプロキシ設定</a> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> docker run --rm -it -p 5000:5000 \</span><br><span class="line">--memory 2g --cpus 1 \</span><br><span class="line">--mount type=bind,src=/home/azureuser/output,target=/output \</span><br><span class="line">&lt;registry-location&gt;/&lt;image-name&gt; \</span><br><span class="line">Eula=accept \</span><br><span class="line">Billing=&lt;endpoint&gt; \</span><br><span class="line">ApiKey=&lt;api-key&gt; \</span><br><span class="line">HTTP_PROXY=&lt;proxy-url&gt; \</span><br><span class="line">HTTP_PROXY_CREDS=&lt;proxy-user&gt;:&lt;proxy-password&gt; \</span><br></pre></td></tr></table></figure></li></ul><p> また Docker は既定の DNS サーバーとして Google Public DNS (IP アドレス: 8.8.8.8) を使用するため、もしこの DNS サーバーへのアクセスが許可されない場合は別の DNS サーバーを指定する必要があります。</p><ul><li>参考: <a href="https://github.com/moby/moby/issues/23910">Docker 既定の DNS サーバーについて言及した GitHub 上の Issue</a></li></ul><p>※Linux では &#x2F;etc&#x2F;docker&#x2F;daemon.json のファイルで既定の DNS サーバーを設定できます。</p><hr><p><code>変更履歴</code><br><code>2022/04/08 created by Hiroki Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Speech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision の Advanced トレーニングの利用方法</title>
      <link href="/blog/2022/03/31/how-to-use-advanced-training/"/>
      <url>/blog/2022/03/31/how-to-use-advanced-training/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision の Advanced Training の利用方法をご紹介します。</p><span id="more"></span><br><hr><h1 id="Custom-Vision-モデル作成"><a href="#Custom-Vision-モデル作成" class="headerlink" title="Custom Vision モデル作成"></a>Custom Vision モデル作成</h1><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) を使用して、画像のクラス分類 &#x2F; または 物体検出のモデル作成が可能です。一連の流れについては、以下のドキュメントをご参照ください。</p><ul><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/getting-started-build-a-classifier">クイックスタート: Custom Vision Web ポータルを使用して画像分類器モデルを構築する</a></p></li><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/get-started-build-detector">クイックスタート: クイックスタート: Custom Vision の Web サイトでオブジェクト検出器を構築する</a></p></li></ul><p>モデルトレーニングでは “Quick Training” &#x2F; “Advanced Training” のどちらかのタイプを選択可能です。上記ドキュメントは、比較的短時間で完了する Quick Training を前提として記載されていますが、この記事では、Advanced Training の利用手順をご案内します。</p><h1 id="Advanced-Training-の利用手順"><a href="#Advanced-Training-の利用手順" class="headerlink" title="Advanced Training の利用手順"></a>Advanced Training の利用手順</h1><h3 id="1-Train-ボタンクリック"><a href="#1-Train-ボタンクリック" class="headerlink" title="(1)  [Train] ボタンクリック"></a>(1)  [Train] ボタンクリック</h3><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) 上で、<br>トレーニングデータをアップロードした後、画面右上の [Train] ボタンをクリックします。</p><p><img src="https://jpaiblog.github.io/images/how-to-use-advanced-training/cv-advanced-01.png" alt="cv-advanced-01" title="cv-advanced-01"> </p><h3 id="2-Advanced-Training-の設定"><a href="#2-Advanced-Training-の設定" class="headerlink" title="(2) [Advanced Training] の設定"></a>(2) [Advanced Training] の設定</h3><p>[Train] ボタンクリックで表示される子画面上で、Training Types：[Advanced Training] を選択します。</p><p><img src="https://jpaiblog.github.io/images/how-to-use-advanced-training/cv-advanced-02.png" alt="cv-advanced-02" title="cv-advanced-02"> </p><p>Custom Vision では、トレーニング時間あたりの課金を設定させて頂いております。</p><ul><li><a href="https://azure.microsoft.com/ja-jp/pricing/details/cognitive-services/custom-vision-service/?cdn=disable">Custom Vision の価格</a></li></ul><p>そのため、ご予算の範囲内で今回のトレーニングにかけられる時間の最大値をTraining budget に設定してください。</p><p>なお、Custom Vision ポータル では、トレーニングを停止する機能のご提供がないことにご留意ください。</p><p>また、Advanced Training が完了次第、メールでお知らせすることが可能です。</p><p>お知らせ機能を利用する場合には、[Send me an email notification after training completes] のチェックボックスをクリックして、任意の Email address を記載してください。</p><p>[Train] ボタンをクリックするとトレーニングが始まります。誠に恐れ入りますが、トレーニング進捗や完了までの残り時間などの表示機能のご提供はありません。前述の メールでのトレーニング完了お知らせ機能のご利用をご検討ください、</p><h1 id="お問い合わせについて"><a href="#お問い合わせについて" class="headerlink" title="お問い合わせについて"></a>お問い合わせについて</h1><p>リソース個別の技術的なご質問については、<a href="https://azure.microsoft.com/ja-jp/support/plans/">DEVELOPER サポートプラン</a> 以上のサポートプランをご契約いただき、Azure ポータルからお問い合わせください。</p><p>なお、Azure ポータルからの起票時に選択されたサブスクリプションと、同じサブスクリプションに含まれるリソースではない場合は、調査をお承りすることができませんのでご注意ください。</p><ul><li><a href="https://jpaztech.github.io/blog/information/Different-subscriptions-research/">問い合わせ起票時のセキュリティ チェックの強化について</a></li></ul><hr><p><code>変更履歴</code><br><code>2022/03/31 created by Uehara</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision のトレーニングが失敗した場合の調査に必要な情報について</title>
      <link href="/blog/2022/03/25/how-to-troubleshoot-custom-vision-training-issue/"/>
      <url>/blog/2022/03/25/how-to-troubleshoot-custom-vision-training-issue/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision のトレーニングが失敗した場合の調査に必要な情報をまとめました。</p><span id="more"></span><br><hr><h1 id="Custom-Vision-のトレーニングが失敗した場合の調査について"><a href="#Custom-Vision-のトレーニングが失敗した場合の調査について" class="headerlink" title="Custom Vision のトレーニングが失敗した場合の調査について"></a>Custom Vision のトレーニングが失敗した場合の調査について</h1><p>Custom Vision でトレーニングを実行した際に何らかの原因によってトレーニングが失敗すると、そのイテレーションは “Failed” と表示されます。これはリソースの一時的な不足など一過性の問題でも発生するため、まずはリトライ (再実行) をお試しください。また、下記ドキュメントに記載されたトレーニング データの推奨量を満たしているかも併せてご確認ください。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/getting-started-improving-your-classifier">Custom Vision のモデルを改善する方法</a></li></ul><p>もし繰り返し実行しても失敗する場合は別途原因の調査が必要となります。Azure ポータルからお問い合わせいただく際には、以下の情報を採取・提供いただけるとスムーズです。</p><h3 id="1-トレーニングを実行したプロジェクトの-ID-Project-Id"><a href="#1-トレーニングを実行したプロジェクトの-ID-Project-Id" class="headerlink" title="(1) トレーニングを実行したプロジェクトの ID (Project Id)"></a>(1) トレーニングを実行したプロジェクトの ID (Project Id)</h3><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) 上で、<br>プロジェクトを選択した後、画面右上の歯車マーク (Settings) からご確認いただけます。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/cv-portal-01.png" alt="cv-portal-01" title="cv-portal-01">  </p><h3 id="2-トレーニング-イテレーション-毎に付与される-ID-Iteration-Id"><a href="#2-トレーニング-イテレーション-毎に付与される-ID-Iteration-Id" class="headerlink" title="(2) トレーニング (イテレーション) 毎に付与される ID (Iteration Id)"></a>(2) トレーニング (イテレーション) 毎に付与される ID (Iteration Id)</h3><p>まず (1) と同じプロジェクトの Settings で KEY の情報をメモしておきます。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/cv-portal-02.png" alt="cv-portal-02" title="cv-portal-02">  </p><p>次に下記のコンソールから、イテレーションを列挙する API を呼び出すことで Failed となったイテレーションの Iteration Id を確認することができます。</p><ul><li><a href="https://southcentralus.dev.cognitive.microsoft.com/docs/services/Custom_Vision_Training_3.3/operations/5eb0bcc6548b571998fddec9">Custom Vision Training v3.3 - GetIterations</a></li></ul><p>コンソールの起動時には現在ご利用のリージョンを選択してください。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/api-console-01.png" alt="api-console-01" title="api-console-01">  </p><p>API の呼び出しには Training リソースの KEY および Project Id の情報が必要です。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/api-console-02.png" alt="api-console-02" title="api-console-02">  </p><p>API を呼び出した結果の “id” の部分が Iteration Id に相当するため、”status” が “Failed” となっているイテレーションの “id” をご提供ください。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/api-console-03.png" alt="api-console-03" title="api-console-03">  </p><h3 id="3-トレーニングを実行したリソースのリソース-ID"><a href="#3-トレーニングを実行したリソースのリソース-ID" class="headerlink" title="(3) トレーニングを実行したリソースのリソース ID"></a>(3) トレーニングを実行したリソースのリソース ID</h3><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/cv-portal-03.png" alt="cv-portal-03" title="cv-portal-03">  </p><p>(1) と同様に Settings からご確認いただけます。</p><p>なお、Azure ポータルからの起票時に選択されたサブスクリプションと、同じサブスクリプションに含まれるリソースではない場合は、調査をお承りすることができませんのでご注意ください。</p><ul><li><a href="https://jpaztech.github.io/blog/information/Different-subscriptions-research/">問い合わせ起票時のセキュリティ チェックの強化について</a></li></ul><hr><p><code>変更履歴</code><br><code>2022/03/25 created by Hiroki Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision でモデルを ONNX 形式でエクスポートして利用する方法について</title>
      <link href="/blog/2022/02/21/custom-vision-exported-onnx-format/"/>
      <url>/blog/2022/02/21/custom-vision-exported-onnx-format/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision において ONNX 形式でエクスポートされたモデルを使用する方法と参考情報を紹介します。</p><span id="more"></span><br><hr><h2 id="エクスポートされた-ONNX-モデルを使用する方法"><a href="#エクスポートされた-ONNX-モデルを使用する方法" class="headerlink" title="エクスポートされた ONNX モデルを使用する方法"></a>エクスポートされた ONNX モデルを使用する方法</h2><p>Custom Vision では、エッジ デバイス上でのリアルタイム推論用に最適化されている、”コンパクト ドメイン” で学習されたイテレーションでのみモデルのエクスポートが可能です。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/select-domain#compact-domains">コンパクト ドメインとは</a></li></ul><p>もしコンパクト ドメイン以外のドメインで一度学習を行ったプロジェクトで、学習済みモデルのエクスポートを行いたい場合は、対象プロジェクトの設定 (Settings) から、[ドメイン (Domains)] のセクションでコンパクト ドメインを選択して、再度学習 (Train) を実行することでエクスポートが可能になります。</p><p><img src="https://jpaiblog.github.io/images/custom-vision-exported-onnx-format/custom-vision-compact-domain.png" align="left" border="1"><br clear="left"></p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/export-your-model#convert-to-a-compact-domain">コンパクト ドメインへの変換方法</a></li></ul><p>学習済みモデルをエクスポートするには、対象プロジェクトの [Performance] タブを選択し、[Export] をクリックします。</p><p><img src="https://jpaiblog.github.io/images/custom-vision-exported-onnx-format/custom-vision-how-to-export.png" align="left" border="1"><br clear="left"></p><p>エクスポートの際にモデル ファイルの形式を指定できます。ONNX 形式のモデルを利用する場合は以下を選択します。</p><p><img src="https://jpaiblog.github.io/images/custom-vision-exported-onnx-format/custom-vision-export-onnx.png" align="left" border="1"><br clear="left"></p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/export-your-model#export-your-model">モデルをエクスポートする</a></li></ul><p>ONNX 形式のモデル ファイルをアプリケーションで利用する方法については以下のサンプルを適宜ご利用ください。</p><ul><li><a href="https://github.com/Azure-Samples/cognitive-services-onnx-customvision-sample">ONNXファイルを用いた推論サンプルコード</a></li><li><a href="https://github.com/onnx/onnx">Onnx on GitHub</a></li></ul><h2 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h2><h5 id="■-再学習やエクスポートのタイミングによって、ONNX-ファイル内の入力および出力のフォーマットが変更されることはあるか？"><a href="#■-再学習やエクスポートのタイミングによって、ONNX-ファイル内の入力および出力のフォーマットが変更されることはあるか？" class="headerlink" title="■ 再学習やエクスポートのタイミングによって、ONNX ファイル内の入力および出力のフォーマットが変更されることはあるか？"></a>■ 再学習やエクスポートのタイミングによって、ONNX ファイル内の入力および出力のフォーマットが変更されることはあるか？</h5><p>いいえ。Custom Vision の同一プロジェクト・同一ドメインで、画像やタグ付けだけを変更して再学習を行っても、入力や出力のデータサイズやノード名は固定で変わりません。また、これらの形式はエクスポートのタイミングで変更されることもないため、アプリケーションで参照するモデル ファイルの置き換えを行っても、再学習前に利用していた推論コードの変更は変更無く、そのまま実行が可能です。</p><hr><p><code>変更履歴</code><br><code>2022/02/21 created by kazuyaonuki</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。</p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure に関するお問い合わせ起票時のセキュリティ チェックが強化されます</title>
      <link href="/blog/2021/12/08/enhance-security-check/"/>
      <url>/blog/2021/12/08/enhance-security-check/</url>
      
        <content type="html"><![CDATA[<p>2021 年 12 月 8 日以降、Azure サブスクリプションへのアクセス権のセキュリティ チェックが強化されます。具体的な内容を以下に紹介します。  </p><span id="more"></span><br><hr><h1 id="セキュリティ-チェック強化の背景と具体的な対応について"><a href="#セキュリティ-チェック強化の背景と具体的な対応について" class="headerlink" title="セキュリティ チェック強化の背景と具体的な対応について"></a>セキュリティ チェック強化の背景と具体的な対応について</h1><p>マイクロソフトではお客様の情報保護を最優先としており、様々な側面からセキュリティ上の脅威を評価して対策を行っています。その中で、サポート窓口が悪用されるリスクを低減するための対応として、調査対象となる Azure サブスクリプションへのアクセス権を確認していますが、2021 年 12 月 8 日以降、セキュリティ チェックが強化されます。  </p><p>これにより、問い合わせ起票時に選択された Azure サブスクリプションと異なるサブスクリプションに関するお問い合わせはお承りできなくなります。詳細および最新情報については 2021 年 11 月 26 日 に公開された以下のブログをご参照ください。  </p><ul><li><a href="https://jpaztech.github.io/blog/information/Different-subscriptions-research/">お問い合わせ発行時と「異なる」サブスクリプションならびに AAD テナントの調査依頼に対してのセキュリティ チェックが強化されます</a></li></ul><p>またこちらは電話でお問い合わせの発行を依頼いただいた場合も同様となります。電話については下記のブログで個別に説明していますので、併せてご確認ください。  </p><ul><li><a href="https://jpaztech.github.io/blog/information/Security-check-stricter/">電話経由における Azure サブスクリプションの調査のセキュリティ チェックが厳格化されます</a></li></ul><p>※ 本情報の内容（添付文書、リンク先などを含む）は、作成日時点でのものであり、予告なく変更される場合があります。  </p><hr><p><code>変更履歴</code><br><code>2021/12/8 created by Nakagami</code></p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> セキュリティ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法</title>
      <link href="/blog/2021/05/17/speech-translation-with-custom-translator/"/>
      <url>/blog/2021/05/17/speech-translation-with-custom-translator/</url>
      
        <content type="html"><![CDATA[<p>Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法をご紹介します。</p><span id="more"></span><br><hr><h1 id="Custom-Translator-で作成した翻訳モデルを-Speech-Translation-で使用する方法"><a href="#Custom-Translator-で作成した翻訳モデルを-Speech-Translation-で使用する方法" class="headerlink" title="Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法"></a>Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法</h1><p>Speech Services の音声翻訳 (Speech Translation) は Speech-to-Text で文字起こしされた結果を元に Text Translation で翻訳を行います。</p><ul><li><a href="https://www.microsoft.com/en-us/translator/business/machine-translation/#howspeech">How does speech translation work?</a></li></ul><p>この時、Speech-to-Text で使用される音声認識モデルは Custom Speech でカスタマイズすることができます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/custom-speech-overview">Custom Speech</a></li></ul><p>また Text Translation については Custom Translator で構築した独自の翻訳モデルを使用することができます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/custom-translator/overview">Custom Translator</a></li></ul><p>ここでは、Custom Translator で作成した翻訳モデルを Speech SDK で使用する方法をご紹介します。前提として、事前に Custom Translator でモデルを作成してデプロイしておく必要があります。また、モデルの識別子である Category ID は <a href="https://portal.customtranslator.azure.ai/">Custom Translsator のポータルサイト</a>でモデルを作成したプロジェクトの情報から確認することができます。</p><p><img src="https://jpaiblog.github.io/images/speech-translation-with-custom-translator/custom-translator-category-id.png" alt="Custom Translator Category ID"></p><h2 id="C-NET-を使用する場合のコード例"><a href="#C-NET-を使用する場合のコード例" class="headerlink" title="C# (.NET) を使用する場合のコード例:"></a>C# (.NET) を使用する場合のコード例:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SpeechTranslationConfig config = SpeechTranslationConfig.FromSubscription(SubscriptionKey, Region);</span><br><span class="line"></span><br><span class="line">// Custom Speech のモデル指定 (*Speech-to-Text もカスタマイズする場合のみ)</span><br><span class="line">config.EndpointId = &quot;&lt;Your Endpoint ID here&gt;&quot;;</span><br><span class="line"></span><br><span class="line">// Custom Translator のモデル指定</span><br><span class="line">config.SetServiceProperty(&quot;category&quot;, &quot;&lt;Your Category ID here&gt;&quot;, ServicePropertyChannel.UriQueryParameter);</span><br><span class="line"></span><br><span class="line">// 以降の音声認識・翻訳は通常と同じ</span><br></pre></td></tr></table></figure><h2 id="JavaScript-を使用する場合のコード例"><a href="#JavaScript-を使用する場合のコード例" class="headerlink" title="JavaScript を使用する場合のコード例:"></a>JavaScript を使用する場合のコード例:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">speechConfig = SpeechSDK.SpeechTranslationConfig.fromSubscription(key.value, regionOptions.value);</span><br><span class="line"></span><br><span class="line">// Custom Translator のモデル指定</span><br><span class="line">speechConfig.setServiceProperty(&quot;category&quot;, &quot;&lt;Category ID&gt;&quot;, SpeechSDK.ServicePropertyChannel.UriQueryParameter);</span><br><span class="line"></span><br><span class="line">// 以降の音声認識・翻訳は通常と同じ</span><br></pre></td></tr></table></figure><p>いずれの言語でも、SpeechTranslationConfig の setServiceProperty を使用して、category のパラメーターに Custom Translator の Category ID を指定する方法が基本となります。</p><ul><li><a href="https://github.com/Azure-Samples/cognitive-services-speech-sdk">Speech Services のサンプルコード</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-sdk">Speech SDK のリファレンス</a></li></ul><h2 id="Speech-Translation-でカスタム翻訳モデルを利用した場合の料金について"><a href="#Speech-Translation-でカスタム翻訳モデルを利用した場合の料金について" class="headerlink" title="Speech Translation でカスタム翻訳モデルを利用した場合の料金について"></a>Speech Translation でカスタム翻訳モデルを利用した場合の料金について</h2><p>Speech Translation で Custom Translator の翻訳モデルを使用した場合に、発生する課金項目としては以下の通りです。</p><ul><li>(1) Speech Translation Standard ($2.50 per hour)</li><li>(2) Custom Speech Model Hosting ($0.0538 per model per hour, Optional)</li><li>(3) Custom Translation - Training ($10 per million source + target chars of training data (max. $300&#x2F;training))</li><li>(4) Custom Translation - Custom model hosting ($10 per hosted custom translation model per region, per month)</li></ul><p>実際の料金レートは選択された価格帯によって異なります。(2) は Custom Speech で作成した音声認識モデルも使用する場合に発生します。Translator Text API の翻訳文字数に応じた課金 “Custom Translation - Translation ($40 per million chars of custom translation) “ は Speech Translation では発生しません。</p><ul><li><a href="https://azure.microsoft.com/en-us/pricing/details/cognitive-services/speech-services/">Speech Services の価格</a></li><li><a href="https://azure.microsoft.com/en-us/pricing/details/cognitive-services/translator/">Translator Text の価格</a></li></ul><hr><p><code>変更履歴</code><br><code>2021/05/17 created by Nakagami</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Speech Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Speech Services </tag>
            
            <tag> Custom Translator </tag>
            
            <tag> Speech SDK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bing Search API 関するお問い合わせについて</title>
      <link href="/blog/2021/04/30/support-request-for-bing-search-apis/"/>
      <url>/blog/2021/04/30/support-request-for-bing-search-apis/</url>
      
        <content type="html"><![CDATA[<p>Bing Search API に関するお問い合わせを起票いただく際にご留意いただきたい点をご案内します。</p><span id="more"></span><br><hr><h2 id="1-Bing-Search-API-の具体的な動作に関するご質問について"><a href="#1-Bing-Search-API-の具体的な動作に関するご質問について" class="headerlink" title="(1) Bing Search API の具体的な動作に関するご質問について"></a>(1) Bing Search API の具体的な動作に関するご質問について</h2><p>Bing Search API の具体的な動作、例えば特定のパラメーターを設定するとエラーが発生する、あるクエリのみレスポンスが非常に遅い、といった内容について調査を行うには、個々の API リクエストを一意に識別可能な <strong>BingAPIs-TraceId</strong> が必要となります。これは API のレスポンス ヘッダーに含まれています。</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-web-search/reference/headers">Web Search API v7 headers</a></li></ul><p>また、事象を再現可能な curl のコマンド例を併せて提供いただけるとよりスムーズに調査を行うことができます。例えば以下のように -v オプションを指定することで BingAPIs-TraceId を確認することもできます。</p><p>curl -v –header “Ocp-Apim-Subscription-Key: Key” “<a href="https://api.bing.microsoft.com/v7.0/custom/search?q=Test&customconfig=ID&setLang=ja&textDecorations=true&count=10&offset=10&textFormat=HTML">https://api.bing.microsoft.com/v7.0/custom/search?q=Test&amp;customconfig=ID&amp;setLang=ja&amp;textDecorations=true&amp;count=10&amp;offset=10&amp;textFormat=HTML</a>“ </p><ul><li><a href="https://curl.se/docs/manpage.html">curl command reference</a> (※弊社外のサイトとなります)</li></ul><p>その他 Bing Search API で利用可能なパラメーターやレスポンスの形式については以下のリファレンスをご参照ください。</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-web-search/reference/endpoints">Web Search API v7 reference</a></li></ul><p>なお、BingAPIs-TraceId は有効期限が非常に短いため、発生から時間が経過すると調査が困難になる場合があります。</p><h2 id="2-Bing-Search-API-で取得した情報の利用について"><a href="#2-Bing-Search-API-で取得した情報の利用について" class="headerlink" title="(2) Bing Search API で取得した情報の利用について"></a>(2) Bing Search API で取得した情報の利用について</h2><p>Bing Search API は Cognitive Services とは異なる利用条件が設定されています。</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-web-search/use-display-requirements">Bing Search API use and display requirements</a></li></ul><p>特に多くお問い合わせいただく内容として、Bing Search API の検索結果を機械学習もしくはそれに類する処理で使用することは禁止されています。また特定のシナリオついて、技術サポート窓口で利用の可否を回答することはできませんので、必要に応じて法務部門や顧問弁護士等の専門家にご相談いただき、利用者の責任においてご判断ください。</p><ul><li><a href="https://azure.microsoft.com/ja-jp/support/legal/">Microsoft Azure の法的情報</a></li></ul><h2 id="3-Bing-Search-API-で検索対象になる情報について"><a href="#3-Bing-Search-API-で検索対象になる情報について" class="headerlink" title="(3) Bing Search API で検索対象になる情報について"></a>(3) Bing Search API で検索対象になる情報について</h2><p>Bing Search API は<a href="http://www.bing.com/">一般向けの Bing</a> と同じ検索インデックスを使用しているため、インデックスに含まれていない Web ページやコンテンツは検索の対象となりません。すなわち、通常の Bing で検索できない情報は Bing Search API の検索結果にも含まれません。これは Bing Custom Search についても同様です。ご自身が管理しているコンテンツを Bing のインデックスに追加するための具体的な手法 (いわゆる検索エンジン対策, SEO) については Azure サポート プランの対象外となるため、Bing Webmaster へお問い合わせください。</p><p>Bing Webmaster について:</p><ul><li><a href="https://www.bing.com/webmasters/about">Bing Webmaster Tools</a></li><li><a href="https://www.bing.com/webmasters/help/webmaster-support-24ab5ebf">Bing Webmaster Support</a></li></ul><p>Bing Custom Search について:</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-custom-search/how-to/define-your-custom-view">Configure your Bing Custom Search instance</a></li></ul><hr><p><code>変更履歴</code><br><code>2021/04/30 created by Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
          <category> Bing Search API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bing Search API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QnA Maker における Excel ファイルを使用した QnA ペアの追加について</title>
      <link href="/blog/2021/02/03/QnA-Maker-Import-Excel/"/>
      <url>/blog/2021/02/03/QnA-Maker-Import-Excel/</url>
      
        <content type="html"><![CDATA[<p>Excel ファイルを利用して日本語の QnA ペアを追加する際の注意事項についてご紹介します。</p><span id="more"></span><br><hr><h1 id="Excel-ファイルを利用した場合の注意事項"><a href="#Excel-ファイルを利用した場合の注意事項" class="headerlink" title="Excel ファイルを利用した場合の注意事項"></a>Excel ファイルを利用した場合の注意事項</h1><p>Excel ファイルを利用して日本語の漢字を含める質問と回答を登録する際に、以下の図のように、登録された質問と回答の末尾に漢字のふりがなが付いていることがあります。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img01.png" width=800px>  <p>また、上記の図では、Excel ファイルの 「Prompts」 列に入っている、漢字を含める内容がマルチターンの Prompts として反映されていません。  </p><p>この事象の原因としては、Excel 上で漢字を入力した際に自動的に付加されたふりがな (ルビ) が QnA Maker によって抽出されたためと想定されます。  </p><ul><li><a href="https://support.microsoft.com/ja-jp/office/%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E6%96%87%E5%AD%97%E5%88%97%E3%81%AB%E3%81%B5%E3%82%8A%E3%81%8C%E3%81%AA-%E3%83%AB%E3%83%93-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B-673b30ed-6bbd-4759-870f-0e5616955e9a">日本語の文字列にふりがな (ルビ) を使用する</a></li></ul><blockquote><p>シート データを並べ替える場合、日本語データは既定でふりがなによって並べ替えられます。 正しいふりがながそれらを使用する文字に使用されている場合、日本語の用語は、国語辞書に現れるのと同じ順序で並べ替えられます。<br><br>(中略)<br><br>ふりがなを日本語版の Excel で表示し、漢字 (日本語で使用される漢字) を入力すると、Excel はふりがなを自動的にガイドに追加します。  </p></blockquote><p>これは以下の図のように、Excel 上で漢字のふりがなを表示することで確認できます。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img02.png" width=800px>   <p>現状 QnA Maker は Excel のふりがなも抽出するため、Excel が自動的に付与したふりがなを削除しない状態で、QnA Maker ポータルの [+Add file] もしくは [Import knowledge base] の機能で QnA ペアを追加した場合は、漢字のふりがなも質問と回答に含まれます。  </p><p>対処策としては、Excel ファイルからふりがなを削除することになりますが、以下の図ように、ふりがなを含むセルをコピーして別のセルへ「数式」として貼り付けると、ふりがなの部分はコピーされませんので、一括削除のアイデアとしてご参考ください。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img03.png" width=800px>    <p>上記のように、ふりがなを削除した状態の Excel ファイルを利用して質問と回答を追加した場合は、以下の通り漢字のふりがなは表示されません。また、Excel の「Prompts」列の内容もマルチターンの Prompts として反映されるようになります。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img04.png" width=800px>  <br><hr><p><code>変更履歴</code><br><code>2021/02/03 created by Chao</code><br><code>2024/05/20 modified by Uehara</code></p>]]></content>
      
      
      <categories>
          
          <category> QNA Maker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> QnA ペアの追加 </tag>
            
            <tag> Excel ファイル </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webポータル画面が期待通りに表示されない場合の確認方法</title>
      <link href="/blog/2020/11/11/not-expected-display-on-the-webbrowser/"/>
      <url>/blog/2020/11/11/not-expected-display-on-the-webbrowser/</url>
      
        <content type="html"><![CDATA[<p>Web ポータル画面が 『プルダウンリストに選択肢が表示されるはずなのに、表示されない』 など、期待通りに表示されない場合に確認するポイントをご紹介します。</p><span id="more"></span><br><p>Coginitive Services の一部には、固有の Web ポータル画面を持つサービスがあります。<br>Azure ポータル画面や、それらサービス固有の Web ポータル画面で期待通りの画面表示とならない場合には、まず以下3点のポイントを確認してみてください。<br>（以下の画像は、Metrics Advisor サービスのポータル画面における画面表示例です）　　</p><p><img src="https://jpaiblog.github.io/images/not-expected-display-on-the-webbrowser/browser01.jpg" alt="browser01" title="browser01"> 　</p><ol><li><a href="#web-%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%81%8B%E3%82%89%E6%9C%80%E6%96%B0%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">Webブラウザーの言語翻訳機能の状態を確認する</a></li><li><a href="#web-%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%81%AE%E8%A8%80%E8%AA%9E%E7%BF%BB%E8%A8%B3%E6%A9%9F%E8%83%BD%E3%81%AE%E7%8A%B6%E6%85%8B%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">Webブラウザーから最新のデータにアクセスして確認する</a></li><li><a href="#%E7%8F%BE%E5%9C%A8%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B-web-%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E4%BB%A5%E5%A4%96%E3%81%AE%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">現在利用しているWebブラウザー以外のブラウザーを使用して確認する</a></li></ol><hr><h1 id="Web-ブラウザーの言語翻訳機能の状態を確認する"><a href="#Web-ブラウザーの言語翻訳機能の状態を確認する" class="headerlink" title="Web ブラウザーの言語翻訳機能の状態を確認する"></a>Web ブラウザーの言語翻訳機能の状態を確認する</h1><p>ブラウザー上で言語翻訳ツールなどをお使いでしたら、その機能が事象に影響している可能性があります。<br>翻訳機能を使用しない状態で画面表示をご確認ください。</p><hr><h1 id="Web-ブラウザーから最新のデータにアクセスして確認する"><a href="#Web-ブラウザーから最新のデータにアクセスして確認する" class="headerlink" title="Web ブラウザーから最新のデータにアクセスして確認する"></a>Web ブラウザーから最新のデータにアクセスして確認する</h1><p>Web ブラウザーがローカルに保存したキャッシュデータ等を使用しているために、古い状態のデータが画面表示されている可能性があります。  </p><p><img src="https://jpaiblog.github.io/images/not-expected-display-on-the-webbrowser/browser02.jpg" alt="browser02" title="browser02"></p><p>インターネット上の最新のデータにアクセスして画面表示が行えるよう、以下をご確認ください。</p><p>(1) Web ブラウザーのプライベート ブラウジングを用いて確認する  </p><p>プライベート ブラウジングでは、閲覧履歴、ダウンロード履歴、キャッシュ、Cookie などを保存せずに Web サイトを閲覧可能となります。 </p><p>Microsoft Edge をご利用の場合、以下のドキュメントの手順に添って、InPrivate ブラウズを利用してください。  </p><ul><li><a href="https://support.microsoft.com/ja-jp/help/4026200/microsoft-edge-browse-inprivate">Microsoft Edge で InPrivate ブラウズを使う</a></li></ul><p>Google Chrome をご利用の場合、以下の Google 社のヘルプドキュメントの手順に添って、シークレットブラウジングを利用してください。  </p><ul><li><a href="https://support.google.com/chrome/answer/95464?hl=ja">(Google Chrome ヘルプ) シークレット ブラウジング</a></li></ul><p>(2) ブラウザーのキャッシュを削除してから確認する </p><p>Microsoft Edge をご利用の場合、以下のドキュメント以下のドキュメントの [キャッシュされたデータとファイル] にて削除してください。  </p><ul><li><a href="https://support.microsoft.com/ja-jp/help/10607/microsoft-edge-view-delete-browser-history">Microsoft Edge の閲覧履歴を表示または削除する</a></li></ul><p>Google Chrome をご利用の場合、以下の Google 社のヘルプドキュメントの手順に添って削除してください。  </p><ul><li><a href="https://support.google.com/accounts/answer/32050">(Google Chrome ヘルプ) キャッシュと Cookie の消去</a></li></ul><hr><h1 id="現在利用している-Web-ブラウザー以外のブラウザーを使用して確認する"><a href="#現在利用している-Web-ブラウザー以外のブラウザーを使用して確認する" class="headerlink" title="現在利用している Web ブラウザー以外のブラウザーを使用して確認する"></a>現在利用している Web ブラウザー以外のブラウザーを使用して確認する</h1><p>現在利用している Web ブラウザー以外のブラウザーを使用した場合に、画面表示が変わるかどうかご確認ください。</p><p>原則として、次のブラウザーの最新バージョンがサポートされています。</p><ul><li>Microsoft Edge</li><li>Chrome</li><li>Firefox</li></ul><p>古いバージョンのブラウザーでは新機能に対応していないため、表示不具合に加えて、Javascript 実行エラーを含めた機能不具合が生じる可能性がございます。</p><hr><p><code>変更履歴</code><br><code>2020/11/11 created by Uehara</code><br><code>2023/02/24 modified by Uehara</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cognitive Services </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Translator Text API の翻訳文字数の確認方法</title>
      <link href="/blog/2020/05/28/TranslatorTextAPI-char-translated/"/>
      <url>/blog/2020/05/28/TranslatorTextAPI-char-translated/</url>
      
        <content type="html"><![CDATA[<p>Translator Text API の翻訳文字数の確認方法と、参考情報をご紹介します。</p><ol><li><a href="#%E7%BF%BB%E8%A8%B3%E6%96%87%E5%AD%97%E6%95%B0%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E7%A2%BA%E8%AA%8D%E6%89%8B%E9%A0%86">翻訳文字数データの確認手順</a></li><li><a href="#%E7%BF%BB%E8%A8%B3%E6%96%87%E5%AD%97%E6%95%B0%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A8%E3%81%97%E3%81%A6%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B%E6%89%8B%E9%A0%86">翻訳文字数データをファイルとしてダウンロードする手順</a></li><li><a href="#%EF%BC%88%E5%8F%82%E8%80%83%E6%83%85%E5%A0%B1%EF%BC%89%E6%96%87%E5%AD%97%E6%95%B0%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E6%96%B9%E6%B3%95%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E5%85%AC%E9%96%8B%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88">（参考情報）文字数カウント方法に関する公開ドキュメント</a> <span id="more"></span><br></li></ol><hr><h1 id="翻訳文字数データの確認手順"><a href="#翻訳文字数データの確認手順" class="headerlink" title="翻訳文字数データの確認手順"></a>翻訳文字数データの確認手順</h1><p>(1) Azure Portal 上で、対象のTranslator Text API のリソースを選択します。<br>(2) [監視] ブレードの [メトリック] をクリックします。<br>(3) 表示された、画面中央の [メトリック] から [Text Characters Translated] または、カスタム翻訳を行った文字数の確認に関しては [Text Custom Characters Translated] を選択します。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-3.jpg" alt="char-translated-1-3" title="char-translated-1-3">  </p><p>(4) 画面右上にある [現地時刻: 過去 24 時間 (自動)] をクリックし、表示されたポップアップから希望の時間範囲と粒度を設定します。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-4.jpg" alt="char-translated-1-4" title="char-translated-1-4">  </p><p>(5) グラフ上に指定した期間の翻訳文字数が表示されます。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-5.jpg" alt="char-translated-1-5" title="char-translated-1-5">  </p><p>(6) グラフの中で確認したい時点にカーソルをあてると、その時間帯（指定した時間の粒度単位）に絞って、翻訳文字数を表示することができます。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-6.jpg" alt="char-translated-1-6" title="char-translated-1-6">  </p><p>翻訳文字数のグラフを表示する際に設定したメトリック [Text Characters Translated] の説明は、下記の公開ドキュメントを参照ください。  </p><ul><li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/reference/supported-metrics/microsoft-cognitiveservices-accounts-metrics">Supported metrics for Microsoft.CognitiveServices&#x2F;accounts</a><blockquote><p>Text Characters Translated</p><blockquote><p>Number of characters in incoming text translation request.</p></blockquote></blockquote></li></ul><hr><h1 id="翻訳文字数データをファイルとしてダウンロードする手順"><a href="#翻訳文字数データをファイルとしてダウンロードする手順" class="headerlink" title="翻訳文字数データをファイルとしてダウンロードする手順"></a>翻訳文字数データをファイルとしてダウンロードする手順</h1><p>(1) “１．翻訳文字数データの確認手順” に沿って、翻訳文字数のグラフを表示します。<br>(2) 表示された翻訳文字数のグラフ上部の　[共有] プルダウンから [Excelへのダウンロード] を選択します。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char2-2.jpg" alt="char-translated-2-2" title="char-translated-2-2">  </p><p>(3) 翻訳文字数のグラフを表示する際に設定した “メトリック”, “時間の範囲および粒度” のデータのExcelファイルがダウンロードされます。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char2-3.jpg" alt="char-translated-2-3" title="char-translated-2-3">  </p><hr><h1 id="（参考情報）文字数カウント方法に関する公開ドキュメント"><a href="#（参考情報）文字数カウント方法に関する公開ドキュメント" class="headerlink" title="（参考情報）文字数カウント方法に関する公開ドキュメント"></a>（参考情報）文字数カウント方法に関する公開ドキュメント</h1><p>どのようにAPIが呼び出されるかによって、カウントされる文字数は変わります。<br>例えば、1文字入力の場合でも、その後ろに空白が付与されたままの状態のテキストがAPIに渡された場合、空白も含めた文字数がカウントされます。‘A’ のような状態では、1文字とカウントされますが、後ろに3つ空白を付与した ‘A   ’ のような状態の場合は、4文字とカウントされます。空白の他にも、カウントされる対象がございますので、文字数カウント方法に関する詳細は、下記の公開ドキュメントをご確認ください。  </p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/translator-faq">よく寄せられる質問 - Translator API：Translator では文字をどのようにカウントしますか。</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/05/28 created by Uehara</code><br><code>2022/01/25 modified by Uehara</code><br><code>2023/02/14 modified by Uehara</code><br><code>2024/05/20 modified by Uehara</code></p>]]></content>
      
      
      <categories>
          
          <category> Translator Text API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Translator Text API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure の関連ポータル サイトで一部の Azure サブスクリプションやリソースが表示されない事象の原因と対処策</title>
      <link href="/blog/2020/05/14/cognitive-portal-sub-not-found/"/>
      <url>/blog/2020/05/14/cognitive-portal-sub-not-found/</url>
      
        <content type="html"><![CDATA[<p>Azure の関連ポータル サイトで Azure サブスクリプションやリソースが表示されない原因と対処策について解説します。</p><span id="more"></span><br><hr><p>Azure で提供されているサービスの一部は、Azure ポータル以外に独自のポータル サイトを提供しています。<br>より具体的に Cognitive Services を例に挙げると以下のようなポータル サイトが存在します。</p><ul><li>QnA Maker: <a href="https://www.qnamaker.ai/">https://www.qnamaker.ai/</a></li><li>Custom Vision: <a href="https://www.customvision.ai/">https://www.customvision.ai/</a></li><li>Speech Services: <a href="https://speech.microsoft.com/">https://speech.microsoft.com/</a></li><li>LUIS: <a href="https://www.luis.ai/">https://www.luis.ai/</a></li></ul><p>これらのポータル サイトは Azure と連携しており、サインインしたユーザーの Azure サブスクリプションやリソースを、ポータル内で表示・操作することができます。</p><p>しかしながら、例えば、以下のように複数の Azure AD ディレクトリ (contoso.onmicrosoft.com と fabrikam.onmicrosoft.com) に関連付けられているユーザー アカウント (user@contoso.onmicrosoft.com) があるとします。この場合、ロールベースのアクセス制御 (RBAC) の設定が適切でも、上記のポータル サイトでサブスクリプションやリソースが表示されないことがあります。</p><p><img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/cognitive-portal-AAD-tenant.png" alt="Cognitive Portal Sign-in"></p><h3 id="■原因"><a href="#■原因" class="headerlink" title="■原因"></a>■原因</h3><p>これらのポータルサイトへ Azure AD の組織アカウントでアカウントサインインする場合、特定の Azure AD ディレクトリに依存しない common エンドポイント (login.microsoftonline.com&#x2F;<strong>common</strong>&#x2F;…) が使用されます。この時、サインイン先となるのは、ホーム ディレクトリ  (上記の図では ディレクトリ A の contoso.onmicrosoft.com) となります。通常はこの挙動で問題になることはありません。</p><p>しかし、別のディレクトリにゲスト ユーザーとして招待されることで、複数のディレクトリと関連付けられている場合、ホーム ディレクトリ以外のディレクトリ (上記の図では Bの fabrikam.onmicrosoft.com) に対するサインインは行われないため、そのディレクトリに対するアクセス トークンは取得されません。それにより、ポータルサイト上ではディレクトリ B に紐づいたサブスクリプションやリソースが表示されない事象が発生します。これは Azure AD ディレクトリへのサインインを伴うアクセス権の管理上想定される動作です。</p><h3 id="■対処策"><a href="#■対処策" class="headerlink" title="■対処策"></a>■対処策</h3><p>ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得するには、ディレクトリ B へのサインインを明示的に完了する必要があります。</p><h4 id="方法-1-ポータル-サイト内でディレクトリを変更する"><a href="#方法-1-ポータル-サイト内でディレクトリを変更する" class="headerlink" title="方法 1. ポータル サイト内でディレクトリを変更する"></a>方法 1. ポータル サイト内でディレクトリを変更する</h4><p>ポータル サイトによっては、サイト内でディレクトリを切り替える機能が用意されています。この機能を利用してディレクトリ B に切り替えます。</p><p>例. <a href="https://www.customvision.ai/">Custom Vision ポータル</a>:</p><p><img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/custom-vision-dir-switch.png" alt="Custom Vision portal dir switch"></p><p>これはディレクトリ (テナント) 固有のサインイン エンドポイント (login.microsoftonline.com&#x2F;**&lt;テナント ID またはテナント名&gt;&#x2F;**…) を使用してサインインすることで実現されています。</p><p>ご参考: <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/active-directory-v2-protocols#endpoints">Azure AD のサインイン エンドポイント</a></p><h4 id="方法-2-Azure-ポータルでディレクトリを変更する"><a href="#方法-2-Azure-ポータルでディレクトリを変更する" class="headerlink" title="方法 2. Azure ポータルでディレクトリを変更する"></a>方法 2. Azure ポータルでディレクトリを変更する</h4><p>ポータル サイト内でディレクリを切り替える機能が用意されていない場合は、Azure ポータル (<a href="https://portal.azure.com/">https://portal.azure.com</a>) を使ってディレクトリの切り替えを行います。そして、各サービスのポータルサイト (<a href="https://www.qnamaker.ai/">QnA Maker</a> など) にアクセスします。</p><p>特にディレクトリ B で多要素認証 (MFA) が強制されているなどサインイン方法に制約がある場合は、こちらの方法をお試しください。</p><p>Azure ポータルでのディレクトリの切り替え方法は次の手順のようになります。</p><ol><li><p>Azure ポータルの画面右上のユーザーアイコンから「ディレクトリの切り替え」を選択します</p><p> <img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/azure-portal-dir-switch-1.png" alt="Azure portal dir switch 1"></p></li><li><p>Azure サブスクリプションが存在するディレクトリを選択してサインインを完了します</p><p> <img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/azure-portal-dir-switch-2.png" alt="Azure portal dir switch 2"></p></li><li><p>Web ブラウザーの別のタブで対象のポータル サイト (例. <a href="https://www.qnamaker.ai/">QnA Maker</a>) を開きます</p></li></ol><p>もし上記の手順でもポータル サイトで Azure サブスクリプションやリソースが表示されない場合、既定のディレクトリを Azure サブスクリプションが紐づいたディレクトリに変更してから、そのディレクトリに切り替えることで解消するかご確認ください。</p><h3 id="■-補足"><a href="#■-補足" class="headerlink" title="■ 補足"></a>■ 補足</h3><p>ポータル サイト内でディレクトリを切り替える機能が用意されておらず、ホーム ディレクトリでサインインした場合でも、ゲスト ユーザーとして招待されているディレクトリ B に関連付けられた Azure サブスクリプションやリソースがポータル サイト上で表示されることがあります。</p><p>これは他のサイト、例えば Azure ポータルでディレクトリ B にサインインしていた場合、ブラウザーにディレクトリ B の認証情報がキャッシュされ、ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得できるためです。</p><p>ディレクトリ B で多要素認証 (MFA) が強制されているなど、サインイン方法に制約がある場合は、キャッシュされたサインイン情報が有効でないため、方法 2 のように Azure ポータルで MFA などの認証を完了する必要があります。  </p><hr><p><code>変更履歴</code><br><code>2020/05/14 created by Chao</code><br><code>2020/05/14 modified by Nakagami</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
            <tag> QnA Maker </tag>
            
            <tag> LUIS </tag>
            
            <tag> Speech Services </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cognitive Serivces で使用する API テスト ページについて</title>
      <link href="/blog/2020/04/30/test-APIs/"/>
      <url>/blog/2020/04/30/test-APIs/</url>
      
        <content type="html"><![CDATA[<p>Cognitive Serivces の API について、テスト実行用の参考サイトを紹介します。</p><span id="more"></span><br><hr><h4 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h4><ul><li><p>Cognitive Serivces の API は複数あります。どのような API があるかは以下サイトを参照ください。<br><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/welcome">Azure Cognitive Services とは</a>  </p></li><li><p>Azure REST API のリファレンス サイトより、Cognitive Services の REST API を確認できます。いくつかのサービスは、こちらのサイトから REST API の実行が可能です。<br><a href="https://docs.microsoft.com/en-us/rest/api/azure/">Azure REST API Reference</a><br><a href="https://docs.microsoft.com/en-us/rest/api/cognitiveservices/">Azure Cognitive Services REST API reference</a><br><a href="https://docs.microsoft.com/en-us/rest/api/cognitiveservices-bingsearch/">Azure Cognitive Services - Bing Search REST API reference</a>  </p></li><li><p>Cognitive Services 関連の API をまとめたサイトにも REST API を実行可能なページが用意されています。https:&#x2F;&#x2F; に続くリージョンの指定によっては API が用意されていない場合があるため、代表的な 4 リージョンを紹介します。<br><a href="https://westus.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (westus)</a><br><a href="https://westus2.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (westus2)</a><br><a href="https://southcentralus.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (southcentralus)</a><br><a href="https://westeurope.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (westeurope)</a>  </p></li><li><p>REST API の実行には API キーが必要になります。以下のサイトから API キーを取得できます。こちらにないサービスについては、各サービスのクイック スタート ページ等から利用方法を参照ください。<br><a href="https://azure.microsoft.com/ja-jp/try/cognitive-services/">Cognitive Services を試す</a></p></li></ul><p><br>各 API のリンクを紹介します。 掲載されていないサービスは上述で列記したサイトより検索ください。  </p><hr><h4 id="Computer-Vision"><a href="#Computer-Vision" class="headerlink" title="Computer Vision"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/computer-vision/">Computer Vision</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Computer+Vision">Cognitive Services APIs (?pattern&#x3D;Computer%20Vision)</a></li></ul><hr><h4 id="Custom-Vision-Service"><a href="#Custom-Vision-Service" class="headerlink" title="Custom Vision Service"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/Custom-Vision-Service/">Custom Vision Service</a></h4><ul><li><a href="https://southcentralus.dev.cognitive.microsoft.com/docs/services?pattern=Custom_Vision">Cognitive Services APIs (?pattern&#x3D;Custom_Vision)</a></li></ul><hr><h4 id="Face"><a href="#Face" class="headerlink" title="Face"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/face/">Face</a></h4><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=Face+API">Cognitive Services APIs (?pattern&#x3D;Face+API)</a></li></ul><hr><h4 id="Form-Recognizer"><a href="#Form-Recognizer" class="headerlink" title="Form Recognizer"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/form-recognizer/">Form Recognizer</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Form+Recognizer">Cognitive Services APIs (?pattern&#x3D;Form+Recognizer)</a></li></ul><hr><h4 id="Speech-Service"><a href="#Speech-Service" class="headerlink" title="Speech Service"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/">Speech Service</a></h4><p>Speech Service はさらに複数のサービス・機能に分かれます。利用可能な REST API の直リンクを以下に列挙します。サービス、機能の一覧は <a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/overview">こちら</a> をご確認ください。  </p><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Speech+to+Text">Cognitive Services APIs (?pattern&#x3D;Speech+to+Text)</a>  </li><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/rest-speech-to-text">Speech to Text REST API</a>  </li><li><a href="https://signature.centralus.cts.speech.microsoft.com/UI/index.html">Conversation transcription (Preview)</a></li><li><a href="https://docs.microsoft.com/ja-jp/rest/api/speakerrecognition/">Speaker Recognition</a></li></ul><hr><h4 id="Speaker-Recognition"><a href="#Speaker-Recognition" class="headerlink" title="Speaker Recognition"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speaker-recognition/home">Speaker Recognition</a></h4><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=Speaker+Recognition">Cognitive Services APIs (?pattern&#x3D;Speaker+Recognition)</a></li></ul><hr><h4 id="Language-Understanding-LUIS"><a href="#Language-Understanding-LUIS" class="headerlink" title="Language Understanding - LUIS"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/">Language Understanding - LUIS</a></h4><p>利用可能な REST API の仕様について <a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/developer-reference-resource#rest-specifications">こちら</a> をご確認ください。  </p><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=LUIS">Cognitive Services APIs (?pattern&#x3D;LUIS)</a></li></ul><hr><h4 id="QnA-Maker"><a href="#QnA-Maker" class="headerlink" title="QnA Maker"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/">QnA Maker</a></h4><ul><li><a href="https://docs.microsoft.com/ja-jp/rest/api/cognitiveservices-qnamaker/">QnA Maker REST APIリファレンス</a></li></ul><hr><h4 id="Text-Analytics"><a href="#Text-Analytics" class="headerlink" title="Text Analytics"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/text-analytics/">Text Analytics</a></h4><ul><li><a href="https://centralus.dev.cognitive.microsoft.com/docs/services?pattern=Text+Analytics">Cognitive Services APIs (?pattern&#x3D;Text+Analytics)</a></li></ul><hr><h4 id="Anomaly-Detector"><a href="#Anomaly-Detector" class="headerlink" title="Anomaly Detector"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/anomaly-detector/">Anomaly Detector</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Anomaly+Detector">Cognitive Services APIs (?pattern&#x3D;Anomaly+Detector)</a></li></ul><hr><h4 id="Content-Moderator"><a href="#Content-Moderator" class="headerlink" title="Content Moderator"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/content-moderator/">Content Moderator</a></h4><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/content-moderator/api-reference">Content Moderator API リファレンス</a></li><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=Content+Moderator">Cognitive Services APIs (?pattern&#x3D;Content+Moderator)</a></li></ul><hr><h4 id="Metrics-Advisor"><a href="#Metrics-Advisor" class="headerlink" title="Metrics Advisor"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/metrics-advisor/">Metrics Advisor</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Metrics+Advisor">Cognitive Services APIs (?pattern&#x3D;Metrics+Advisor)</a></li></ul><hr><h4 id="Personalizer"><a href="#Personalizer" class="headerlink" title="Personalizer"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/personalizer/">Personalizer</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Personalizer">Cognitive Services APIs (?pattern&#x3D;Personalizer)</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/04/30 created by Mochizuki</code><br><code>2020/05/01 modified by Mochizuki</code><br><code>2020/10/19 modified by Mochizuki</code><br><code>2020/11/02 modified by Mochizuki</code><br><code>2022/06/08 modified by Mochizuki</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ポータルにサインインできない事象について (AADSTS650051)</title>
      <link href="/blog/2020/03/07/error-AADSTS650051/"/>
      <url>/blog/2020/03/07/error-AADSTS650051/</url>
      
        <content type="html"><![CDATA[<p>エラー コード AADSTS650051 を含むメッセージが出力し、製品ポータル (<a href="http://www.luis.ai/">www.luis.ai</a> や <a href="http://www.customvision.ai/">www.customvision.ai</a> など) へのサインインが失敗する場合の対処方法を紹介します。</p><span id="more"></span><br><hr><p>下記エラーメッセージは (ドメイン名) の DNS 名に紐づく Azure AD のテナントが、管理者不在のバイラル (非管理) テナントと呼ばれる状態 (unmanaged state) であり、それが原因でポータルへサインインできないことを意味します。  </p><blockquote><p>ErrorDescription’: ‘AADSTS650051: Using application ‘&lt;ポータル FQDN&gt;’ is currently not supported for your organization &lt;ドメイン名&gt; because it is in an unmanaged state. An administrator needs to claim ownership of the company by DNS validation of &lt;ドメイン名&gt; before the application &lt;ポータル FQDN&gt; can be provisioned.&#96;</p></blockquote><p>類似のサービスに関する記事とはなりますが、詳細と対処方法は以下をご参照ください。  </p><ul><li><a href="https://docs.microsoft.com/ja-jp/archive/blogs/jpcognitiveblog/cannot-signin-custom-vision-service-portal">非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法</a></li></ul><p>この問題は、当該テナントに紐づく (ドメイン名) のドメインの所有確認を行うことで解消されるため、以下のドキュメントの “3. 「管理者になる」メニューを実行します。” まで実施ください。  </p><ul><li><a href="https://docs.microsoft.com/ja-jp/archive/blogs/exchangeteamjp/domain-registered-by-self-service-sign-up">セルフサービス サインアップで登録されたドメインの対処方法</a></li></ul><p>なお、この問題を解消するだけであれば、手順 4 以降の作業は必要ありませんが、手順 3 を実施する段階で DNS の設定変更が必要となります。Azure AD テナントやドメインの管理者にて確認ください。<br><br></p><p>関連する公開情報:</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/b2b/troubleshoot#you-receive-an-aadsts65005-error-when-you-try-to-log-in-to-an-azure-resource">Azure リソースにログインしようとすると “AADSTS65005” エラーを受け取ります</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/users-groups-roles/domains-admin-takeover">Azure Active Directory の非管理対象ディレクトリを管理者として引き継ぐ</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/03/07 created by Mochizuki</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AADSTS650051 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QNA Maker の管理サービス (Cognitive Services リソース) のリージョンについて</title>
      <link href="/blog/2020/03/03/QNA-management-service/"/>
      <url>/blog/2020/03/03/QNA-management-service/</url>
      
        <content type="html"><![CDATA[<p>QNA Maker の管理サービス (Cognitive Services リソース) についてご紹介します。</p><span id="more"></span><br><hr><p>QnA Maker サービスの全体構成は下記ドキュメントの図を参照ください。   </p><ul><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/concepts/azure-resources">QnA Maker 用の Azure リソース</a></p><p> <img src="https://jpaiblog.github.io/images/QNA-management-service/key-management.png" alt="QNA Maker"></p></li></ul><p>Cognitive Services としてのリソースは、図中の右上の QnA Maker Subscription に相当します。例えば、ポータルを操作して KB を編集した場合、米国西部リージョンにおいてホストされている API 群が呼び出されます (5. Manage KB in portal or via APIs)。この API 群を別リージョンに移行することができないため、<a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/concepts/azure-resources#management-service-region">こちらのサイト</a> の記載の通り、Cognitive Services リソースは米国西部リージョン固定になります。  </p><p>米国西部リージョンにある API のバックエンドから、Web Apps 上でホストされた QnA Maker ランタイムに対してアクセスし、Q&amp;A の追加や削除といった操作が行われます。なお、実際の KB のコンテンツ (Q&amp;A、メタデータ等) は Azure Search に保存されており、ユーザーのチャットログは Application Insights に保存されているため、顧客データは米国西部リージョンには保存されません。  </p><p>※ 管理サービスで使用する API の詳細は以下サイトを参照ください。   </p><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services/5a93fcf85b4ccd136866eb37/operations/5ac266295b4ccd1554da75ff">QnA Maker V4.0</a></li></ul><p>KB を公開した後の、ボット等のアプリケーションからの問い合わせ (4. User QnA endpoint in Bot) は GenerateAnswer API が使用されます。これは QnA Maker ランタイム (Web Apps) に対して直接アクセスするため、米国西部リージョンを経由することはありません。</p><p>※ GenerateAnswer API の詳細は以下サイトをご参照ください。   </p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/how-to/metadata-generateanswer-usage?tabs=v1">GenerateAnswer API およびメタデータを使って回答を取得する</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/03/03 created by Mochizuki</code>  </p>]]></content>
      
      
      <categories>
          
          <category> QNA Maker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 管理サービス </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>過去ブログについて</title>
      <link href="/blog/2020/01/12/past-blog/"/>
      <url>/blog/2020/01/12/past-blog/</url>
      
        <content type="html"><![CDATA[<p>過去のブログ情報を紹介します。</p><span id="more"></span><br><hr><h2 id="Cognitive-Services"><a href="#Cognitive-Services" class="headerlink" title="Cognitive Services"></a>Cognitive Services</h2><ul><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/255a225d-24e5-4e21-ad28-7fab33088131/translator-text-api-?forum=cognitivesupportteamja">Translator Text API の翻訳文字数の確認方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/fee57b8d-8d08-4036-9d2e-ad4f48812624/open-api-testing-console?forum=cognitivesupportteamja">Open API Testing Console</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/9555e55e-2af0-4130-948a-74ee3f6d349e/http-401-access-denied-invalid-subscription-key-?forum=cognitivesupportteamja">HTTP 401 Access Denied (invalid subscription key) のエラーが発生した場合の切り分け方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/9586428d-1ad8-4838-bac8-b37da05d9d47/cognitive-services-?forum=cognitivesupportteamja">Cognitive Services の料金について</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/1fc6d90a-f335-4a51-bbb4-7c168bf8358e/luis-wwwluisai-?forum=cognitivesupportteamja">LUIS ポータル (www.luis.ai) にサインインできない場合の対処方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/bcf0ea4b-04f2-4b81-9963-34d85b3594ef/qna-maker-api-v4-azure-search-?forum=cognitivesupportteamja">QnA Maker API V4 (一般公開版) の Azure Search に関するよくあるご質問</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/d4235f66-2c6d-4ad8-87ba-ec859e5bb33f/-custom-vision-service-?forum=cognitivesupportteamja">非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/d1b413b3-d0a7-4fb9-9938-01a52cb5f914/qna-maker-api-v4-?forum=cognitivesupportteamja">QnA Maker API V4 (一般公開版) のよくあるご質問</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/e9917891-e99e-481f-a32a-34f853fdd22b/bing-speech-api-api-10-15-?forum=cognitivesupportteamja">Bing Speech API の新規 API キー作成は 10 月 15 日で終了しました</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/5b3b97c3-532e-489c-b0cb-5546a2988427/cognitive-services-?forum=cognitivesupportteamja">Cognitive Services の技術サポートのお問い合わせ方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/ecab7e31-dddb-48bf-8a8f-7a9f347ae1b5/cognitive-services-tls-12-?forum=cognitivesupportteamja">Cognitive Services への接続には TLS 1.2 をご利用ください</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/01/12 created by Mochizuki</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 過去ブログ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jpaiblog について</title>
      <link href="/blog/2020/01/01/about-jpaiblog/"/>
      <url>/blog/2020/01/01/about-jpaiblog/</url>
      
        <content type="html"><![CDATA[<p>日本マイクロソフトの Cognitive Serivce に関するサポート情報のブログです。</p><h3 id="公開日"><a href="#公開日" class="headerlink" title="公開日"></a>公開日</h3><p>2020 年 1 月 1 日より公開いたしました。</p><h3 id="活動について"><a href="#活動について" class="headerlink" title="活動について"></a>活動について</h3><p>製品のサポート メンバーによって運用されております。仕様に関する情報やトラブル シューティングの手順、実装におけるワンポイント アドバイスを公開いたします。</p><h3 id="留意事項"><a href="#留意事項" class="headerlink" title="留意事項"></a>留意事項</h3><p>サイトのコンテンツや情報において、可能な限り正確な情報を掲載し、更新するよう努めております。しかしながら、状況の変化や情報が古くなることにより、必ずしもお客様環境に適用できない情報となる場合がございます。恐れ入りますが、予めご留意くださいますようお願い申し上げます。</p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> はじめに </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
