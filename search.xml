<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Azure OpenAI 関連の申請について</title>
      <link href="/blog/2023/04/21/RequestAccess-to-AzureOpenAIService/"/>
      <url>/blog/2023/04/21/RequestAccess-to-AzureOpenAIService/</url>
      
        <content type="html"><![CDATA[<p>Azure OpenAI 関連の申請について、以下にご説明します。</p><span id="more"></span><br><hr><h2 id="Azure-OpenAI-Service-の利用開始時に行う申請"><a href="#Azure-OpenAI-Service-の利用開始時に行う申請" class="headerlink" title="Azure OpenAI Service の利用開始時に行う申請"></a>Azure OpenAI Service の利用開始時に行う申請</h2><p>Azure OpenAI Service は申請フォーム 「<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR7en2Ais5pxKtso_Pz4b1_xUOFA5Qk1UWDRBMjg0WFhPMkIzTzhKQ1dWNyQlQCN0PWcu">Request Access to Azure OpenAI Service</a>」 より必要事項を入力して送信、承認されたサブスクリプションにて利用が可能になります。<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access?context=/azure/cognitive-services/openai/context/context">[1]</a>  </p><p>申請状況に関する確認はメールアドレス <a href="mailto:&#x63;&#115;&#x67;&#x61;&#116;&#x65;&#64;&#x6d;&#105;&#99;&#114;&#x6f;&#x73;&#x6f;&#102;&#x74;&#x2e;&#x63;&#111;&#109;">&#x63;&#115;&#x67;&#x61;&#116;&#x65;&#64;&#x6d;&#105;&#99;&#114;&#x6f;&#x73;&#x6f;&#102;&#x74;&#x2e;&#x63;&#111;&#109;</a> にて受け付けています。 この宛先は Azure OpenAI Service の利用申請を管理・レビューしている米国本社内の専用部門となり、公平性と独立性のために、技術サポート部門を含めた各国の他の部門はレビュープロセスに直接介入できません。 そのため、当該メールでのご質問は <strong>英語のみ</strong> となる点にご留意ください。  </p><br><hr><h2 id="用途に応じて行う申請"><a href="#用途に応じて行う申請" class="headerlink" title="用途に応じて行う申請"></a>用途に応じて行う申請</h2><h3 id="追加のユース-ケース"><a href="#追加のユース-ケース" class="headerlink" title="追加のユース ケース"></a>追加のユース ケース</h3><p>利用開始申請時に選択したユース ケースとは別に、追加でユース ケースを申請する場合、申請フォーム 「<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR7en2Ais5pxKtso_Pz4b1_xUM003VEJPRjRSOTZBRVZBV1E5N1lWMk1XUyQlQCN0PWcu">Azure OpenAI Additional Use Case Form</a>」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access?context=/azure/cognitive-services/openai/context/context">[1]</a></p><h3 id="オプトアウト"><a href="#オプトアウト" class="headerlink" title="オプトアウト"></a>オプトアウト</h3><p>弊社が定める責任ある AI の原則に従って、倫理的・社会的に問題があると考えられる利用 (abuse) を防止するために、人間によるレビューが行われる場合があります。これは要件を満たす場合にはオプトアウトすることが可能です。申請フォーム 「<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR7en2Ais5pxKtso_Pz4b1_xURE01NDY1OUhBRzQ3MkQxMUhZSE1ZUlJKTiQlQCN0PWcu">Azure OpenAI Limited Access Review: Modified Content Filters and Abuse Monitoring</a>」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/data-privacy?context=/azure/cognitive-services/openai/context/context#preventing-abuse-and-harmful-content-generation">[2]</a>  </p><ul><li>オプトアウト申請に関する FAQ   <blockquote><p>Q. オプトアウトを申請して承認されましたが、きちんと反映されているか確認したいです。確認方法はありますか？<br>A. はい、確認方法があります。<br>Abuse Monitoring は”ContentLogging”の項目が”false”となっているかを参照することで確認可能です。<a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/data-privacy#how-can-a-customer-verify-if-data-storage-for-abuse-monitoring-is-off">[2]</a><br>Content Filteringの停止はAzure OpenAI Studio [管理]-&gt;[Content Filters]よりFilteringをオフに設定可能かどうかで確認可能です。<a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/content-filters">[6]</a><br><img src="https://jpaiblog.github.io/images/RequestAccess-to-AzureOpenAIService/contentFiltering-01.png" alt="contentFiltering-01" title="contentFiltering-01"><br><br></p></blockquote></li></ul><h3 id="クォータの引き上げ"><a href="#クォータの引き上げ" class="headerlink" title="クォータの引き上げ"></a>クォータの引き上げ</h3><p>Azure OpenAI には、適用されるクォータによる制限 (モデルごとの 1 分あたりの要求数、モデルごとの 1 分あたりのトークン数、モデル デプロイの最大数 など) があります。 この引き上げを希望する場合、申請フォーム 「<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR4xPXO648sJKt4GoXAed-0pURVJWRU4yRTMxRkszU0NXRFFTTEhaT1g1NyQlQCN0PWcu">Azure OpenAI Service: Request for Quota Increase</a>」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/quotas-limits#quotas-and-limits-reference">[3]</a>   </p><ul><li>2023&#x2F;05&#x2F;23現在の状況    <blockquote><p>Azure OpenAI Service は世界中から非常に高い需要が続いています。<br>そのため、大変恐れ入りますがリソースまたはクォータの制限を引き上げる要求は、現在受付を停止しています。<br>受付が再開される時期については、今後の更新をお待ちいただけますと幸いです。<br>最新の状況については<a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/quotas-limits#how-to-request-increases-to-the-default-quotas-and-limits">Azure OpenAI Service のクォータと制限</a>のドキュメントをご参照ください。<a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/quotas-limits#how-to-request-increases-to-the-default-quotas-and-limits">[5]</a></p></blockquote></li></ul><h3 id="リソース作成数"><a href="#リソース作成数" class="headerlink" title="リソース作成数"></a>リソース作成数</h3><p>Azure OpenAI には、各リージョンに対しリソースの作成数に制限があります。 この引き上げを希望する場合、申請フォーム 「<a href="https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR4xPXO648sJKt4GoXAed-0pUN05FTFMzOTBMTFg1TzZJR01RSzdOU0M5MyQlQCN0PWcu">Azure OpenAI Service: Request for Resource Increase</a>」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/quotas-limits#quotas-and-limits-reference">[3]</a> </p><h3 id="GPT-4-モデル"><a href="#GPT-4-モデル" class="headerlink" title="GPT-4 モデル"></a>GPT-4 モデル</h3><p>GTP-4 モデルを利用する場合、申請フォーム 「<a href="https://aka.ms/oai/get-gpt4">Azure OpenAI GPT-4 Waitlist</a>」 より必要事項を入力して送信ください。<a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/concepts/models#gpt-4-models">[4]</a></p><ul><li>GPT-4の申請に関する FAQ   <blockquote><p>Q. GPT-4 の利用を申請しましたが、まだ承認されていません。いつ利用可能になりますか？<br>A. Azure OpenAI Service の GPT-4 は世界中から非常に高い需要が続いています。<br>現在はリソースを増強して既存顧客へ提供するサービスの品質を維持しながら、順次新しいお客様を受け入れています。<br>そのため、大変恐れ入りますがリクエストが承認される具体的な時期 (リードタイム) を事前にお約束することは難しい状況です。<br>最終的には希望されている全てのお客様にご利用いただけるように努力しておりますので、今後の更新をお待ちいただけますと幸いです。<br><br></p></blockquote></li></ul><hr><h2 id="関連ドキュメント"><a href="#関連ドキュメント" class="headerlink" title="関連ドキュメント"></a>関連ドキュメント</h2><ul><li><p><a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/limited-access?context=/azure/cognitive-services/openai/context/context">[1]: Limited access to Azure OpenAI Service - Azure Cognitive Services | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/data-privacy?context=/azure/cognitive-services/openai/context/context">[2]: Data, privacy, and security for Azure OpenAI Service - Azure Cognitive Services | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/quotas-limits#quotas-and-limits-reference">[3]: Azure OpenAI Service quotas and limits - Azure Cognitive Services | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/concepts/models#gpt-4-models">[4]: Azure OpenAI Service models - Azure OpenAI | Microsoft Learn</a>  </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/quotas-limits#how-to-request-increases-to-the-default-quotas-and-limits">[5]: Azure OpenAI Service quotas and limits - Azure Cognitive Services | Microsoft Learn</a>   </p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/content-filters">[6]: How to use content filters (preview) with Azure OpenAI Service - Azure OpenAI | Microsoft Learn</a>  </p></li><li><p>申請関連の FAQ については、以下のドキュメントも参考になります。<br><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-limited-access#faq-about-limited-access">Cognitive Services の制限付きアクセス機能 - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><dl><dt>制限付きアクセスに関する FAQ</dt><dd>中略<br>Q.制限付きアクセスのサービスを使用する資格があるのはだれですか?<br>Q.管理下の顧客とは? 管理下の顧客に該当するかどうかがわからない場合はどうすればよいですか?<br>Q.申請が拒否された場合、私のデータはどうなりますか?</dd></dl></blockquote></li></ul><br><hr><p><code>変更履歴</code><br><code>2023/04/21 created by Kudou</code><br><code>2023/05/23 update  by Kudou</code><br><code>2023/07/04 update  by Kudou</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Azure OpenAI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure Face API 顔認識機能の制限および利用申請について</title>
      <link href="/blog/2023/03/14/Register-for-LimitedAccessfeatures-of-FaceAPI/"/>
      <url>/blog/2023/03/14/Register-for-LimitedAccessfeatures-of-FaceAPI/</url>
      
        <content type="html"><![CDATA[<p>Azure Face API 顔認識機能の制限および、利用申請について、以下にご説明します。</p><span id="more"></span><br><hr><h1 id="Face-リソース作成日と機能制限"><a href="#Face-リソース作成日と機能制限" class="headerlink" title="Face リソース作成日と機能制限"></a>Face リソース作成日と機能制限</h1><p>2022 年 6 月より前に作成された Face リソースでは、2023 年 6 月 30 日までの間、Face API が提供する全ての機能が利用できます。<br><br>これは、Face API の機能制限に関する発表が 2022 年 6 月に行われたため、それより前に作成された Face リソースに対する約１年の移行措置です。<br><br><br>なお、移行措置は 2023年 6月 30日までには終了します。<br>それ以降にも、後述する「顔認識」機能を継続利用する場合は、利用申請および承認が必要です。<br></p><p><a href="https://azure.microsoft.com/en-us/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">Responsible AI investments and safeguards for facial recognition | Azure Blog and Updates | Microsoft Azure (Posted on June 21, 2022)</a></p><blockquote><p>Starting June 30, 2023, existing customers will no longer be able to access facial recognition capabilities if their facial recognition application has not been approved.</p></blockquote><p><a href="https://portal.azure.com/">Azure ポータル</a> で Face リソースページの [プロパティ] メニューを開くと、リソース作成日が確認できます。</p><p><img src="https://jpaiblog.github.io/images/Register-for-LimitedAccessfeatures-of-FaceAPI/face01.png" alt="face01" title="face01"></p><h1 id="Face-API-提供機能について"><a href="#Face-API-提供機能について" class="headerlink" title="Face API 提供機能について"></a>Face API 提供機能について</h1><p>Azure Face API の提供機能は、主に、以下の 2つの機能（顔検出、顔認識）に大別できます。</p><pre><code>1. 顔検出2. 顔認識</code></pre><p>上記のうち、「顔検出」（<B>Facial Detection</B>）機能には  「<B>廃止される機能</B>」 と、2023 年 6 月 30 日以降も  「<B>申請不要で利用できる機能</B>」 の 2つが含まれます。<br><br>「顔認識」 機能は、その配下の 「顔識別」 （<B>Facial identification</B>） および 「顔検証」（<B>Facial verification</B>） ともに 「<B>申請および承認が必要な機能</B>」 です。</p><p>それぞれの詳細を、以下に詳述します。</p><h1 id="廃止される機能"><a href="#廃止される機能" class="headerlink" title="廃止される機能"></a>廃止される機能</h1><h2 id="「顔検出」機能を通じて得られる顔属性の一部の情報"><a href="#「顔検出」機能を通じて得られる顔属性の一部の情報" class="headerlink" title="「顔検出」機能を通じて得られる顔属性の一部の情報"></a>「顔検出」機能を通じて得られる顔属性の一部の情報</h2><p>「顔検出」機能を通じて得られる顔属性のうち、特定の一部情報は廃止されます。詳細は以下をご参照ください。 これらは、申請を行っても利用を継続することはできません。<p><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/computer-vision/concept-face-detection#attributes">顔検出と顔属性 - Face - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><p>感情の状態やアイデンティティの属性の推測に使用できる顔認識機能は廃止されます。<br>この機能は使い方を誤ると、ステレオタイプ化、差別、サービスの不当な拒否に人々をさらす可能性があります。<br>たとえば、<B>感情、性別、年齢、笑顔、顔ひげ、髪、メイク</B> を予測する機能が該当します。<br>これらの機能を既にご利用のお客様は、廃止前の 2023 年 6 月 30 日までに、使用を中止する必要があります。</p></blockquote></p><h2 id="スナップショット機能"><a href="#スナップショット機能" class="headerlink" title="スナップショット機能"></a>スナップショット機能</h2><p>その他に、Face API データの管理機能の 1つである スナップショット機能も廃止されます。<p><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/computer-vision/how-to/migrate-face-data">サブスクリプション間で顔データを移行する - Face - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><p>スナップショット API は、2023 年 6 月 30 日にすべてのユーザーに対して廃止されます。</p></blockquote></p><h2 id="米国中北部リージョンにおける-Face-API"><a href="#米国中北部リージョンにおける-Face-API" class="headerlink" title="米国中北部リージョンにおける Face API"></a>米国中北部リージョンにおける Face API</h2><p>米国中北部リージョンにおける Face API は 廃止されます。もし該当するリージョンに Face API リソースをデプロイしている場合には、2023 年 6月 21日までに、前述のスナップショット機能を利用した移行を検討してください。<p><a href="https://azure.microsoft.com/ja-jp/updates/facelimitedaccess/">Responsible AI investments and safeguards for Facial Recognition | Azure の更新情報 | Microsoft Azure</a></p><blockquote><p>If you have Face API resources deployed in the North Central US region, please migrate to another Azure region by June, 30 2023.<br>Otherwise, you may lose access to your resources. </p></blockquote><p>Azure ポータルで 該当する Face リソースページの [プロパティ] メニューを開くと、リソースのデプロイリージョンが確認できます。</p></p><h1 id="申請不要で利用できる機能"><a href="#申請不要で利用できる機能" class="headerlink" title="申請不要で利用できる機能"></a>申請不要で利用できる機能</h1><p>「顔検出」 機能のみを利用する場合は、利用申請は不要です。<br>この機能は 「この画像に 1 つ以上の人間の顔がありますか?」 という質問に答えます。画像内の人間の顔が検出され、その位置を示す座標情報と属性情報が返されます。<br>たとえば、人数（顔の数）を数えたり、プライバシーのために画像の顔領域に "ぼかし" を入れたりするだけのユースケースでの利用が想定されています。<br><p><a href="https://www.microsoft.com/ja-jp/events/azurebase/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">顔認識に関する責任あるAIポリシーの変更とガイダンスについて | Microsoft Base</a></p><blockquote><p>顔検出機能 (ぼかし、露出、眼鏡、頭部姿勢、ランドマーク、ノイズ、オクルージョン、顔の境界ボックスなど) は引き続き一般提供を行いますので、申請は不要です。</p></blockquote></p><p>(なお厳密には、『顔情報を特定するための 「returnFaceId」 パラメーター を 「false」 として利用している場合』 のみ、「顔検出」は申請を行わずとも継続利用が可能です。)<p><a href="https://learn.microsoft.com/ja-jp/legal/cognitive-services/face/data-privacy-security?context=/azure/cognitive-services/computer-vision#what-data-does-face-process-how-long-is-it-retained-and-what-protections-are-in-place">Data and privacy for Face - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><p>Approved Customers Only: Face Detection with faceID:<br>detects faces within images and one of the outputs, the faceID, be used for the following Face calls.<br><BR><B>Note the faceID is only provided for customers that have been approved for access: Face – Identify, Face – Verify, Face – Group and Face – Find Similar.</B></p></blockquote><p><a href="https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395236">Face API - v1.0　API Reference | Face - Detect</a></p><blockquote><p>Request parameters &#x2F; <B>returnFaceId</B> (optional) &#x2F; boolean &#x2F;<br>Return faceIds of the detected faces or not. The default value is true.</p></blockquote></p><h1 id="申請および承認が必要な機能"><a href="#申請および承認が必要な機能" class="headerlink" title="申請および承認が必要な機能"></a>申請および承認が必要な機能</h1><p>「顔認識」機能は、「申請および承認が必要な機能」です。<br>なお、Face API における「顔認識」機能配下の「<B>顔識別（Facial identification）</B>」、「<B>顔検証（Facial verification）</B>」の両機能の差異については、以下のドキュメント抜粋をご参照ください。<p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/computer-vision/overview-identity#identification">Azure Face サービスとは - Azure Cognitive Services | Microsoft Docs</a></p><blockquote><p>顔識別では、画像内の 1 つの顔を、安全なリポジトリ内の一連の顔と <B>“一対多”</B> で照合できます。</p></blockquote><blockquote><p>検証操作は、”これら 2 つの顔は同じ人物のものでしょうか?” という質問に答えます。<br>また、検証では、画像内の顔をセキュリティで保護されたリポジトリや写真からの 1 つの顔と <B>“1 対 1”</B> で照合して、それらが同じ個人であることが確認されます</p></blockquote></p><p><p><a href="https://aka.ms/facerecognition">顔認識利用申請フォーム</a> では、申請対象ユース ケースが「顔識別」か「顔検証」かどちらに該当するかを選択して申請する必要があります。</p><p>ユースケースに関する詳細は、以下のドキュメントもご参照ください。<br><br><a href="https://learn.microsoft.com/ja-jp/legal/cognitive-services/face/transparency-note?context=/azure/cognitive-services/computer-vision/context/context">Use cases for Face - Azure Cognitive Services | Microsoft Learn</a> </p></p><p><p>申請フォームに記載されたもの以外のユースケースに関するフィードバックについては、申請フォームとは別途の <a href="https://aka.ms/CogSvcsLimitedAccessFeedback">フィードバックフォーム</a> が用意されています。<br><br>なお、こちらのフォームに登録した内容はフィードバックに留まり、利用申請とはみなされない点にご留意ください。</p></p><h1 id="申請に関する情報"><a href="#申請に関する情報" class="headerlink" title="申請に関する情報"></a>申請に関する情報</h1><P><p><a href="https://aka.ms/facerecognition">申請フォーム</a> および申請後のご連絡メール等は、英語のみでの対応となり、日本語対応はございません。<br><br>Face API の利用申請を管理・レビューするのは米国本社内の専用部門であり、公平性と独立性のために、技術サポート部門を含めた各国の他の部門はレビュープロセスに直接介入できないためです。</p></p><P>申請に関する FAQ については、以下のドキュメントもご参考として頂けます。<p><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-limited-access#faq-about-limited-access">Cognitive Services の制限付きアクセス機能 - Azure Cognitive Services | Microsoft Learn</a></p><blockquote><p>制限付きアクセスに関する FAQ <br>（抜粋）<br><br>Q.制限付きアクセスのサービスを使用する資格があるのはだれですか?<br><br>Q.管理下の顧客とは? 管理下の顧客に該当するかどうかがわからない場合はどうすればよいですか?<br><br>Q.申請が拒否された場合、私のデータはどうなりますか?<br></p></blockquote></P><h1 id="関連ドキュメント"><a href="#関連ドキュメント" class="headerlink" title="関連ドキュメント"></a>関連ドキュメント</h1><P><ul><li><a href="https://azure.microsoft.com/en-us/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">Responsible AI investments and safeguards for facial recognition | Azure Blog and Updates | Microsoft Azure</a><br></li><li><a href="https://www.microsoft.com/ja-jp/events/azurebase/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/">顔認識に関する責任あるAIポリシーの変更とガイダンスについて | Microsoft Base　（※ 上記ドキュメントの日本語翻訳です）</a><br></li><li><a href="https://azure.microsoft.com/ja-jp/updates/facelimitedaccess/">Responsible AI investments and safeguards for Facial Recognition | Azure の更新情報 | Microsoft Azure</a><br></li></ul><hr><p><code>変更履歴</code><br><code>2023/03/22 created by Uehara</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Face API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Face API Recognition Identify </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision モデルのドメイン変更方法</title>
      <link href="/blog/2023/02/28/how-to-convert-the-domain-of-an-existing-cvmodel/"/>
      <url>/blog/2023/02/28/how-to-convert-the-domain-of-an-existing-cvmodel/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision モデルのドメイン変更方法をご紹介します。</p><span id="more"></span><br><hr><h1 id="Custom-Vision-モデルのドメインについて"><a href="#Custom-Vision-モデルのドメインについて" class="headerlink" title="Custom Vision モデルのドメインについて"></a>Custom Vision モデルのドメインについて</h1><p>Azure Custom Vision を使用して、画像のクラス分類 &#x2F; または 物体検出のモデル作成が可能です。<br>モデルのトレーニング開始前には、モデルのドメイン（対応領域）を選択します。ドメインの詳細については、以下のドキュメントをご確認ください。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/select-domain">Custom Vision プロジェクトのドメインを選択する</a></li></ul><p>一方で、モデルのトレーニングが完了した後にも、ドメインの変更は可能です。ドメインを変更することで、ご自分のシナリオに、より適したモデルとなり、精度の向上が見込める場合があります。</p><p>なお、ドメインの変更に際して、再度、画像のタグ付けの作業を行って頂く必要はありません。</p><p>また、ドメインの変更の結果が、既存モデルに上書きされることはありません。<br>１つのプロジェクトの中で、ドメインを変更したトレーニング結果は別々に保持されます。</p><p>以下は、Custom Vision ポータルで、１つのプロジェクトに異なるドメイン（General (Compact[S1] と General (Compact)) ）が保持されている例のスクリーンショットです。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain01.jpg" alt="cv-domain01" title="cv-domain01"> </p><p>この記事では、既存モデルのドメインの変更方法をご紹介します。</p><h1 id="既存モデルのドメイン変更手順"><a href="#既存モデルのドメイン変更手順" class="headerlink" title="既存モデルのドメイン変更手順"></a>既存モデルのドメイン変更手順</h1><h3 id="1-プロジェクト設定画面の表示"><a href="#1-プロジェクト設定画面の表示" class="headerlink" title="(1)  プロジェクト設定画面の表示"></a>(1)  プロジェクト設定画面の表示</h3><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) 上で、プロジェクトを一覧表示します。</p><p>一覧から、対象のプロジェクトを選択し、ページ右上にある 歯車 アイコンを選択して、プロジェクト設定画面を表示します。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain02.jpg" alt="cv-domain02" title="cv-domain02"> </p><h3 id="2-ドメインの選択と、変更の保存"><a href="#2-ドメインの選択と、変更の保存" class="headerlink" title="(2) ドメインの選択と、変更の保存"></a>(2) ドメインの選択と、変更の保存</h3><p>[Domains] セクションで、[General [A1]] 等、任意ドメインを変更先として選択します。 [Save Changes] を選択して変更を保存します。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain03.jpg" alt="cv-domain03" title="cv-domain03"> </p><h3 id="3-再トレーニング実行"><a href="#3-再トレーニング実行" class="headerlink" title="(3) 再トレーニング実行"></a>(3) 再トレーニング実行</h3><p>[Train] ボタンを使用して、再度トレーニングを行います。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain04.jpg" alt="cv-domain04" title="cv-domain04"> </p><h3 id="4-新しいモデルのテスト"><a href="#4-新しいモデルのテスト" class="headerlink" title="(4) 新しいモデルのテスト"></a>(4) 新しいモデルのテスト</h3><p>トレーニング完了後、[Performance] タブで、ドメイン変更が反映されたモデルの新しい Iteration のパフォーマンスを確認できます。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain05.jpg" alt="cv-domain05" title="cv-domain05"> </p><p>個別の画像に対する精度を確認する場合には、[Quick Test] ボタンを使用して、該当の Iteration を指定したテストを行います。</p><p><img src="https://jpaiblog.github.io/images/how-to-convert-the-domain-of-an-existing-cvmodel/cv-domain06.jpg" alt="cv-domain06" title="cv-domain06"> 　</p><hr><p><code>変更履歴</code><br><code>2023/02/28 created by Uehara</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Translator Text API へのアクセスを VNET やプライベート エンドポイントに限定する方法</title>
      <link href="/blog/2022/04/13/TranslatorTextAPI-VNET-and-PrivateEndpoint/"/>
      <url>/blog/2022/04/13/TranslatorTextAPI-VNET-and-PrivateEndpoint/</url>
      
        <content type="html"><![CDATA[<p>Translator Text API の呼び出しを特定の VNET やプライベート エンドポイント経由に限定する方法について紹介します。</p><span id="more"></span><br><hr><h1 id="Cognitive-Services-における-VNET-との統合"><a href="#Cognitive-Services-における-VNET-との統合" class="headerlink" title="Cognitive Services における VNET との統合"></a>Cognitive Services における VNET との統合</h1><p>Translator Text API を含む Cognitive Services では、リソースを VNET と統合して、API へのアクセスを特定の VNET やプライベート エンドポイント経由に限定する方法を提供しています。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-virtual-networks?tabs=portal">Azure Cognitive Services 仮想ネットワークを構成する</a></li></ul><p>Translator Text API については他の API とは一部異なる点があるため、本ブログ記事では具体的な設定および API の呼び出し手順を例として紹介します。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/reference/v3-0-reference#virtual-network-support">Translator Text API v3.0 - 仮想ネットワークのサポート</a></li></ul><h1 id="Translator-Text-API-を-VNET-に統合する"><a href="#Translator-Text-API-を-VNET-に統合する" class="headerlink" title="Translator Text API を VNET に統合する"></a>Translator Text API を VNET に統合する</h1><p>Translator Text API へのアクセスを VNET やプライベート エンドポイントに限定した場合は、通常とは以下の点が異なります。</p><ul><li>グローバル トランスレーター エンドポイント (“api.cognitive.microsofttranslator.com”) は使用できません。代わりに<a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-custom-subdomains">カスタム サブドメイン</a>を使用します。</li><li>認証にトークン (Authorization ヘッダー)　を使うことはできません。代わりにサブスクリプション キー (Ocp-Apim-Subscription-Key) を使用します。</li><li>Ocp-Apim-Subscription-Region ヘッダーで Translator リソースのリージョンを指定します。(global の場合のみ省略可能)</li></ul><p>上記を踏まえた手順例を以下で紹介します。ここでは簡便のためリクエストの送信元を Azure 上の仮想マシン (VM) とします。</p><h2 id="手順例"><a href="#手順例" class="headerlink" title="手順例"></a>手順例</h2><h3 id="1-Ubuntu-Server-18-04-の-VM-および仮想ネットワークを新規で作成します"><a href="#1-Ubuntu-Server-18-04-の-VM-および仮想ネットワークを新規で作成します" class="headerlink" title="(1) Ubuntu Server 18.04 の VM および仮想ネットワークを新規で作成します"></a>(1) Ubuntu Server 18.04 の VM および仮想ネットワークを新規で作成します</h3><p>仮想ネットワークやその他のリソースのリージョンは東日本とします。</p><ul><li>参考: <a href="https://docs.microsoft.com/ja-jp/learn/modules/create-linux-virtual-machine-in-azure/">Azure で Linux 仮想マシンを作成する</a></li></ul><h3 id="2-Translator-Text-API-のリソースを作成します"><a href="#2-Translator-Text-API-のリソースを作成します" class="headerlink" title="(2) Translator Text API のリソースを作成します"></a>(2) Translator Text API のリソースを作成します</h3><p>リージョンとして東日本を選択します。</p><p>設定例:</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/2-create-resource-1.png" alt="Create Translator Azure Resource"></p><h3 id="3-Translator-Text-API-のネットワークの設定で-1-の仮想ネットワークを指定します"><a href="#3-Translator-Text-API-のネットワークの設定で-1-の仮想ネットワークを指定します" class="headerlink" title="(3) Translator Text API のネットワークの設定で (1) の仮想ネットワークを指定します"></a>(3) Translator Text API のネットワークの設定で (1) の仮想ネットワークを指定します</h3><p>Translator Text API へのアクセスを指定された仮想ネットーク (VNET) からのみに限定します。</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/3-add-vnet-1.png" alt="Add VNET"></p><p>VNET を指定したタイミングでカスタム サブドメイン名が割り当てられます。</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/3-custom-subdomain.png" alt="Custom subdomain"></p><h3 id="4-仮想マシンから-Translator-Text-API-の呼び出しが成功することを確認します"><a href="#4-仮想マシンから-Translator-Text-API-の呼び出しが成功することを確認します" class="headerlink" title="(4) 仮想マシンから Translator Text API の呼び出しが成功することを確認します"></a>(4) 仮想マシンから Translator Text API の呼び出しが成功することを確認します</h3><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/reference/v3-0-reference#virtual-network-support">仮想ネットワークのサポート – Translator Text API</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">カスタム エンドポイントを使用する Translator を呼び出す要求の例を次に示します。</span><br><span class="line">// Pass secret key and region using headers</span><br><span class="line">curl -X POST &quot;https://&lt;your-custom-domain&gt;.cognitiveservices.azure.com/translator/text/v3.0/translate?api-version=3.0&amp;to=es&quot; \</span><br><span class="line">     -H &quot;Ocp-Apim-Subscription-Key:&lt;your-key&gt;&quot; \</span><br><span class="line">     -H &quot;Ocp-Apim-Subscription-Region:&lt;your-region&gt;&quot; \</span><br><span class="line">     -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">     -d &quot;[&#123;&#x27;Text&#x27;:&#x27;Hello, what is your name?&#x27;&#125;]&quot;</span><br></pre></td></tr></table></figure></li></ul><p>コマンドと結果の例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X POST &quot;https://&lt;your-custom-domain&gt;.cognitiveservices.azure.com/translator/text/v3.0/translate?api-version=3.0&amp;to=es&quot;      -H &quot;Ocp-Apim-Subscription-Key:xxx &quot;      -H &quot;Ocp-Apim-Subscription-Region:japaneast&quot;      -H &quot;Content-Type: application/json&quot;      -d &quot;[&#123;&#x27;Text&#x27;:&#x27;Hello, what is your name?&#x27;&#125;]&quot;</span><br><span class="line"></span><br><span class="line">[&#123;&quot;detectedLanguage&quot;:&#123;&quot;language&quot;:&quot;en&quot;,&quot;score&quot;:1.0&#125;,&quot;translations&quot;:[&#123;&quot;text&quot;:&quot;Hola, ¿cómo te llamas?&quot;,&quot;to&quot;:&quot;es&quot;&#125;]&#125;]</span><br></pre></td></tr></table></figure><p>ここで、仮想ネットワーク外からアクセスしようとした場合、以下のようなエラーで失敗します。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;error&quot;:&#123;&quot;code&quot;:&quot;AccessDenied&quot;,&quot;message&quot;: &quot;Access denied due to Virtual Network/Firewall rules. Your IP address is XX.XX.XX.XX.&quot;&#125;&#125;</span><br></pre></td></tr></table></figure><p>この設定では、Translator Text API 側でアクセスを許可する送信元を特定の仮想ネットワークに限定しているだけで、VM から見た宛先は仮想ネットワークのプライベート IP アドレスではなくパブリック IP アドレスになります。<br>これは、仮想マシン上でカスタムサブドメイン名を名前解決した結果から確認できます。</p><h3 id="コマンドと結果の例"><a href="#コマンドと結果の例" class="headerlink" title="コマンドと結果の例:"></a>コマンドと結果の例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ dig &lt;your-custom-domain&gt;.cognitiveservices.azure.com</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">&lt;your-custom-domain&gt;.cognitiveservices.azure.com. 541 IN CNAME japaneast.prod.vnet.cog.trafficmanager.net.</span><br><span class="line">japaneast.prod.vnet.cog.trafficmanager.net. 60 IN CNAME vnetproxyv1-jpe-prod.japaneast.cloudapp.azure.com.</span><br><span class="line">vnetproxyv1-jpe-prod.japaneast.cloudapp.azure.com. 9 IN A 40.79.187.171</span><br></pre></td></tr></table></figure><p>パブリック IP アドレスである 40.79.187.171 に名前解決されています。</p><h3 id="5-プライベート-IP-アドレスで通信するためにプライベート-エンドポイントを追加します"><a href="#5-プライベート-IP-アドレスで通信するためにプライベート-エンドポイントを追加します" class="headerlink" title="(5) プライベート IP アドレスで通信するためにプライベート エンドポイントを追加します"></a>(5) プライベート IP アドレスで通信するためにプライベート エンドポイントを追加します</h3><p>Translator Text API は他の Cognitive Services と同様にプライベート エンドポイントをサポートしています。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/cognitive-services-virtual-networks?tabs=portal#use-private-endpoints">プライベート エンドポイントを使用する</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">お使いの Cognitive Services リソースのプライベート エンドポイントを使用すると、仮想ネットワーク (VNet) 上のクライアントはプライベート リンクを介してデータに安全にアクセスできるようになります。 プライベート エンドポイントは、Cognitive Services リソースの VNet アドレス空間からの IP アドレスを使用します。</span><br></pre></td></tr></table></figure></li></ul><p>設定例:</p><p><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-VNET-and-PrivateEndpoint/5-add-private-endpoint.png" alt="Add private endpoint"></p><p> <a href="https://docs.microsoft.com/ja-jp/azure/private-link/private-endpoint-dns">DNS の設定</a>が更新されると、名前解決した結果がプライベート IP アドレスとなります。</p><p>コマンドと結果の例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ dig &lt;your-custom-domain&gt;.cognitiveservices.azure.com</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">&lt;your-custom-domain&gt;.cognitiveservices.azure.com. 900 IN CNAME &lt;your-custom-domain&gt;.privatelink.cognitiveservices.azure.com.</span><br><span class="line">&lt;your-custom-domain&gt;.privatelink.cognitiveservices.azure.com. 9 IN A 10.0.0.5</span><br></pre></td></tr></table></figure><p>この状態で仮想マシンから curl コマンドで Translator の API を呼び出すとプライベート IP アドレス (プライベートエンドポイント経由) でのアクセスになります。</p><hr><p><code>変更履歴</code><br><code>2022/04/13 created by Hiroki Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Translator Text API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Translator Text API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Speech to Text のコンテナーに関する FAQ</title>
      <link href="/blog/2022/04/08/Speech-to-Text-Conatiner-FAQ/"/>
      <url>/blog/2022/04/08/Speech-to-Text-Conatiner-FAQ/</url>
      
        <content type="html"><![CDATA[<p>Speech to Text のコンテナーに関する FAQ をまとめました。</p><p>主にベースライン (標準) モデルのコンテナーに関する内容となります。カスタム モデルの場合は異なることがあります。</p><span id="more"></span><br><hr><h2 id="コンテナーが起動しない、またはすぐに停止する"><a href="#コンテナーが起動しない、またはすぐに停止する" class="headerlink" title="コンテナーが起動しない、またはすぐに停止する"></a>コンテナーが起動しない、またはすぐに停止する</h2><p>まずはオプションを除いた最小限のパラメーター構成で動作を確認します。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -it -p 5000:5000 --memory 4g --cpus 4 \</span><br><span class="line">mcr.microsoft.com/azure-cognitive-services/speechservices/speech-to-text \</span><br><span class="line">Eula=accept \</span><br><span class="line">Billing=&#123;ENDPOINT_URI&#125; \</span><br><span class="line">ApiKey=&#123;API_KEY&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-howto?tabs=stt,csharp,simple-format#run-the-container-with-docker-run">docker run でコンテナーを実行する</a></li></ul><p>またコンテナーを実行しているマシンが動作要件を満たしているか確認します。CPU は最低 2 コア、メモリは 2 GB が必要となりますが、最新 (latest) のモデルでは以前よりもメモリ使用量が増大しているため、推奨構成 + α で確認することをお勧めします。</p><ul><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-howto?tabs=stt,csharp,simple-format#host-computer-requirements-and-recommendations">ホスト コンピューターの要件と推奨事項</a></p></li><li><p><a href="https://docs.microsoft.com/en-us/azure/cognitive-services/containers/container-image-tags?tabs=current#speech-to-text">Azure Cognitive Services container image tags and release notes</a></p></li></ul><p>加えて、コンテナーの実行には CPU が AVX2 の命令をサポートしている必要があります。ホスト OS が Linux であれば以下のコマンドで AVX2 のサポート有無を確認できます。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -q avx2 /proc/cpuinfo &amp;&amp; echo AVX2 supported || echo No AVX2 support detected</span><br></pre></td></tr></table></figure><p>Speech to Text のコンテナーは Azure VM でも実行することができるため、オンプレミス環境で動作しない場合は切り分けとして Azure VM での動作確認を検討します。VM のサイズによって CPU は異なりますが、AVX2 をサポートしている CPU かどうかについては以下のリストからも確認できます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/virtual-machines/linux/compute-benchmark-scores">Linux VM のコンピューティング ベンチマーク スコア</a></li></ul><p>※CPU の型番から AVX2 のサポート状況を確認するには各ベンダー (Intel, AMD など) の情報を参照します。</p><ul><li>例. <a href="https://ark.intel.com/content/www/us/en/ark.html#@Processors">Intel Product Specifications</a>※Intel 社のサイトとなります</li></ul><h2 id="コンテナーは起動したが音声認識の結果が期待と異なる"><a href="#コンテナーは起動したが音声認識の結果が期待と異なる" class="headerlink" title="コンテナーは起動したが音声認識の結果が期待と異なる"></a>コンテナーは起動したが音声認識の結果が期待と異なる</h2><p>Speech to Text のコンテナーは言語ごとにコンテナーのイメージが分かれています。latest のタグは英語 (en-us) の最新イメージです。その他の言語については下記のリストから該当する言語のイメージを取得・実行する必要があります。</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/cognitive-services/containers/container-image-tags?tabs=current#speech-to-text">Azure Cognitive Services container image tags and release notes</a></li></ul><p>日本語 (ja-jp) の場合のコマンド実行例:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -it -p 5000:5000 --memory 4g --cpus 4 \</span><br><span class="line">mcr.microsoft.com/azure-cognitive-services/speechservices/speech-to-text:3.0.0-amd64-ja-jp \</span><br><span class="line">Eula=accept \</span><br><span class="line">Billing=&#123;ENDPOINT_URI&#125; \</span><br><span class="line">ApiKey=&#123;API_KEY&#125;</span><br></pre></td></tr></table></figure><h2 id="ホスト-OS-のディレクトリを指定したログの出力に失敗する"><a href="#ホスト-OS-のディレクトリを指定したログの出力に失敗する" class="headerlink" title="ホスト OS のディレクトリを指定したログの出力に失敗する"></a>ホスト OS のディレクトリを指定したログの出力に失敗する</h2><p>Speech to Text のコンテナーではディレクトリをマウントすることでホスト OS 上にログを出力することができます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-configuration?tabs=stt#logging-settings">Speech Service コンテナーを構成する - Logging の設定</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--mount type=bind,src=/home/azureuser/output,target=/output \</span><br></pre></td></tr></table></figure></li></ul><p>ここで指定されたホスト OS のディレクトリ (例. &#x2F;home&#x2F;azureuser&#x2F;output) は Docker コンテナーから書き込みできるようにアクセス許可が設定されている必要があります。もし書き込みが許可されていない場合はコンテナーの実行は以下のようなエラーで停止します。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating directory &#x27;/app/speechtotext/xxx&#x27; failed with error &#x27;Access to the path &#x27;/app/speechtotext/xxx&#x27; is denied.&#x27;. Please make sure that the path is writable.</span><br></pre></td></tr></table></figure><p>※Docker のマウントやプロセスの実行権限の詳細については利用しているプラットフォーム (OS) によって異なります。</p><ul><li>参考: <a href="https://docs.docker.com/storage/bind-mounts/">Docker docs - Use bind mounts</a>※Docker のサイトとなります</li></ul><h2 id="起動後しばらく動作した後に停止する"><a href="#起動後しばらく動作した後に停止する" class="headerlink" title="起動後しばらく動作した後に停止する"></a>起動後しばらく動作した後に停止する</h2><p>コンテナーから課金 (Billing) エンドポイントへの接続に失敗している可能性があります。Speech to Text のコンテナーは利用量を定期的に Azure クラウドに報告する必要があり、一定時間接続に失敗すると動作を停止します。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-howto?tabs=stt,csharp,simple-format#billing">課金エンドポイントへの接続について</a></li></ul><p>ホスト OS や Docker コンテナーのネットワーク構成として、課金エンドポイントに HTTPS (TCP ポート<br> 443) で通信が可能か確認します。例えばファイアウォールやプロキシが接続を拒否している可能性があります。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-container-configuration?tabs=stt#http-proxy-credentials-settings">Speech Service コンテナーのプロキシ設定</a> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> docker run --rm -it -p 5000:5000 \</span><br><span class="line">--memory 2g --cpus 1 \</span><br><span class="line">--mount type=bind,src=/home/azureuser/output,target=/output \</span><br><span class="line">&lt;registry-location&gt;/&lt;image-name&gt; \</span><br><span class="line">Eula=accept \</span><br><span class="line">Billing=&lt;endpoint&gt; \</span><br><span class="line">ApiKey=&lt;api-key&gt; \</span><br><span class="line">HTTP_PROXY=&lt;proxy-url&gt; \</span><br><span class="line">HTTP_PROXY_CREDS=&lt;proxy-user&gt;:&lt;proxy-password&gt; \</span><br></pre></td></tr></table></figure></li></ul><p> また Docker は既定の DNS サーバーとして Google Public DNS (IP アドレス: 8.8.8.8) を使用するため、もしこの DNS サーバーへのアクセスが許可されない場合は別の DNS サーバーを指定する必要があります。</p><ul><li>参考: <a href="https://github.com/moby/moby/issues/23910">Docker 既定の DNS サーバーについて言及した GitHub 上の Issue</a></li></ul><p>※Linux では &#x2F;etc&#x2F;docker&#x2F;daemon.json のファイルで既定の DNS サーバーを設定できます。</p><hr><p><code>変更履歴</code><br><code>2022/04/08 created by Hiroki Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Speech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision の Advanced トレーニングの利用方法</title>
      <link href="/blog/2022/03/31/how-to-use-advanced-training/"/>
      <url>/blog/2022/03/31/how-to-use-advanced-training/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision の Advanced Training の利用方法をご紹介します。</p><span id="more"></span><br><hr><h1 id="Custom-Vision-モデル作成"><a href="#Custom-Vision-モデル作成" class="headerlink" title="Custom Vision モデル作成"></a>Custom Vision モデル作成</h1><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) を使用して、画像のクラス分類 &#x2F; または 物体検出のモデル作成が可能です。一連の流れについては、以下のドキュメントをご参照ください。</p><ul><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/getting-started-build-a-classifier">クイックスタート: Custom Vision Web ポータルを使用して画像分類器モデルを構築する</a></p></li><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/get-started-build-detector">クイックスタート: クイックスタート: Custom Vision の Web サイトでオブジェクト検出器を構築する</a></p></li></ul><p>モデルトレーニングでは “Quick Training” &#x2F; “Advanced Training” のどちらかのタイプを選択可能です。上記ドキュメントは、比較的短時間で完了する Quick Training を前提として記載されていますが、この記事では、Advanced Training の利用手順をご案内します。</p><h1 id="Advanced-Training-の利用手順"><a href="#Advanced-Training-の利用手順" class="headerlink" title="Advanced Training の利用手順"></a>Advanced Training の利用手順</h1><h3 id="1-Train-ボタンクリック"><a href="#1-Train-ボタンクリック" class="headerlink" title="(1)  [Train] ボタンクリック"></a>(1)  [Train] ボタンクリック</h3><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) 上で、<br>トレーニングデータをアップロードした後、画面右上の [Train] ボタンをクリックします。</p><p><img src="https://jpaiblog.github.io/images/how-to-use-advanced-training/cv-advanced-01.png" alt="cv-advanced-01" title="cv-advanced-01"> </p><h3 id="2-Advanced-Training-の設定"><a href="#2-Advanced-Training-の設定" class="headerlink" title="(2) [Advanced Training] の設定"></a>(2) [Advanced Training] の設定</h3><p>[Train] ボタンクリックで表示される子画面上で、Training Types：[Advanced Training] を選択します。</p><p><img src="https://jpaiblog.github.io/images/how-to-use-advanced-training/cv-advanced-02.png" alt="cv-advanced-02" title="cv-advanced-02"> </p><p>Custom Vision では、トレーニング時間あたりの課金を設定させて頂いております。</p><ul><li><a href="https://azure.microsoft.com/ja-jp/pricing/details/cognitive-services/custom-vision-service/?cdn=disable">Custom Vision の価格</a></li></ul><p>そのため、ご予算の範囲内で今回のトレーニングにかけられる時間の最大値をTraining budget に設定してください。</p><p>なお、Custom Vision ポータル では、トレーニングを停止する機能のご提供がないことにご留意ください。</p><p>また、Advanced Training が完了次第、メールでお知らせすることが可能です。</p><p>お知らせ機能を利用する場合には、[Send me an email notification after training completes] のチェックボックスをクリックして、任意の Email address を記載してください。</p><p>[Train] ボタンをクリックするとトレーニングが始まります。誠に恐れ入りますが、トレーニング進捗や完了までの残り時間などの表示機能のご提供はありません。前述の メールでのトレーニング完了お知らせ機能のご利用をご検討ください、</p><h1 id="お問い合わせについて"><a href="#お問い合わせについて" class="headerlink" title="お問い合わせについて"></a>お問い合わせについて</h1><p>リソース個別の技術的なご質問については、<a href="https://azure.microsoft.com/ja-jp/support/plans/">DEVELOPER サポートプラン</a> 以上のサポートプランをご契約いただき、Azure ポータルからお問い合わせください。</p><p>なお、Azure ポータルからの起票時に選択されたサブスクリプションと、同じサブスクリプションに含まれるリソースではない場合は、調査をお承りすることができませんのでご注意ください。</p><ul><li><a href="https://jpaztech.github.io/blog/information/Different-subscriptions-research/">問い合わせ起票時のセキュリティ チェックの強化について</a></li></ul><hr><p><code>変更履歴</code><br><code>2022/03/31 created by Uehara</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision のトレーニングが失敗した場合の調査に必要な情報について</title>
      <link href="/blog/2022/03/25/how-to-troubleshoot-custom-vision-training-issue/"/>
      <url>/blog/2022/03/25/how-to-troubleshoot-custom-vision-training-issue/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision のトレーニングが失敗した場合の調査に必要な情報をまとめました。</p><span id="more"></span><br><hr><h1 id="Custom-Vision-のトレーニングが失敗した場合の調査について"><a href="#Custom-Vision-のトレーニングが失敗した場合の調査について" class="headerlink" title="Custom Vision のトレーニングが失敗した場合の調査について"></a>Custom Vision のトレーニングが失敗した場合の調査について</h1><p>Custom Vision でトレーニングを実行した際に何らかの原因によってトレーニングが失敗すると、そのイテレーションは “Failed” と表示されます。これはリソースの一時的な不足など一過性の問題でも発生するため、まずはリトライ (再実行) をお試しください。また、下記ドキュメントに記載されたトレーニング データの推奨量を満たしているかも併せてご確認ください。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/getting-started-improving-your-classifier">Custom Vision のモデルを改善する方法</a></li></ul><p>もし繰り返し実行しても失敗する場合は別途原因の調査が必要となります。Azure ポータルからお問い合わせいただく際には、以下の情報を採取・提供いただけるとスムーズです。</p><h3 id="1-トレーニングを実行したプロジェクトの-ID-Project-Id"><a href="#1-トレーニングを実行したプロジェクトの-ID-Project-Id" class="headerlink" title="(1) トレーニングを実行したプロジェクトの ID (Project Id)"></a>(1) トレーニングを実行したプロジェクトの ID (Project Id)</h3><p>Custom Vision ポータル (<a href="https://www.customvision.ai/">https://www.customvision.ai/</a>) 上で、<br>プロジェクトを選択した後、画面右上の歯車マーク (Settings) からご確認いただけます。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/cv-portal-01.png" alt="cv-portal-01" title="cv-portal-01">  </p><h3 id="2-トレーニング-イテレーション-毎に付与される-ID-Iteration-Id"><a href="#2-トレーニング-イテレーション-毎に付与される-ID-Iteration-Id" class="headerlink" title="(2) トレーニング (イテレーション) 毎に付与される ID (Iteration Id)"></a>(2) トレーニング (イテレーション) 毎に付与される ID (Iteration Id)</h3><p>まず (1) と同じプロジェクトの Settings で KEY の情報をメモしておきます。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/cv-portal-02.png" alt="cv-portal-02" title="cv-portal-02">  </p><p>次に下記のコンソールから、イテレーションを列挙する API を呼び出すことで Failed となったイテレーションの Iteration Id を確認することができます。</p><ul><li><a href="https://southcentralus.dev.cognitive.microsoft.com/docs/services/Custom_Vision_Training_3.3/operations/5eb0bcc6548b571998fddec9">Custom Vision Training v3.3 - GetIterations</a></li></ul><p>コンソールの起動時には現在ご利用のリージョンを選択してください。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/api-console-01.png" alt="api-console-01" title="api-console-01">  </p><p>API の呼び出しには Training リソースの KEY および Project Id の情報が必要です。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/api-console-02.png" alt="api-console-02" title="api-console-02">  </p><p>API を呼び出した結果の “id” の部分が Iteration Id に相当するため、”status” が “Failed” となっているイテレーションの “id” をご提供ください。</p><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/api-console-03.png" alt="api-console-03" title="api-console-03">  </p><h3 id="3-トレーニングを実行したリソースのリソース-ID"><a href="#3-トレーニングを実行したリソースのリソース-ID" class="headerlink" title="(3) トレーニングを実行したリソースのリソース ID"></a>(3) トレーニングを実行したリソースのリソース ID</h3><p><img src="https://jpaiblog.github.io/images/how-to-troubleshoot-custom-vision-training-issue/cv-portal-03.png" alt="cv-portal-03" title="cv-portal-03">  </p><p>(1) と同様に Settings からご確認いただけます。</p><p>なお、Azure ポータルからの起票時に選択されたサブスクリプションと、同じサブスクリプションに含まれるリソースではない場合は、調査をお承りすることができませんのでご注意ください。</p><ul><li><a href="https://jpaztech.github.io/blog/information/Different-subscriptions-research/">問い合わせ起票時のセキュリティ チェックの強化について</a></li></ul><hr><p><code>変更履歴</code><br><code>2022/03/25 created by Hiroki Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Vision でモデルを ONNX 形式でエクスポートして利用する方法について</title>
      <link href="/blog/2022/02/21/custom-vision-exported-onnx-format/"/>
      <url>/blog/2022/02/21/custom-vision-exported-onnx-format/</url>
      
        <content type="html"><![CDATA[<p>Custom Vision において ONNX 形式でエクスポートされたモデルを使用する方法と参考情報を紹介します。</p><span id="more"></span><br><hr><h2 id="エクスポートされた-ONNX-モデルを使用する方法"><a href="#エクスポートされた-ONNX-モデルを使用する方法" class="headerlink" title="エクスポートされた ONNX モデルを使用する方法"></a>エクスポートされた ONNX モデルを使用する方法</h2><p>Custom Vision では、エッジ デバイス上でのリアルタイム推論用に最適化されている、”コンパクト ドメイン” で学習されたイテレーションでのみモデルのエクスポートが可能です。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/select-domain#compact-domains">コンパクト ドメインとは</a></li></ul><p>もしコンパクト ドメイン以外のドメインで一度学習を行ったプロジェクトで、学習済みモデルのエクスポートを行いたい場合は、対象プロジェクトの設定 (Settings) から、[ドメイン (Domains)] のセクションでコンパクト ドメインを選択して、再度学習 (Train) を実行することでエクスポートが可能になります。</p><p><img src="https://jpaiblog.github.io/images/custom-vision-exported-onnx-format/custom-vision-compact-domain.png" align="left" border="1"><br clear="left"></p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/export-your-model#convert-to-a-compact-domain">コンパクト ドメインへの変換方法</a></li></ul><p>学習済みモデルをエクスポートするには、対象プロジェクトの [Performance] タブを選択し、[Export] をクリックします。</p><p><img src="https://jpaiblog.github.io/images/custom-vision-exported-onnx-format/custom-vision-how-to-export.png" align="left" border="1"><br clear="left"></p><p>エクスポートの際にモデル ファイルの形式を指定できます。ONNX 形式のモデルを利用する場合は以下を選択します。</p><p><img src="https://jpaiblog.github.io/images/custom-vision-exported-onnx-format/custom-vision-export-onnx.png" align="left" border="1"><br clear="left"></p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/export-your-model#export-your-model">モデルをエクスポートする</a></li></ul><p>ONNX 形式のモデル ファイルをアプリケーションで利用する方法については以下のサンプルを適宜ご利用ください。</p><ul><li><a href="https://github.com/Azure-Samples/cognitive-services-onnx-customvision-sample">ONNXファイルを用いた推論サンプルコード</a></li><li><a href="https://github.com/onnx/onnx">Onnx on GitHub</a></li></ul><h2 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h2><h5 id="■-再学習やエクスポートのタイミングによって、ONNX-ファイル内の入力および出力のフォーマットが変更されることはあるか？"><a href="#■-再学習やエクスポートのタイミングによって、ONNX-ファイル内の入力および出力のフォーマットが変更されることはあるか？" class="headerlink" title="■ 再学習やエクスポートのタイミングによって、ONNX ファイル内の入力および出力のフォーマットが変更されることはあるか？"></a>■ 再学習やエクスポートのタイミングによって、ONNX ファイル内の入力および出力のフォーマットが変更されることはあるか？</h5><p>いいえ。Custom Vision の同一プロジェクト・同一ドメインで、画像やタグ付けだけを変更して再学習を行っても、入力や出力のデータサイズやノード名は固定で変わりません。また、これらの形式はエクスポートのタイミングで変更されることもないため、アプリケーションで参照するモデル ファイルの置き換えを行っても、再学習前に利用していた推論コードの変更は変更無く、そのまま実行が可能です。</p><hr><p><code>変更履歴</code><br><code>2022/02/21 created by kazuyaonuki</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。</p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Custom Vision </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure に関するお問い合わせ起票時のセキュリティ チェックが強化されます</title>
      <link href="/blog/2021/12/08/enhance-security-check/"/>
      <url>/blog/2021/12/08/enhance-security-check/</url>
      
        <content type="html"><![CDATA[<p>2021 年 12 月 8 日以降、Azure サブスクリプションへのアクセス権のセキュリティ チェックが強化されます。具体的な内容を以下に紹介します。  </p><span id="more"></span><br><hr><h1 id="セキュリティ-チェック強化の背景と具体的な対応について"><a href="#セキュリティ-チェック強化の背景と具体的な対応について" class="headerlink" title="セキュリティ チェック強化の背景と具体的な対応について"></a>セキュリティ チェック強化の背景と具体的な対応について</h1><p>マイクロソフトではお客様の情報保護を最優先としており、様々な側面からセキュリティ上の脅威を評価して対策を行っています。その中で、サポート窓口が悪用されるリスクを低減するための対応として、調査対象となる Azure サブスクリプションへのアクセス権を確認していますが、2021 年 12 月 8 日以降、セキュリティ チェックが強化されます。  </p><p>これにより、問い合わせ起票時に選択された Azure サブスクリプションと異なるサブスクリプションに関するお問い合わせはお承りできなくなります。詳細および最新情報については 2021 年 11 月 26 日 に公開された以下のブログをご参照ください。  </p><ul><li><a href="https://jpaztech.github.io/blog/information/Different-subscriptions-research/">お問い合わせ発行時と「異なる」サブスクリプションならびに AAD テナントの調査依頼に対してのセキュリティ チェックが強化されます</a></li></ul><p>またこちらは電話でお問い合わせの発行を依頼いただいた場合も同様となります。電話については下記のブログで個別に説明していますので、併せてご確認ください。  </p><ul><li><a href="https://jpaztech.github.io/blog/information/Security-check-stricter/">電話経由における Azure サブスクリプションの調査のセキュリティ チェックが厳格化されます</a></li></ul><p>※ 本情報の内容（添付文書、リンク先などを含む）は、作成日時点でのものであり、予告なく変更される場合があります。  </p><hr><p><code>変更履歴</code><br><code>2021/12/8 created by Nakagami</code></p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> セキュリティ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法</title>
      <link href="/blog/2021/05/17/speech-translation-with-custom-translator/"/>
      <url>/blog/2021/05/17/speech-translation-with-custom-translator/</url>
      
        <content type="html"><![CDATA[<p>Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法をご紹介します。</p><span id="more"></span><br><hr><h1 id="Custom-Translator-で作成した翻訳モデルを-Speech-Translation-で使用する方法"><a href="#Custom-Translator-で作成した翻訳モデルを-Speech-Translation-で使用する方法" class="headerlink" title="Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法"></a>Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法</h1><p>Speech Services の音声翻訳 (Speech Translation) は Speech-to-Text で文字起こしされた結果を元に Text Translation で翻訳を行います。</p><ul><li><a href="https://www.microsoft.com/en-us/translator/business/machine-translation/#howspeech">How does speech translation work?</a></li></ul><p>この時、Speech-to-Text で使用される音声認識モデルは Custom Speech でカスタマイズすることができます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/custom-speech-overview">Custom Speech</a></li></ul><p>また Text Translation については Custom Translator で構築した独自の翻訳モデルを使用することができます。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/custom-translator/overview">Custom Translator</a></li></ul><p>ここでは、Custom Translator で作成した翻訳モデルを Speech SDK で使用する方法をご紹介します。前提として、事前に Custom Translator でモデルを作成してデプロイしておく必要があります。また、モデルの識別子である Category ID は <a href="https://portal.customtranslator.azure.ai/">Custom Translsator のポータルサイト</a>でモデルを作成したプロジェクトの情報から確認することができます。</p><p><img src="https://jpaiblog.github.io/images/speech-translation-with-custom-translator/custom-translator-category-id.png" alt="Custom Translator Category ID"></p><h2 id="C-NET-を使用する場合のコード例"><a href="#C-NET-を使用する場合のコード例" class="headerlink" title="C# (.NET) を使用する場合のコード例:"></a>C# (.NET) を使用する場合のコード例:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SpeechTranslationConfig config = SpeechTranslationConfig.FromSubscription(SubscriptionKey, Region);</span><br><span class="line"></span><br><span class="line">// Custom Speech のモデル指定 (*Speech-to-Text もカスタマイズする場合のみ)</span><br><span class="line">config.EndpointId = &quot;&lt;Your Endpoint ID here&gt;&quot;;</span><br><span class="line"></span><br><span class="line">// Custom Translator のモデル指定</span><br><span class="line">config.SetServiceProperty(&quot;category&quot;, &quot;&lt;Your Category ID here&gt;&quot;, ServicePropertyChannel.UriQueryParameter);</span><br><span class="line"></span><br><span class="line">// 以降の音声認識・翻訳は通常と同じ</span><br></pre></td></tr></table></figure><h2 id="JavaScript-を使用する場合のコード例"><a href="#JavaScript-を使用する場合のコード例" class="headerlink" title="JavaScript を使用する場合のコード例:"></a>JavaScript を使用する場合のコード例:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">speechConfig = SpeechSDK.SpeechTranslationConfig.fromSubscription(key.value, regionOptions.value);</span><br><span class="line"></span><br><span class="line">// Custom Translator のモデル指定</span><br><span class="line">speechConfig.setServiceProperty(&quot;category&quot;, &quot;&lt;Category ID&gt;&quot;, SpeechSDK.ServicePropertyChannel.UriQueryParameter);</span><br><span class="line"></span><br><span class="line">// 以降の音声認識・翻訳は通常と同じ</span><br></pre></td></tr></table></figure><p>いずれの言語でも、SpeechTranslationConfig の setServiceProperty を使用して、category のパラメーターに Custom Translator の Category ID を指定する方法が基本となります。</p><ul><li><a href="https://github.com/Azure-Samples/cognitive-services-speech-sdk">Speech Services のサンプルコード</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/speech-sdk">Speech SDK のリファレンス</a></li></ul><h2 id="Speech-Translation-でカスタム翻訳モデルを利用した場合の料金について"><a href="#Speech-Translation-でカスタム翻訳モデルを利用した場合の料金について" class="headerlink" title="Speech Translation でカスタム翻訳モデルを利用した場合の料金について"></a>Speech Translation でカスタム翻訳モデルを利用した場合の料金について</h2><p>Speech Translation で Custom Translator の翻訳モデルを使用した場合に、発生する課金項目としては以下の通りです。</p><ul><li>(1) Speech Translation Standard ($2.50 per hour)</li><li>(2) Custom Speech Model Hosting ($0.0538 per model per hour, Optional)</li><li>(3) Custom Translation - Training ($10 per million source + target chars of training data (max. $300&#x2F;training))</li><li>(4) Custom Translation - Custom model hosting ($10 per hosted custom translation model per region, per month)</li></ul><p>実際の料金レートは選択された価格帯によって異なります。(2) は Custom Speech で作成した音声認識モデルも使用する場合に発生します。Translator Text API の翻訳文字数に応じた課金 “Custom Translation - Translation ($40 per million chars of custom translation) “ は Speech Translation では発生しません。</p><ul><li><a href="https://azure.microsoft.com/en-us/pricing/details/cognitive-services/speech-services/">Speech Services の価格</a></li><li><a href="https://azure.microsoft.com/en-us/pricing/details/cognitive-services/translator/">Translator Text の価格</a></li></ul><hr><p><code>変更履歴</code><br><code>2021/05/17 created by Nakagami</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Speech Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Speech Services </tag>
            
            <tag> Custom Translator </tag>
            
            <tag> Speech SDK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bing Search API 関するお問い合わせについて</title>
      <link href="/blog/2021/04/30/support-request-for-bing-search-apis/"/>
      <url>/blog/2021/04/30/support-request-for-bing-search-apis/</url>
      
        <content type="html"><![CDATA[<p>Bing Search API に関するお問い合わせを起票いただく際にご留意いただきたい点をご案内します。</p><span id="more"></span><br><hr><h2 id="1-Bing-Search-API-の具体的な動作に関するご質問について"><a href="#1-Bing-Search-API-の具体的な動作に関するご質問について" class="headerlink" title="(1) Bing Search API の具体的な動作に関するご質問について"></a>(1) Bing Search API の具体的な動作に関するご質問について</h2><p>Bing Search API の具体的な動作、例えば特定のパラメーターを設定するとエラーが発生する、あるクエリのみレスポンスが非常に遅い、といった内容について調査を行うには、個々の API リクエストを一意に識別可能な <strong>BingAPIs-TraceId</strong> が必要となります。これは API のレスポンス ヘッダーに含まれています。</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-web-search/reference/headers">Web Search API v7 headers</a></li></ul><p>また、事象を再現可能な curl のコマンド例を併せて提供いただけるとよりスムーズに調査を行うことができます。例えば以下のように -v オプションを指定することで BingAPIs-TraceId を確認することもできます。</p><p>curl -v –header “Ocp-Apim-Subscription-Key: Key” “<a href="https://api.bing.microsoft.com/v7.0/custom/search?q=Test&customconfig=ID&setLang=ja&textDecorations=true&count=10&offset=10&textFormat=HTML">https://api.bing.microsoft.com/v7.0/custom/search?q=Test&amp;customconfig=ID&amp;setLang=ja&amp;textDecorations=true&amp;count=10&amp;offset=10&amp;textFormat=HTML</a>“ </p><ul><li><a href="https://curl.se/docs/manpage.html">curl command reference</a> (※弊社外のサイトとなります)</li></ul><p>その他 Bing Search API で利用可能なパラメーターやレスポンスの形式については以下のリファレンスをご参照ください。</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-web-search/reference/endpoints">Web Search API v7 reference</a></li></ul><p>なお、BingAPIs-TraceId は有効期限が非常に短いため、発生から時間が経過すると調査が困難になる場合があります。</p><h2 id="2-Bing-Search-API-で取得した情報の利用について"><a href="#2-Bing-Search-API-で取得した情報の利用について" class="headerlink" title="(2) Bing Search API で取得した情報の利用について"></a>(2) Bing Search API で取得した情報の利用について</h2><p>Bing Search API は Cognitive Services とは異なる利用条件が設定されています。</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-web-search/use-display-requirements">Bing Search API use and display requirements</a></li></ul><p>特に多くお問い合わせいただく内容として、Bing Search API の検索結果を機械学習もしくはそれに類する処理で使用することは禁止されています。また特定のシナリオついて、技術サポート窓口で利用の可否を回答することはできませんので、必要に応じて法務部門や顧問弁護士等の専門家にご相談いただき、利用者の責任においてご判断ください。</p><ul><li><a href="https://azure.microsoft.com/ja-jp/support/legal/">Microsoft Azure の法的情報</a></li></ul><h2 id="3-Bing-Search-API-で検索対象になる情報について"><a href="#3-Bing-Search-API-で検索対象になる情報について" class="headerlink" title="(3) Bing Search API で検索対象になる情報について"></a>(3) Bing Search API で検索対象になる情報について</h2><p>Bing Search API は<a href="http://www.bing.com/">一般向けの Bing</a> と同じ検索インデックスを使用しているため、インデックスに含まれていない Web ページやコンテンツは検索の対象となりません。すなわち、通常の Bing で検索できない情報は Bing Search API の検索結果にも含まれません。これは Bing Custom Search についても同様です。ご自身が管理しているコンテンツを Bing のインデックスに追加するための具体的な手法 (いわゆる検索エンジン対策, SEO) については Azure サポート プランの対象外となるため、Bing Webmaster へお問い合わせください。</p><p>Bing Webmaster について:</p><ul><li><a href="https://www.bing.com/webmasters/about">Bing Webmaster Tools</a></li><li><a href="https://www.bing.com/webmasters/help/webmaster-support-24ab5ebf">Bing Webmaster Support</a></li></ul><p>Bing Custom Search について:</p><ul><li><a href="https://docs.microsoft.com/en-us/bing/search-apis/bing-custom-search/how-to/define-your-custom-view">Configure your Bing Custom Search instance</a></li></ul><hr><p><code>変更履歴</code><br><code>2021/04/30 created by Nakagami</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
          <category> Bing Search API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bing Search API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QnA Maker の KB名称にエクスクラメーションアイコンが表示された場合の対応について</title>
      <link href="/blog/2021/03/18/exclamation-displayed-on-KBname/"/>
      <url>/blog/2021/03/18/exclamation-displayed-on-KBname/</url>
      
        <content type="html"><![CDATA[<p>QnA Maker の KB名称部分にエクスクラメーション記号（！）アイコンが表示された場合の対応をご説明します。  </p><span id="more"></span><br><p>QnA Maker ポータル画面左上のナレッジベース（KB）名称部位に赤いエクスクラメーションアイコンが表示される場合があります。</p><p><img src="https://jpaiblog.github.io/images/exclamation-displayed-on-kbname/exclamationicon.jpg" alt="exclamation" title="exclamation"> </p><p>このとき、表示されたアイコンににカーソルを重ねると、メッセージが表示されます。<br>表示されたメッセージの内容をご確認いただき、その内容に沿った対応をご実施ください。</p><p>（もし、メッセージが表示されない場合には、当ブログの　<a href="https://jpaiblog.github.io/blog/2020/11/11/not-expected-display-on-the-webbrowser/">Webポータル画面が期待通りに表示されない場合の確認方法</a>　の対応方法をご確認ください）</p><p>マークが示すメッセージとして可能性が高いものは、以下のランタイムの更新に関するメッセージです。</p><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/how-to/configure-qna-maker-resources#get-the-latest-runtime-updates">QnA Maker のリソースを構成する：最新のランタイム更新プログラムを取得する</a></p><blockquote><p>QnA Maker ランタイムは、Azure portal で QnA Maker サービスを作成するときにデプロイされる Azure App Service インスタンスの一部です。<br>ランタイムの更新は定期的に行われます。<br>QnA Maker App Service インスタンスは、2019 年 4 月のサイト拡張リリース (バージョン 5+) 以降は自動更新モードになります。<br>この更新は、アップグレード中のダウンタイムがゼロになるように設計されています。</p></blockquote><p>上記ドキュメントへのリンクを記載したメッセージが表示された場合には、その手順に沿い、ランタイムを手動更新することで、赤いエクスクラメーションアイコンの表示が消えます。  </p><p>または、ランタイムの自動更新が順次実施されていく間に、一時的にアイコン表示が行われる場合があります。<br>その場合には、手動更新を行わなくても、更新が自動適用されることにより、赤いエクスクラメーションアイコンの表示が消えます。  </p><hr><p><code>変更履歴</code><br><code>2021/03/18 created by Uehara</code><br><code>2022/01/25 created by Uehara</code>  </p>]]></content>
      
      
      <categories>
          
          <category> QNA Maker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> QNA Maker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QnA Maker における Excel ファイルを使用した QnA ペアの追加について</title>
      <link href="/blog/2021/02/03/QnA-Maker-Import-Excel/"/>
      <url>/blog/2021/02/03/QnA-Maker-Import-Excel/</url>
      
        <content type="html"><![CDATA[<p>Excel ファイルを利用して日本語の QnA ペアを追加する際の注意事項についてご紹介します。</p><span id="more"></span><br><hr><h1 id="Excel-ファイルを利用した場合の注意事項"><a href="#Excel-ファイルを利用した場合の注意事項" class="headerlink" title="Excel ファイルを利用した場合の注意事項"></a>Excel ファイルを利用した場合の注意事項</h1><p>Excel ファイルを利用して日本語の漢字を含める質問と回答を登録する際に、以下の図のように、登録された質問と回答の末尾に漢字のふりがなが付いていることがあります。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img01.png" width=800px>  <p>また、上記の図では、Excel ファイルの 「Prompts」 列に入っている、漢字を含める内容がマルチターンの Prompts として反映されていません。  </p><p>この事象の原因としては、Excel 上で漢字を入力した際に自動的に付加されたふりがな (ルビ) が QnA Maker によって抽出されたためと想定されます。  </p><ul><li><a href="https://support.microsoft.com/ja-jp/office/%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E6%96%87%E5%AD%97%E5%88%97%E3%81%AB%E3%81%B5%E3%82%8A%E3%81%8C%E3%81%AA-%E3%83%AB%E3%83%93-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B-673b30ed-6bbd-4759-870f-0e5616955e9a">日本語の文字列にふりがな (ルビ) を使用する</a></li></ul><blockquote><p>日本語データを入力するために使用された発音文字の文字列は、ルビを適用するために使用されます。<br>シートのデータを並べ替えると、既定では、日本語データはふりがなによって並べ替えられます。<br>(中略)<br>Excel の日本語バージョンでふりがなを表示し、漢字 (日本語の言語で使用される中国語の文字) を入力すると、自動的にルビ記号がガイドに追加されます。  </p></blockquote><p>これは以下の図のように、Excel 上で漢字のふりがなを表示することで確認できます。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img02.png" width=800px>   <p>現状 QnA Maker は Excel のふりがなも抽出するため、Excel が自動的に付与したふりがなを削除しない状態で、QnA Maker ポータルの [+Add file] もしくは [Import knowledge base] の機能で QnA ペアを追加した場合は、漢字のふりがなも質問と回答に含まれます。  </p><p>対処策としては、Excel ファイルからふりがなを削除することになりますが、以下の図ように、ふりがなを含むセルをコピーして別のセルへ「数式」として貼り付けると、ふりがなの部分はコピーされませんので、一括削除のアイデアとしてご参考ください。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img03.png" width=800px>    <p>上記のように、ふりがなを削除した状態の Excel ファイルを利用して質問と回答を追加した場合は、以下の通り漢字のふりがなは表示されません。また、Excel の「Prompts」列の内容もマルチターンの Prompts として反映されるようになります。  </p><img src="https://jpaiblog.github.io/images/QnA-Maker-Import-Excel/img04.png" width=800px>  <br><hr><p><code>変更履歴</code><br><code>2021/02/03 created by Chao</code>  </p>]]></content>
      
      
      <categories>
          
          <category> QNA Maker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> QnA ペアの追加 </tag>
            
            <tag> Excel ファイル </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webポータル画面が期待通りに表示されない場合の確認方法</title>
      <link href="/blog/2020/11/11/not-expected-display-on-the-webbrowser/"/>
      <url>/blog/2020/11/11/not-expected-display-on-the-webbrowser/</url>
      
        <content type="html"><![CDATA[<p>Web ポータル画面が 『プルダウンリストに選択肢が表示されるはずなのに、表示されない』 など、期待通りに表示されない場合に確認するポイントをご紹介します。</p><span id="more"></span><br><p>Coginitive Services の一部には、固有の Web ポータル画面を持つサービスがあります。<br>Azure ポータル画面や、それらサービス固有の Web ポータル画面で期待通りの画面表示とならない場合には、まず以下3点のポイントを確認してみてください。<br>（以下の画像は、Metrics Advisor サービスのポータル画面における画面表示例です）　　</p><p><img src="https://jpaiblog.github.io/images/not-expected-display-on-the-webbrowser/browser01.jpg" alt="browser01" title="browser01"> 　</p><ol><li><a href="#web-%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%81%8B%E3%82%89%E6%9C%80%E6%96%B0%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">Webブラウザーの言語翻訳機能の状態を確認する</a></li><li><a href="#web-%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%81%AE%E8%A8%80%E8%AA%9E%E7%BF%BB%E8%A8%B3%E6%A9%9F%E8%83%BD%E3%81%AE%E7%8A%B6%E6%85%8B%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">Webブラウザーから最新のデータにアクセスして確認する</a></li><li><a href="#%E7%8F%BE%E5%9C%A8%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B-web-%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E4%BB%A5%E5%A4%96%E3%81%AE%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">現在利用しているWebブラウザー以外のブラウザーを使用して確認する</a></li></ol><hr><h1 id="Web-ブラウザーの言語翻訳機能の状態を確認する"><a href="#Web-ブラウザーの言語翻訳機能の状態を確認する" class="headerlink" title="Web ブラウザーの言語翻訳機能の状態を確認する"></a>Web ブラウザーの言語翻訳機能の状態を確認する</h1><p>ブラウザー上で言語翻訳ツールなどをお使いでしたら、その機能が事象に影響している可能性があります。<br>翻訳機能を使用しない状態で画面表示をご確認ください。</p><hr><h1 id="Web-ブラウザーから最新のデータにアクセスして確認する"><a href="#Web-ブラウザーから最新のデータにアクセスして確認する" class="headerlink" title="Web ブラウザーから最新のデータにアクセスして確認する"></a>Web ブラウザーから最新のデータにアクセスして確認する</h1><p>Web ブラウザーがローカルに保存したキャッシュデータ等を使用しているために、古い状態のデータが画面表示されている可能性があります。  </p><p><img src="https://jpaiblog.github.io/images/not-expected-display-on-the-webbrowser/browser02.jpg" alt="browser02" title="browser02"></p><p>インターネット上の最新のデータにアクセスして画面表示が行えるよう、以下をご確認ください。</p><p>(1) Web ブラウザーのプライベート ブラウジングを用いて確認する  </p><p>プライベート ブラウジングでは、閲覧履歴、ダウンロード履歴、キャッシュ、Cookie などを保存せずに Web サイトを閲覧可能となります。 </p><p>Microsoft Edge をご利用の場合、以下のドキュメントの手順に添って、InPrivate ブラウズを利用してください。  </p><ul><li><a href="https://support.microsoft.com/ja-jp/help/4026200/microsoft-edge-browse-inprivate">Microsoft Edge で InPrivate ブラウズを使う</a></li></ul><p>Google Chrome をご利用の場合、以下の Google 社のヘルプドキュメントの手順に添って、シークレットブラウジングを利用してください。  </p><ul><li><a href="https://support.google.com/chrome/answer/95464?hl=ja">(Google Chrome ヘルプ) シークレット ブラウジング</a></li></ul><p>(2) ブラウザーのキャッシュを削除してから確認する </p><p>Microsoft Edge をご利用の場合、以下のドキュメント以下のドキュメントの [キャッシュされたデータとファイル] にて削除してください。  </p><ul><li><a href="https://support.microsoft.com/ja-jp/help/10607/microsoft-edge-view-delete-browser-history">Microsoft Edge の閲覧履歴を表示または削除する</a></li></ul><p>Google Chrome をご利用の場合、以下の Google 社のヘルプドキュメントの手順に添って削除してください。  </p><ul><li><a href="https://support.google.com/accounts/answer/32050">(Google Chrome ヘルプ) キャッシュと Cookie の消去</a></li></ul><hr><h1 id="現在利用している-Web-ブラウザー以外のブラウザーを使用して確認する"><a href="#現在利用している-Web-ブラウザー以外のブラウザーを使用して確認する" class="headerlink" title="現在利用している Web ブラウザー以外のブラウザーを使用して確認する"></a>現在利用している Web ブラウザー以外のブラウザーを使用して確認する</h1><p>現在利用している Web ブラウザー以外のブラウザーを使用した場合に、画面表示が変わるかどうかご確認ください。</p><p>原則として、次のブラウザーの最新バージョンがサポートされています。</p><ul><li>Microsoft Edge</li><li>Chrome</li><li>Firefox</li></ul><p>古いバージョンのブラウザーでは新機能に対応していないため、表示不具合に加えて、Javascript 実行エラーを含めた機能不具合が生じる可能性がございます。</p><hr><p><code>変更履歴</code><br><code>2020/11/11 created by Uehara</code><br><code>2023/02/24 modified by Uehara</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cognitive Services </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LUIS オーサリング リソースへの移行について</title>
      <link href="/blog/2020/06/05/LUIS-authoring-resource/"/>
      <url>/blog/2020/06/05/LUIS-authoring-resource/</url>
      
        <content type="html"><![CDATA[<p>LUIS オーサリング リソースへの移行について、オーサリング リソースの役割および移行による変更点を紹介します。</p><span id="more"></span><br><hr><p>現在 LUIS では Azure オーサリング リソースへの移行を進めており、<a href="https://www.luis.ai/">LUIS ポータル</a> 上での通知に加えて、対象ユーザーには個別で移行に関するご案内をしています。この記事では LUIS オーサリング リソースがどのような役割を持っているのか、また、移行を行うことによる変更点を紹介します。</p><h3 id="■LUIS-オーサリング-リソースの役割"><a href="#■LUIS-オーサリング-リソースの役割" class="headerlink" title="■LUIS オーサリング リソースの役割"></a>■LUIS オーサリング リソースの役割</h3><p>これまで LUIS は、利用開始に Azure サブスクリプションを必要としないサービスとして提供されてきました。Azure サブスクリプションをお持ちでなくても、LUIS のアプリケーションを作成することはできますが、実際にアプリケーションを Bot などから利用する場合には、 Azure の LUIS ランタイム (Prediciton) リソースをアプリケーションに紐づけて使用しています。</p><p>この場合、LUIS のアプリケーションは LUIS ポータルにサインインした、各ユーザーのアカウント (メールアドレス) に関連付けられています。一方で、ユーザーのメールアドレスに紐づけて管理していることにより、以下のような問題がありました。</p><ul><li>LUIS アプリケーションの所有権を他のユーザーに移転できない</li><li>Azure とは独立したシステムでアクセス権を制御するため統一的な管理が困難</li></ul><p>これらの問題を解決するため、LUIS のアプリケーション管理を Azure に統合する方針となり、LUIS オーサリング リソースが導入されました。</p><p>オーサリング リソースを使用しない場合と、オーサリング リソースを使用した場合の、アプリケーションの関連付けや共有方法の違いを図にまとめると以下のようになります。</p><p><img src="https://jpaiblog.github.io/images/LUIS-authoring-resource/LUIS-migration.png" alt="LUIS-migration"></p><p>他のユーザーが所有するアプリケーションにアクセスするには、移行前はコラボレーターと呼ばれる機能により、メールアドレス ベースで、アプリごとに設定する必要がありました。</p><p>一方で移行すると、 LUIS アプリケーションは LUIS オーサリング リソースに関連付けられ、そのリソースに対するアクセス権を Azure の標準的なロールベースのアクセス制御 (RBAC) で管理できるようになります。</p><h3 id="■ランタイム-リソースとオーサリング-リソースの関係"><a href="#■ランタイム-リソースとオーサリング-リソースの関係" class="headerlink" title="■ランタイム リソースとオーサリング リソースの関係"></a>■ランタイム リソースとオーサリング リソースの関係</h3><p>オーサリング リソースは LUIS アプリケーションを作成・編集するためだけに使用されます。予測エンドポイント API の使用には、引き続き LUIS アプリケーションに関連付けた、ランタイム (Prediciton) リソース、もしくは試用版の API キー (スターター キー) が必要です。この 2 種類のリソースの違いを図にすると以下のようになります。</p><p><img src="https://jpaiblog.github.io/images/LUIS-authoring-resource/LUIS-auth-endpoint-diff.png" alt="LUIS-auth-endpoint-diff"></p><p>ここで、オーサリング リソースを作成するリージョンと、ランタイム リソースを作成するリージョンは、顧客データの取り扱いに特別なルールがある地域 (オーストラリア、ヨーロッパ) を除き、異なるリージョンになっていても構いません。</p><p>2020 年 6 月 5 日現在、上記 2 つの地域以外のリージョンで LUIS アプリケーションを公開する場合は、オーサリング リソースのリージョンは米国西部のみとなります。公開を行うと、アプリケーションに関連付けられたランタイム リソースのリージョン (図の例では東日本リージョン) に自動で展開されます。</p><h3 id="■関連する公開ドキュメント"><a href="#■関連する公開ドキュメント" class="headerlink" title="■関連する公開ドキュメント"></a>■関連する公開ドキュメント</h3><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/luis-migration-authoring">Azure リソース オーサリング キーに移行する</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/luis-migration-authoring-steps">Azure オーサリング リソースに移行するための手順</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/luis-concept-keys">オーサリング キーとランタイム キー</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/luis-reference-regions#publishing-regions">作成と公開のリージョンと関連付けられているキー</a></li></ul><h3 id="■FAQ"><a href="#■FAQ" class="headerlink" title="■FAQ"></a>■FAQ</h3><h4 id="Q-オーサリング-リソースに移行しないとどうなる？"><a href="#Q-オーサリング-リソースに移行しないとどうなる？" class="headerlink" title="Q. オーサリング リソースに移行しないとどうなる？"></a>Q. オーサリング リソースに移行しないとどうなる？</h4><p>A. 2020 年 6 月 5 日現在、オーサリング リソースの移行期限は 2020 年 9 月 30 日となっております。2020 年 10 月 1 日時点で移行されていないアプリケーションはアクセスできなくなる可能性があります。</p><h4 id="Q-オーサリングリソースの移行単位は？"><a href="#Q-オーサリングリソースの移行単位は？" class="headerlink" title="Q. オーサリングリソースの移行単位は？"></a>Q. オーサリングリソースの移行単位は？</h4><p>A. オーサリング リソースへの移行は、 LUIS ポータルにサインインするユーザーアカウント単位です。移行作業では、自身が所有している LUIS アプリケーションを、どのオーサリング リソースに関連付けるかを指定します。組織単位でまとめて実施するような方法はありません。</p><h4 id="Q-オーサリング-リソースへの移行でダウンタイムが発生する？"><a href="#Q-オーサリング-リソースへの移行でダウンタイムが発生する？" class="headerlink" title="Q. オーサリング リソースへの移行でダウンタイムが発生する？"></a>Q. オーサリング リソースへの移行でダウンタイムが発生する？</h4><p>A. オーサリング リソースに移行しても、LUIS アプリケーションとランタイム リソースの紐づけはそのまま維持されます。移行作業中もエンドポイント API の呼び出しについてダウンタイムは通常発生しません。</p><h4 id="Q-オーサリング-リソースに移行したら他のユーザーからアプリケーションが見えなくなった"><a href="#Q-オーサリング-リソースに移行したら他のユーザーからアプリケーションが見えなくなった" class="headerlink" title="Q. オーサリング リソースに移行したら他のユーザーからアプリケーションが見えなくなった"></a>Q. オーサリング リソースに移行したら他のユーザーからアプリケーションが見えなくなった</h4><p>A. 移行前のコラボレーターの設定は自動では移行されませんので、移行後に RBAC で適切な権限の再設定が必要です。また RBAC の設定が適切でも、移行していないユーザーは、移行後のアプリケーションを LUIS ポータルで確認することはできません。</p><h4 id="Q-LUIS-の新規ユーザーはどうなる？"><a href="#Q-LUIS-の新規ユーザーはどうなる？" class="headerlink" title="Q. LUIS の新規ユーザーはどうなる？"></a>Q. LUIS の新規ユーザーはどうなる？</h4><p>A. 2020 年 6 月 5 日現在は LUIS の使用開始時に、アプリケーションの紐づけ先となる LUIS オーサリング リソースを指定するか、オーサリング リソースを利用せず試用版 (スターター キー) を使用するか選択できます。ここでオーサリング リソースを選択しなかった場合は期限までに移行が必要です。</p><h4 id="Q-LUIS-のアプリケーション単位で他のユーザーと共有したい"><a href="#Q-LUIS-のアプリケーション単位で他のユーザーと共有したい" class="headerlink" title="Q. LUIS のアプリケーション単位で他のユーザーと共有したい"></a>Q. LUIS のアプリケーション単位で他のユーザーと共有したい</h4><p>A. 移行後はオーサリング リソースにアプリケーションが関連付けられます。アクセス権を付与できるのはオーサリング リソース単位で、アプリケーション単位では付与できません。新しいオーサリング リソースを作成して、共有したいアプリケーションのみをインポートすることで、特定のアプリケーションを共有できます。</p><hr><p><code>変更履歴</code><br><code>2020/06/05 created by Nakagami</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LUIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Translator Text API の翻訳文字数の確認方法</title>
      <link href="/blog/2020/05/28/TranslatorTextAPI-char-translated/"/>
      <url>/blog/2020/05/28/TranslatorTextAPI-char-translated/</url>
      
        <content type="html"><![CDATA[<p>Translator Text API の翻訳文字数の確認方法と、参考情報をご紹介します。</p><ol><li><a href="#%E7%BF%BB%E8%A8%B3%E6%96%87%E5%AD%97%E6%95%B0%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E7%A2%BA%E8%AA%8D%E6%89%8B%E9%A0%86">翻訳文字数データの確認手順</a></li><li><a href="#%E7%BF%BB%E8%A8%B3%E6%96%87%E5%AD%97%E6%95%B0%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A8%E3%81%97%E3%81%A6%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B%E6%89%8B%E9%A0%86">翻訳文字数データをファイルとしてダウンロードする手順</a></li><li><a href="#%EF%BC%88%E5%8F%82%E8%80%83%E6%83%85%E5%A0%B1%EF%BC%89%E6%96%87%E5%AD%97%E6%95%B0%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E6%96%B9%E6%B3%95%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E5%85%AC%E9%96%8B%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88">（参考情報）文字数カウント方法に関する公開ドキュメント</a> <span id="more"></span><br></li></ol><hr><h1 id="翻訳文字数データの確認手順"><a href="#翻訳文字数データの確認手順" class="headerlink" title="翻訳文字数データの確認手順"></a>翻訳文字数データの確認手順</h1><p>(1) Azure Portal 上で、対象のTranslator Text API のリソースを選択します。<br>(2) [監視] ブレードの [メトリック] をクリックします。<br>(3) 表示された、画面中央の [メトリック] から [Text Characters Translated] または、カスタム翻訳を行った文字数の確認に関しては [Text Custom Characters Translated] を選択します。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-3.jpg" alt="char-translated-1-3" title="char-translated-1-3">  </p><p>(4) 画面右上にある [現地時刻: 過去 24 時間 (自動)] をクリックし、表示されたポップアップから希望の時間範囲と粒度を設定します。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-4.jpg" alt="char-translated-1-4" title="char-translated-1-4">  </p><p>(5) グラフ上に指定した期間の翻訳文字数が表示されます。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-5.jpg" alt="char-translated-1-5" title="char-translated-1-5">  </p><p>(6) グラフの中で確認したい時点にカーソルをあてると、その時間帯（指定した時間の粒度単位）に絞って、翻訳文字数を表示することができます。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char1-6.jpg" alt="char-translated-1-6" title="char-translated-1-6">  </p><p>翻訳文字数のグラフを表示する際に設定したメトリック [Characters Translated] の説明は、下記の公開ドキュメントを参照ください。  </p><ul><li><a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/metrics-supported#microsoftcognitiveservicesaccounts">Supported metrics with Azure Monitor #Microsoft.CognitiveServices&#x2F;accounts</a><blockquote><p>Characters Translated</p><blockquote><p>Total number of characters in incoming text request.</p></blockquote></blockquote></li></ul><hr><h1 id="翻訳文字数データをファイルとしてダウンロードする手順"><a href="#翻訳文字数データをファイルとしてダウンロードする手順" class="headerlink" title="翻訳文字数データをファイルとしてダウンロードする手順"></a>翻訳文字数データをファイルとしてダウンロードする手順</h1><p>(1) “１．翻訳文字数データの確認手順” に沿って、翻訳文字数のグラフを表示します。<br>(2) 表示された翻訳文字数のグラフ上部の　[共有] プルダウンから [Excelへのダウンロード] を選択します。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char2-2.jpg" alt="char-translated-2-2" title="char-translated-2-2">  </p><p>(3) 翻訳文字数のグラフを表示する際に設定した “メトリック”, “時間の範囲および粒度” のデータのExcelファイルがダウンロードされます。<br><img src="https://jpaiblog.github.io/images/TranslatorTextAPI-char-translated/char2-3.jpg" alt="char-translated-2-3" title="char-translated-2-3">  </p><hr><h1 id="（参考情報）文字数カウント方法に関する公開ドキュメント"><a href="#（参考情報）文字数カウント方法に関する公開ドキュメント" class="headerlink" title="（参考情報）文字数カウント方法に関する公開ドキュメント"></a>（参考情報）文字数カウント方法に関する公開ドキュメント</h1><p>どのようにAPIが呼び出されるかによって、カウントされる文字数は変わります。<br>例えば、1文字入力の場合でも、その後ろに空白が付与されたままの状態のテキストがAPIに渡された場合、空白も含めた文字数がカウントされます。‘A’ のような状態では、1文字とカウントされますが、後ろに3つ空白を付与した ‘A   ’ のような状態の場合は、4文字とカウントされます。空白の他にも、カウントされる対象がございますので、文字数カウント方法に関する詳細は、下記の公開ドキュメントをご確認ください。  </p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/translator/translator-faq">よく寄せられる質問 - Translator API：Translator では文字をどのようにカウントしますか。</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/05/28 created by Uehara</code><br><code>2022/01/25 modified by Uehara</code><br><code>2023/02/14 modified by Uehara</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Translator Text API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Translator Text API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure の関連ポータル サイトで一部の Azure サブスクリプションやリソースが表示されない事象の原因と対処策</title>
      <link href="/blog/2020/05/14/cognitive-portal-sub-not-found/"/>
      <url>/blog/2020/05/14/cognitive-portal-sub-not-found/</url>
      
        <content type="html"><![CDATA[<p>Azure の関連ポータル サイトで Azure サブスクリプションやリソースが表示されない原因と対処策について解説します。</p><span id="more"></span><br><hr><p>Azure で提供されているサービスの一部は、Azure ポータル以外に独自のポータル サイトを提供しています。<br>より具体的に Cognitive Services を例に挙げると以下のようなポータル サイトが存在します。</p><ul><li>QnA Maker: <a href="https://www.qnamaker.ai/">https://www.qnamaker.ai/</a></li><li>Custom Vision: <a href="https://www.customvision.ai/">https://www.customvision.ai/</a></li><li>Speech Services: <a href="https://speech.microsoft.com/">https://speech.microsoft.com/</a></li><li>LUIS: <a href="https://www.luis.ai/">https://www.luis.ai/</a></li></ul><p>これらのポータル サイトは Azure と連携しており、サインインしたユーザーの Azure サブスクリプションやリソースを、ポータル内で表示・操作することができます。</p><p>しかしながら、例えば、以下のように複数の Azure AD ディレクトリ (contoso.onmicrosoft.com と fabrikam.onmicrosoft.com) に関連付けられているユーザー アカウント (user@contoso.onmicrosoft.com) があるとします。この場合、ロールベースのアクセス制御 (RBAC) の設定が適切でも、上記のポータル サイトでサブスクリプションやリソースが表示されないことがあります。</p><p><img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/cognitive-portal-AAD-tenant.png" alt="Cognitive Portal Sign-in"></p><h3 id="■原因"><a href="#■原因" class="headerlink" title="■原因"></a>■原因</h3><p>これらのポータルサイトへ Azure AD の組織アカウントでアカウントサインインする場合、特定の Azure AD ディレクトリに依存しない common エンドポイント (login.microsoftonline.com&#x2F;<strong>common</strong>&#x2F;…) が使用されます。この時、サインイン先となるのは、ホーム ディレクトリ  (上記の図では ディレクトリ A の contoso.onmicrosoft.com) となります。通常はこの挙動で問題になることはありません。</p><p>しかし、別のディレクトリにゲスト ユーザーとして招待されることで、複数のディレクトリと関連付けられている場合、ホーム ディレクトリ以外のディレクトリ (上記の図では Bの fabrikam.onmicrosoft.com) に対するサインインは行われないため、そのディレクトリに対するアクセス トークンは取得されません。それにより、ポータルサイト上ではディレクトリ B に紐づいたサブスクリプションやリソースが表示されない事象が発生します。これは Azure AD ディレクトリへのサインインを伴うアクセス権の管理上想定される動作です。</p><h3 id="■対処策"><a href="#■対処策" class="headerlink" title="■対処策"></a>■対処策</h3><p>ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得するには、ディレクトリ B へのサインインを明示的に完了する必要があります。</p><h4 id="方法-1-ポータル-サイト内でディレクトリを変更する"><a href="#方法-1-ポータル-サイト内でディレクトリを変更する" class="headerlink" title="方法 1. ポータル サイト内でディレクトリを変更する"></a>方法 1. ポータル サイト内でディレクトリを変更する</h4><p>ポータル サイトによっては、サイト内でディレクトリを切り替える機能が用意されています。この機能を利用してディレクトリ B に切り替えます。</p><p>例. <a href="https://www.customvision.ai/">Custom Vision ポータル</a>:</p><p><img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/custom-vision-dir-switch.png" alt="Custom Vision portal dir switch"></p><p>これはディレクトリ (テナント) 固有のサインイン エンドポイント (login.microsoftonline.com&#x2F;**&lt;テナント ID またはテナント名&gt;&#x2F;**…) を使用してサインインすることで実現されています。</p><p>ご参考: <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/active-directory-v2-protocols#endpoints">Azure AD のサインイン エンドポイント</a></p><h4 id="方法-2-Azure-ポータルでディレクトリを変更する"><a href="#方法-2-Azure-ポータルでディレクトリを変更する" class="headerlink" title="方法 2. Azure ポータルでディレクトリを変更する"></a>方法 2. Azure ポータルでディレクトリを変更する</h4><p>ポータル サイト内でディレクリを切り替える機能が用意されていない場合は、Azure ポータル (<a href="https://portal.azure.com/">https://portal.azure.com</a>) を使ってディレクトリの切り替えを行います。そして、各サービスのポータルサイト (<a href="https://www.qnamaker.ai/">QnA Maker</a> など) にアクセスします。</p><p>特にディレクトリ B で多要素認証 (MFA) が強制されているなどサインイン方法に制約がある場合は、こちらの方法をお試しください。</p><p>Azure ポータルでのディレクトリの切り替え方法は次の手順のようになります。</p><ol><li><p>Azure ポータルの画面右上のユーザーアイコンから「ディレクトリの切り替え」を選択します</p><p> <img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/azure-portal-dir-switch-1.png" alt="Azure portal dir switch 1"></p></li><li><p>Azure サブスクリプションが存在するディレクトリを選択してサインインを完了します</p><p> <img src="https://jpaiblog.github.io/images/cognitive-portal-sub-not-found/azure-portal-dir-switch-2.png" alt="Azure portal dir switch 2"></p></li><li><p>Web ブラウザーの別のタブで対象のポータル サイト (例. <a href="https://www.qnamaker.ai/">QnA Maker</a>) を開きます</p></li></ol><p>もし上記の手順でもポータル サイトで Azure サブスクリプションやリソースが表示されない場合、既定のディレクトリを Azure サブスクリプションが紐づいたディレクトリに変更してから、そのディレクトリに切り替えることで解消するかご確認ください。</p><h3 id="■-補足"><a href="#■-補足" class="headerlink" title="■ 補足"></a>■ 補足</h3><p>ポータル サイト内でディレクトリを切り替える機能が用意されておらず、ホーム ディレクトリでサインインした場合でも、ゲスト ユーザーとして招待されているディレクトリ B に関連付けられた Azure サブスクリプションやリソースがポータル サイト上で表示されることがあります。</p><p>これは他のサイト、例えば Azure ポータルでディレクトリ B にサインインしていた場合、ブラウザーにディレクトリ B の認証情報がキャッシュされ、ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得できるためです。</p><p>ディレクトリ B で多要素認証 (MFA) が強制されているなど、サインイン方法に制約がある場合は、キャッシュされたサインイン情報が有効でないため、方法 2 のように Azure ポータルで MFA などの認証を完了する必要があります。  </p><hr><p><code>変更履歴</code><br><code>2020/05/14 created by Chao</code><br><code>2020/05/14 modified by Nakagami</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LUIS </tag>
            
            <tag> QnA Maker </tag>
            
            <tag> Custom Vision </tag>
            
            <tag> Speech Services </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cognitive Serivces で使用する API テスト ページについて</title>
      <link href="/blog/2020/04/30/test-APIs/"/>
      <url>/blog/2020/04/30/test-APIs/</url>
      
        <content type="html"><![CDATA[<p>Cognitive Serivces の API について、テスト実行用の参考サイトを紹介します。</p><span id="more"></span><br><hr><h4 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h4><ul><li><p>Cognitive Serivces の API は複数あります。どのような API があるかは以下サイトを参照ください。<br><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/welcome">Azure Cognitive Services とは</a>  </p></li><li><p>Azure REST API のリファレンス サイトより、Cognitive Services の REST API を確認できます。いくつかのサービスは、こちらのサイトから REST API の実行が可能です。<br><a href="https://docs.microsoft.com/en-us/rest/api/azure/">Azure REST API Reference</a><br><a href="https://docs.microsoft.com/en-us/rest/api/cognitiveservices/">Azure Cognitive Services REST API reference</a><br><a href="https://docs.microsoft.com/en-us/rest/api/cognitiveservices-bingsearch/">Azure Cognitive Services - Bing Search REST API reference</a>  </p></li><li><p>Cognitive Services 関連の API をまとめたサイトにも REST API を実行可能なページが用意されています。https:&#x2F;&#x2F; に続くリージョンの指定によっては API が用意されていない場合があるため、代表的な 4 リージョンを紹介します。<br><a href="https://westus.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (westus)</a><br><a href="https://westus2.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (westus2)</a><br><a href="https://southcentralus.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (southcentralus)</a><br><a href="https://westeurope.dev.cognitive.microsoft.com/docs/services">Cognitive Services APIs (westeurope)</a>  </p></li><li><p>REST API の実行には API キーが必要になります。以下のサイトから API キーを取得できます。こちらにないサービスについては、各サービスのクイック スタート ページ等から利用方法を参照ください。<br><a href="https://azure.microsoft.com/ja-jp/try/cognitive-services/">Cognitive Services を試す</a></p></li></ul><p><br>各 API のリンクを紹介します。 掲載されていないサービスは上述で列記したサイトより検索ください。  </p><hr><h4 id="Computer-Vision"><a href="#Computer-Vision" class="headerlink" title="Computer Vision"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/computer-vision/">Computer Vision</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Computer+Vision">Cognitive Services APIs (?pattern&#x3D;Computer%20Vision)</a></li></ul><hr><h4 id="Custom-Vision-Service"><a href="#Custom-Vision-Service" class="headerlink" title="Custom Vision Service"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/Custom-Vision-Service/">Custom Vision Service</a></h4><ul><li><a href="https://southcentralus.dev.cognitive.microsoft.com/docs/services?pattern=Custom_Vision">Cognitive Services APIs (?pattern&#x3D;Custom_Vision)</a></li></ul><hr><h4 id="Face"><a href="#Face" class="headerlink" title="Face"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/face/">Face</a></h4><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=Face+API">Cognitive Services APIs (?pattern&#x3D;Face+API)</a></li></ul><hr><h4 id="Form-Recognizer"><a href="#Form-Recognizer" class="headerlink" title="Form Recognizer"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/form-recognizer/">Form Recognizer</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Form+Recognizer">Cognitive Services APIs (?pattern&#x3D;Form+Recognizer)</a></li></ul><hr><h4 id="Speech-Service"><a href="#Speech-Service" class="headerlink" title="Speech Service"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/">Speech Service</a></h4><p>Speech Service はさらに複数のサービス・機能に分かれます。利用可能な REST API の直リンクを以下に列挙します。サービス、機能の一覧は <a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/overview">こちら</a> をご確認ください。  </p><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Speech+to+Text">Cognitive Services APIs (?pattern&#x3D;Speech+to+Text)</a>  </li><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speech-service/rest-speech-to-text">Speech to Text REST API</a>  </li><li><a href="https://signature.centralus.cts.speech.microsoft.com/UI/index.html">Conversation transcription (Preview)</a></li><li><a href="https://docs.microsoft.com/ja-jp/rest/api/speakerrecognition/">Speaker Recognition</a></li></ul><hr><h4 id="Speaker-Recognition"><a href="#Speaker-Recognition" class="headerlink" title="Speaker Recognition"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/speaker-recognition/home">Speaker Recognition</a></h4><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=Speaker+Recognition">Cognitive Services APIs (?pattern&#x3D;Speaker+Recognition)</a></li></ul><hr><h4 id="Language-Understanding-LUIS"><a href="#Language-Understanding-LUIS" class="headerlink" title="Language Understanding - LUIS"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/">Language Understanding - LUIS</a></h4><p>利用可能な REST API の仕様について <a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/luis/developer-reference-resource#rest-specifications">こちら</a> をご確認ください。  </p><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=LUIS">Cognitive Services APIs (?pattern&#x3D;LUIS)</a></li></ul><hr><h4 id="QnA-Maker"><a href="#QnA-Maker" class="headerlink" title="QnA Maker"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/">QnA Maker</a></h4><ul><li><a href="https://docs.microsoft.com/ja-jp/rest/api/cognitiveservices-qnamaker/">QnA Maker REST APIリファレンス</a></li></ul><hr><h4 id="Text-Analytics"><a href="#Text-Analytics" class="headerlink" title="Text Analytics"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/text-analytics/">Text Analytics</a></h4><ul><li><a href="https://centralus.dev.cognitive.microsoft.com/docs/services?pattern=Text+Analytics">Cognitive Services APIs (?pattern&#x3D;Text+Analytics)</a></li></ul><hr><h4 id="Anomaly-Detector"><a href="#Anomaly-Detector" class="headerlink" title="Anomaly Detector"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/anomaly-detector/">Anomaly Detector</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Anomaly+Detector">Cognitive Services APIs (?pattern&#x3D;Anomaly+Detector)</a></li></ul><hr><h4 id="Content-Moderator"><a href="#Content-Moderator" class="headerlink" title="Content Moderator"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/content-moderator/">Content Moderator</a></h4><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/content-moderator/api-reference">Content Moderator API リファレンス</a></li><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services?pattern=Content+Moderator">Cognitive Services APIs (?pattern&#x3D;Content+Moderator)</a></li></ul><hr><h4 id="Metrics-Advisor"><a href="#Metrics-Advisor" class="headerlink" title="Metrics Advisor"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/metrics-advisor/">Metrics Advisor</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Metrics+Advisor">Cognitive Services APIs (?pattern&#x3D;Metrics+Advisor)</a></li></ul><hr><h4 id="Personalizer"><a href="#Personalizer" class="headerlink" title="Personalizer"></a><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/personalizer/">Personalizer</a></h4><ul><li><a href="https://westus2.dev.cognitive.microsoft.com/docs/services?pattern=Personalizer">Cognitive Services APIs (?pattern&#x3D;Personalizer)</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/04/30 created by Mochizuki</code><br><code>2020/05/01 modified by Mochizuki</code><br><code>2020/10/19 modified by Mochizuki</code><br><code>2020/11/02 modified by Mochizuki</code><br><code>2022/06/08 modified by Mochizuki</code>  </p><p>※ 本記事は 「<a href="https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/">jpaiblog について</a>」 の留意事項に準じます。<br>※ 併せて 「<a href="https://jpaiblog.github.io/blog/">ホームページ</a>」 および 「<a href="https://jpaiblog.github.io/blog/archives/">記事一覧</a>」 もご参照いただければ幸いです。  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ポータルにサインインできない事象について (AADSTS650051)</title>
      <link href="/blog/2020/03/07/error-AADSTS650051/"/>
      <url>/blog/2020/03/07/error-AADSTS650051/</url>
      
        <content type="html"><![CDATA[<p>エラー コード AADSTS650051 を含むメッセージが出力し、製品ポータル (<a href="http://www.luis.ai/">www.luis.ai</a> や <a href="http://www.customvision.ai/">www.customvision.ai</a> など) へのサインインが失敗する場合の対処方法を紹介します。</p><span id="more"></span><br><hr><p>下記エラーメッセージは (ドメイン名) の DNS 名に紐づく Azure AD のテナントが、管理者不在のバイラル (非管理) テナントと呼ばれる状態 (unmanaged state) であり、それが原因でポータルへサインインできないことを意味します。  </p><blockquote><p>ErrorDescription’: ‘AADSTS650051: Using application ‘&lt;ポータル FQDN&gt;’ is currently not supported for your organization &lt;ドメイン名&gt; because it is in an unmanaged state. An administrator needs to claim ownership of the company by DNS validation of &lt;ドメイン名&gt; before the application &lt;ポータル FQDN&gt; can be provisioned.&#96;</p></blockquote><p>類似のサービスに関する記事とはなりますが、詳細と対処方法は以下をご参照ください。  </p><ul><li><a href="https://docs.microsoft.com/ja-jp/archive/blogs/jpcognitiveblog/cannot-signin-custom-vision-service-portal">非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法</a></li></ul><p>この問題は、当該テナントに紐づく (ドメイン名) のドメインの所有確認を行うことで解消されるため、以下のドキュメントの “3. 「管理者になる」メニューを実行します。” まで実施ください。  </p><ul><li><a href="https://docs.microsoft.com/ja-jp/archive/blogs/exchangeteamjp/domain-registered-by-self-service-sign-up">セルフサービス サインアップで登録されたドメインの対処方法</a></li></ul><p>なお、この問題を解消するだけであれば、手順 4 以降の作業は必要ありませんが、手順 3 を実施する段階で DNS の設定変更が必要となります。Azure AD テナントやドメインの管理者にて確認ください。<br><br></p><p>関連する公開情報:</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/b2b/troubleshoot#you-receive-an-aadsts65005-error-when-you-try-to-log-in-to-an-azure-resource">Azure リソースにログインしようとすると “AADSTS65005” エラーを受け取ります</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/users-groups-roles/domains-admin-takeover">Azure Active Directory の非管理対象ディレクトリを管理者として引き継ぐ</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/03/07 created by Mochizuki</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AADSTS650051 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QNA Maker の管理サービス (Cognitive Services リソース) のリージョンについて</title>
      <link href="/blog/2020/03/03/QNA-management-service/"/>
      <url>/blog/2020/03/03/QNA-management-service/</url>
      
        <content type="html"><![CDATA[<p>QNA Maker の管理サービス (Cognitive Services リソース) についてご紹介します。</p><span id="more"></span><br><hr><p>QnA Maker サービスの全体構成は下記ドキュメントの図を参照ください。   </p><ul><li><p><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/concepts/azure-resources">QnA Maker 用の Azure リソース</a></p><p> <img src="https://jpaiblog.github.io/images/QNA-management-service/key-management.png" alt="QNA Maker"></p></li></ul><p>Cognitive Services としてのリソースは、図中の右上の QnA Maker Subscription に相当します。例えば、ポータルを操作して KB を編集した場合、米国西部リージョンにおいてホストされている API 群が呼び出されます (5. Manage KB in portal or via APIs)。この API 群を別リージョンに移行することができないため、<a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/concepts/azure-resources#management-service-region">こちらのサイト</a> の記載の通り、Cognitive Services リソースは米国西部リージョン固定になります。  </p><p>米国西部リージョンにある API のバックエンドから、Web Apps 上でホストされた QnA Maker ランタイムに対してアクセスし、Q&amp;A の追加や削除といった操作が行われます。なお、実際の KB のコンテンツ (Q&amp;A、メタデータ等) は Azure Search に保存されており、ユーザーのチャットログは Application Insights に保存されているため、顧客データは米国西部リージョンには保存されません。  </p><p>※ 管理サービスで使用する API の詳細は以下サイトを参照ください。   </p><ul><li><a href="https://westus.dev.cognitive.microsoft.com/docs/services/5a93fcf85b4ccd136866eb37/operations/5ac266295b4ccd1554da75ff">QnA Maker V4.0</a></li></ul><p>KB を公開した後の、ボット等のアプリケーションからの問い合わせ (4. User QnA endpoint in Bot) は GenerateAnswer API が使用されます。これは QnA Maker ランタイム (Web Apps) に対して直接アクセスするため、米国西部リージョンを経由することはありません。</p><p>※ GenerateAnswer API の詳細は以下サイトをご参照ください。   </p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/cognitive-services/qnamaker/how-to/metadata-generateanswer-usage?tabs=v1">GenerateAnswer API およびメタデータを使って回答を取得する</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/03/03 created by Mochizuki</code>  </p>]]></content>
      
      
      <categories>
          
          <category> QNA Maker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 管理サービス </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>過去ブログについて</title>
      <link href="/blog/2020/01/12/past-blog/"/>
      <url>/blog/2020/01/12/past-blog/</url>
      
        <content type="html"><![CDATA[<p>過去のブログ情報を紹介します。</p><span id="more"></span><br><hr><h2 id="Cognitive-Services"><a href="#Cognitive-Services" class="headerlink" title="Cognitive Services"></a>Cognitive Services</h2><ul><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/255a225d-24e5-4e21-ad28-7fab33088131/translator-text-api-?forum=cognitivesupportteamja">Translator Text API の翻訳文字数の確認方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/fee57b8d-8d08-4036-9d2e-ad4f48812624/open-api-testing-console?forum=cognitivesupportteamja">Open API Testing Console</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/9555e55e-2af0-4130-948a-74ee3f6d349e/http-401-access-denied-invalid-subscription-key-?forum=cognitivesupportteamja">HTTP 401 Access Denied (invalid subscription key) のエラーが発生した場合の切り分け方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/9586428d-1ad8-4838-bac8-b37da05d9d47/cognitive-services-?forum=cognitivesupportteamja">Cognitive Services の料金について</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/1fc6d90a-f335-4a51-bbb4-7c168bf8358e/luis-wwwluisai-?forum=cognitivesupportteamja">LUIS ポータル (www.luis.ai) にサインインできない場合の対処方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/bcf0ea4b-04f2-4b81-9963-34d85b3594ef/qna-maker-api-v4-azure-search-?forum=cognitivesupportteamja">QnA Maker API V4 (一般公開版) の Azure Search に関するよくあるご質問</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/d4235f66-2c6d-4ad8-87ba-ec859e5bb33f/-custom-vision-service-?forum=cognitivesupportteamja">非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/d1b413b3-d0a7-4fb9-9938-01a52cb5f914/qna-maker-api-v4-?forum=cognitivesupportteamja">QnA Maker API V4 (一般公開版) のよくあるご質問</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/e9917891-e99e-481f-a32a-34f853fdd22b/bing-speech-api-api-10-15-?forum=cognitivesupportteamja">Bing Speech API の新規 API キー作成は 10 月 15 日で終了しました</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/5b3b97c3-532e-489c-b0cb-5546a2988427/cognitive-services-?forum=cognitivesupportteamja">Cognitive Services の技術サポートのお問い合わせ方法</a></li><li><a href="https://social.msdn.microsoft.com/Forums/ja-JP/ecab7e31-dddb-48bf-8a8f-7a9f347ae1b5/cognitive-services-tls-12-?forum=cognitivesupportteamja">Cognitive Services への接続には TLS 1.2 をご利用ください</a></li></ul><hr><p><code>変更履歴</code><br><code>2020/01/12 created by Mochizuki</code>  </p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 過去ブログ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jpaiblog について</title>
      <link href="/blog/2020/01/01/about-jpaiblog/"/>
      <url>/blog/2020/01/01/about-jpaiblog/</url>
      
        <content type="html"><![CDATA[<p>日本マイクロソフトの Cognitive Serivce に関するサポート情報のブログです。</p><h3 id="公開日"><a href="#公開日" class="headerlink" title="公開日"></a>公開日</h3><p>2020 年 1 月 1 日より公開いたしました。</p><h3 id="活動について"><a href="#活動について" class="headerlink" title="活動について"></a>活動について</h3><p>製品のサポート メンバーによって運用されております。仕様に関する情報やトラブル シューティングの手順、実装におけるワンポイント アドバイスを公開いたします。</p><h3 id="留意事項"><a href="#留意事項" class="headerlink" title="留意事項"></a>留意事項</h3><p>サイトのコンテンツや情報において、可能な限り正確な情報を掲載し、更新するよう努めております。しかしながら、状況の変化や情報が古くなることにより、必ずしもお客様環境に適用できない情報となる場合がございます。恐れ入りますが、予めご留意くださいますようお願い申し上げます。</p>]]></content>
      
      
      <categories>
          
          <category> Cognitive Services </category>
          
      </categories>
      
      
        <tags>
            
            <tag> はじめに </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
