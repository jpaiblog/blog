{"meta":{"title":"Japan Cognitive Services Support Blog","subtitle":"","description":"","author":"jpaiblog","url":"https://jpaiblog.github.io","root":"/blog/"},"pages":[],"posts":[{"title":"Translator Text API の翻訳文字数の確認方法","slug":"TranslatorTextAPI-char-translated","date":"2020-05-27T15:00:00.000Z","updated":"2020-06-02T10:45:33.706Z","comments":true,"path":"2020/05/28/TranslatorTextAPI-char-translated/","link":"","permalink":"https://jpaiblog.github.io/2020/05/28/TranslatorTextAPI-char-translated/","excerpt":"Translator Text API の翻訳文字数の確認方法と、参考情報をご紹介します。 翻訳文字数データの確認手順 翻訳文字数データをファイルとしてダウンロードする手順 （参考情報）文字数カウント方法に関する公開ドキュメント","text":"Translator Text API の翻訳文字数の確認方法と、参考情報をご紹介します。 翻訳文字数データの確認手順 翻訳文字数データをファイルとしてダウンロードする手順 （参考情報）文字数カウント方法に関する公開ドキュメント 翻訳文字数データの確認手順(1) Azure Portal 上で、対象のTranslator Text API のリソースを選択します。(2) [監視] ブレードの [メトリック] をクリックします。(3) 表示された、画面中央の [メトリック] から [Characters Translated] を選択します。 (4) 画面右上にある [現地時刻: 過去 24 時間 (自動)] をクリックし、表示されたポップアップから希望の時間範囲と粒度を設定します。 (5) グラフ上に指定した期間の翻訳文字数が表示されます。 (6) グラフの中で確認したい時点にカーソルをあてると、その時間帯（指定した時間の粒度単位）に絞って、翻訳文字数を表示することができます。 翻訳文字数のグラフを表示する際に設定したメトリック [Characters Translated] の説明は、下記の公開ドキュメントを参照ください。 Supported metrics with Azure Monitor #Microsoft.CognitiveServices/accounts Characters Translated Total number of characters in incoming text request. 翻訳文字数データをファイルとしてダウンロードする手順(1) “１．翻訳文字数データの確認手順” に沿って、翻訳文字数のグラフを表示します。(2) 表示された翻訳文字数のグラフ上部の [共有] プルダウンから [Excelへのダウンロード] を選択します。 (3) 翻訳文字数のグラフを表示する際に設定した “メトリック”, “時間の範囲および粒度” のデータのExcelファイルがダウンロードされます。 （参考情報）文字数カウント方法に関する公開ドキュメントどのようにAPIが呼び出されるかによって、カウントされる文字数は変わります。例えば、1文字入力の場合でも、その後ろに空白が付与されたままの状態のテキストがAPIに渡された場合、空白も含めた文字数がカウントされます。‘A’ のような状態では、1文字とカウントされますが、後ろに3つ空白を付与した ‘A ’ のような状態の場合は、4文字とカウントされます。空白の他にも、カウントされる対象がございますので、文字数カウント方法に関する詳細は、下記の公開ドキュメントをご確認ください。 Translator Text API の文字数のカウント方法 変更履歴2020/05/28 created by Uehara","categories":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/categories/Translator-Text-API/"}],"tags":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/tags/Translator-Text-API/"}]},{"title":"Azure の関連ポータル サイトで一部の Azure サブスクリプションやリソースが表示されない事象の原因と対処策","slug":"cognitive-portal-sub-not-found","date":"2020-05-13T15:00:00.000Z","updated":"2020-06-02T10:45:33.677Z","comments":true,"path":"2020/05/14/cognitive-portal-sub-not-found/","link":"","permalink":"https://jpaiblog.github.io/2020/05/14/cognitive-portal-sub-not-found/","excerpt":"Azure の関連ポータル サイトで Azure サブスクリプションやリソースが表示されない原因と対処策について解説します。","text":"Azure の関連ポータル サイトで Azure サブスクリプションやリソースが表示されない原因と対処策について解説します。 Azure で提供されているサービスの一部は、Azure ポータル以外に独自のポータル サイトを提供しています。より具体的に Cognitive Services を例に挙げると以下のようなポータル サイトが存在します。 QnA Maker: https://www.qnamaker.ai/ Custom Vision: https://www.customvision.ai/ Speech Services: https://speech.microsoft.com/ LUIS: https://www.luis.ai/ これらのポータル サイトは Azure と連携しており、サインインしたユーザーの Azure サブスクリプションやリソースを、ポータル内で表示・操作することができます。 しかしながら、例えば、以下のように複数の Azure AD ディレクトリ (contoso.onmicrosoft.com と fabrikam.onmicrosoft.com) に関連付けられているユーザー アカウント (user@contoso.onmicrosoft.com) があるとします。この場合、ロールベースのアクセス制御 (RBAC) の設定が適切でも、上記のポータル サイトでサブスクリプションやリソースが表示されないことがあります。 ■原因これらのポータルサイトへ Azure AD の組織アカウントでアカウントサインインする場合、特定の Azure AD ディレクトリに依存しない common エンドポイント (login.microsoftonline.com/common/…) が使用されます。この時、サインイン先となるのは、ホーム ディレクトリ (上記の図では ディレクトリ A の contoso.onmicrosoft.com) となります。通常はこの挙動で問題になることはありません。 しかし、別のディレクトリにゲスト ユーザーとして招待されることで、複数のディレクトリと関連付けられている場合、ホーム ディレクトリ以外のディレクトリ (上記の図では Bの fabrikam.onmicrosoft.com) に対するサインインは行われないため、そのディレクトリに対するアクセス トークンは取得されません。それにより、ポータルサイト上ではディレクトリ B に紐づいたサブスクリプションやリソースが表示されない事象が発生します。これは Azure AD ディレクトリへのサインインを伴うアクセス権の管理上想定される動作です。 ■対処策ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得するには、ディレクトリ B へのサインインを明示的に完了する必要があります。 方法 1. ポータル サイト内でディレクトリを変更するポータル サイトによっては、サイト内でディレクトリを切り替える機能が用意されています。この機能を利用してディレクトリ B に切り替えます。 例. Custom Vision ポータル: これはディレクトリ (テナント) 固有のサインイン エンドポイント (login.microsoftonline.com/&lt;テナント ID またはテナント名&gt;/…) を使用してサインインすることで実現されています。 ご参考: Azure AD のサインイン エンドポイント 方法 2. Azure ポータルでディレクトリを変更するポータル サイト内でディレクリを切り替える機能が用意されていない場合は、Azure ポータル (https://portal.azure.com) を使ってディレクトリの切り替えを行います。そして、各サービスのポータルサイト (QnA Maker など) にアクセスします。 特にディレクトリ B で多要素認証 (MFA) が強制されているなどサインイン方法に制約がある場合は、こちらの方法をお試しください。 Azure ポータルでのディレクトリの切り替え方法は次の手順のようになります。 Azure ポータルの画面右上のユーザーアイコンから「ディレクトリの切り替え」を選択します Azure サブスクリプションが存在するディレクトリを選択してサインインを完了します Web ブラウザーの別のタブで対象のポータル サイト (例. QnA Maker) を開きます もし上記の手順でもポータル サイトで Azure サブスクリプションやリソースが表示されない場合、既定のディレクトリを Azure サブスクリプションが紐づいたディレクトリに変更してから、そのディレクトリに切り替えることで解消するかご確認ください。 ■ 補足ポータル サイト内でディレクトリを切り替える機能が用意されておらず、ホーム ディレクトリでサインインした場合でも、ゲスト ユーザーとして招待されているディレクトリ B に関連付けられた Azure サブスクリプションやリソースがポータル サイト上で表示されることがあります。 これは他のサイト、例えば Azure ポータルでディレクトリ B にサインインしていた場合、ブラウザーにディレクトリ B の認証情報がキャッシュされ、ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得できるためです。 ディレクトリ B で多要素認証 (MFA) が強制されているなど、サインイン方法に制約がある場合は、キャッシュされたサインイン情報が有効でないため、方法 2 のように Azure ポータルで MFA などの認証を完了する必要があります。 変更履歴2020/05/14 created by Chao2020/05/14 modified by Nakagami","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/categories/Cognitive-Services/"}],"tags":[{"name":"QnA Maker","slug":"QnA-Maker","permalink":"https://jpaiblog.github.io/tags/QnA-Maker/"},{"name":"LUIS","slug":"LUIS","permalink":"https://jpaiblog.github.io/tags/LUIS/"},{"name":"Custom Vision","slug":"Custom-Vision","permalink":"https://jpaiblog.github.io/tags/Custom-Vision/"},{"name":"Speech Services","slug":"Speech-Services","permalink":"https://jpaiblog.github.io/tags/Speech-Services/"}]},{"title":"Cognitive Serivces で使用する API テスト ページについて","slug":"test_APIs","date":"2020-04-30T03:00:00.000Z","updated":"2020-06-02T10:45:33.701Z","comments":true,"path":"2020/04/30/test_APIs/","link":"","permalink":"https://jpaiblog.github.io/2020/04/30/test_APIs/","excerpt":"Cognitive Serivces の API について、テスト実行用の参考サイトを紹介します。","text":"Cognitive Serivces の API について、テスト実行用の参考サイトを紹介します。 はじめに Cognitive Serivces の API は複数あります。どのような API があるかは以下サイトを参照ください。Azure Cognitive Services とは Azure REST API のリファレンス サイトより、Cognitive Services の REST API を確認できます。いくつかのサービスは、こちらのサイトから REST API の実行が可能です。Azure REST API ReferenceAzure Cognitive Services REST API referenceAzure Cognitive Services - Bing Search REST API reference Cognitive Services 関連の API をまとめたサイトにも REST API を実行可能なページが用意されています。https:// に続くリージョンの指定によっては API が用意されていない場合があるため、代表的な 4 リージョンを紹介します。Cognitive Services APIs (westus)Cognitive Services APIs (westus2)Cognitive Services APIs (southcentralus)Cognitive Services APIs (westeurope) REST API の実行には API キーが必要になります。以下のサイトから API キーを取得できます。こちらにないサービスについては、各サービスのクイック スタート ページ等から利用方法を参照ください。Cognitive Services を試す API のテスト実行可能な直リンクを紹介します。Video Indexer, Bing Speech (廃止), Translator Speech (廃止), Translator Text, Bing Search 系 API は含まれません。 Computer Vision v3.0 (Preview) v2.1 Custom Vision Service v3.2 Training v3.0 Prediction Face v1.0 Form Recognizer (Preview) v2.0 (Preview) Ink Recognizer (Preview) v1.0 (Preview) Speech ServiceSpeech Service はさらに複数のサービス・機能に分かれます。利用可能な REST API の直リンクを以下に列挙します。サービス、機能の一覧は こちら をご確認ください。 Speech to Text - 音声テキスト変換 Text to Speech - テキスト読み上げ Conversation transcription - 会話の文字おこし (Preview) Speaker Recognition (Preview) v1.0 (Preview) Language Understanding - LUIS利用可能な REST API の仕様について こちら をご確認ください。 v3.0 オーサリング (preview) v3.0 予測 v2.0 オーサリング v2.0 予測 QnA Maker v4.0 Alterations v4.0 Endpoint Keys v4.0 Endpoint Settings v4.0 Knowledgebase v4.0 Operations v4.0 Runtime Text Analytics v3.0 (Preview) v2.1 Anomaly Detector (Preview) v1.0 (Preview) Content Moderator v1.0 Moderate v1.0 Review Personalizer v1.0 `変更履歴` `2020/04/30 created by Mochizuki` `2020/05/01 modified by Mochizuki`","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/categories/Cognitive-Services/"}],"tags":[{"name":"API","slug":"API","permalink":"https://jpaiblog.github.io/tags/API/"}]},{"title":"ポータルにサインインできない事象について (AADSTS650051)","slug":"error-AADSTS650051","date":"2020-03-06T15:00:00.000Z","updated":"2020-06-02T10:45:33.681Z","comments":true,"path":"2020/03/07/error-AADSTS650051/","link":"","permalink":"https://jpaiblog.github.io/2020/03/07/error-AADSTS650051/","excerpt":"エラー コード AADSTS650051 を含むメッセージが出力し、製品ポータル (www.luis.ai や www.customvision.ai など) へのサインインが失敗する場合の対処方法を紹介します。","text":"エラー コード AADSTS650051 を含むメッセージが出力し、製品ポータル (www.luis.ai や www.customvision.ai など) へのサインインが失敗する場合の対処方法を紹介します。 下記エラーメッセージは (ドメイン名) の DNS 名に紐づく Azure AD のテナントが、管理者不在のバイラル (非管理) テナントと呼ばれる状態 (unmanaged state) であり、それが原因でポータルへサインインできないことを意味します。 ErrorDescription’: ‘AADSTS650051: Using application ‘&lt;ポータル FQDN&gt;’ is currently not supported for your organization &lt;ドメイン名&gt; because it is in an unmanaged state. An administrator needs to claim ownership of the company by DNS validation of &lt;ドメイン名&gt; before the application &lt;ポータル FQDN&gt; can be provisioned.` 類似のサービスに関する記事とはなりますが、詳細と対処方法は以下をご参照ください。 非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法 この問題は、当該テナントに紐づく (ドメイン名) のドメインの所有確認を行うことで解消されるため、以下のドキュメントの “3. 「管理者になる」メニューを実行します。” まで実施ください。 セルフサービス サインアップで登録されたドメインの対処方法 なお、この問題を解消するだけであれば、手順 4 以降の作業は必要ありませんが、手順 3 を実施する段階で DNS の設定変更が必要となります。Azure AD テナントやドメインの管理者にて確認ください。 関連する公開情報: Azure リソースにログインしようとすると “AADSTS65005” エラーを受け取ります Azure Active Directory の非管理対象ディレクトリを管理者として引き継ぐ 変更履歴2020/03/07 created by Mochizuki","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/categories/Cognitive-Services/"}],"tags":[{"name":"AADSTS650051","slug":"AADSTS650051","permalink":"https://jpaiblog.github.io/tags/AADSTS650051/"}]},{"title":"管理サービスのリージョンについて","slug":"QNA-management-service","date":"2020-03-02T15:00:00.000Z","updated":"2020-06-02T10:45:33.697Z","comments":true,"path":"2020/03/03/QNA-management-service/","link":"","permalink":"https://jpaiblog.github.io/2020/03/03/QNA-management-service/","excerpt":"QNA Maker の管理サービスについて説明します。","text":"QNA Maker の管理サービスについて説明します。 QnA Maker サービスの全体構成は下記ドキュメントの図を参照ください。 QnA Maker のリソースを管理する この図の中で、Cognitive Services としてのリソースは QnA Maker Subscription に相当します。例えば、ポータルを操作して KB を編集した場合、米国西部リージョンにおいてホストされている API 群が呼び出されます (5. Manage KB in portal or via APIs)。この API 群を別リージョンに移行することができないため、こちら の記載の通り、Cognitive Services リソースは米国西部リージョン固定になります。 米国西部リージョンにある API のバックエンドから、Web Apps 上でホストされた QnA Maker ランタイムに対してアクセスし、Q&amp;A の追加や削除といった操作が行われます。なお、実際の KB のコンテンツ (Q&amp;A、メタデータ等) は Azure Search に保存されており、ユーザーのチャットログは Application Insights に保存されているため、顧客データは米国西部リージョンには保存されません。 ※ 管理サービスで使用する API の詳細は以下サイトを参照ください。 QnA Maker V4.0 KB を公開した後の、ボット等のアプリケーションからの問い合わせ (4. User QnA endpoint in Bot) は GenerateAnswer API が使用されます。これは QnA Maker ランタイム (Web Apps) に対して直接アクセスするため、米国西部リージョンを経由することはありません。 ※ GenerateAnswer API の詳細は以下サイトをご参照ください。 GenerateAnswer API およびメタデータを使って回答を取得する 変更履歴2020/03/03 created by Mochizuki","categories":[{"name":"QNA Maker","slug":"QNA-Maker","permalink":"https://jpaiblog.github.io/categories/QNA-Maker/"}],"tags":[{"name":"QNA Maker 管理サービス","slug":"QNA-Maker-管理サービス","permalink":"https://jpaiblog.github.io/tags/QNA-Maker-%E7%AE%A1%E7%90%86%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9/"}]},{"title":"過去ブログについて","slug":"past-blog","date":"2020-01-11T15:00:00.000Z","updated":"2020-06-02T10:45:33.684Z","comments":true,"path":"2020/01/12/past-blog/","link":"","permalink":"https://jpaiblog.github.io/2020/01/12/past-blog/","excerpt":"過去のブログ情報を紹介します。","text":"過去のブログ情報を紹介します。 Cognitive Services Translator Text API の翻訳文字数の確認方法 Open API Testing Console HTTP 401 Access Denied (invalid subscription key) のエラーが発生した場合の切り分け方法 Cognitive Services の料金について LUIS ポータル (www.luis.ai) にサインインできない場合の対処方法 QnA Maker API V4 (一般公開版) の Azure Search に関するよくあるご質問 非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法 QnA Maker API V4 (一般公開版) のよくあるご質問 Bing Speech API の新規 API キー作成は 10 月 15 日で終了しました Cognitive Services の技術サポートのお問い合わせ方法 Cognitive Services への接続には TLS 1.2 をご利用ください 変更履歴2020/01/12 created by Mochizuki","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/categories/Cognitive-Services/"}],"tags":[{"name":"過去ブログ","slug":"過去ブログ","permalink":"https://jpaiblog.github.io/tags/%E9%81%8E%E5%8E%BB%E3%83%96%E3%83%AD%E3%82%B0/"}]},{"title":"jpaiblog について","slug":"about-jpaiblog","date":"2019-12-31T15:00:00.000Z","updated":"2020-06-02T10:45:33.673Z","comments":true,"path":"2020/01/01/about-jpaiblog/","link":"","permalink":"https://jpaiblog.github.io/2020/01/01/about-jpaiblog/","excerpt":"","text":"日本マイクロソフトの Cognitive Serivce に関するサポート情報のブログです。 公開日2020 年 1 月 1 日より公開いたしました。 活動について製品のサポート メンバーによって運用されております。仕様に関する情報やトラブル シューティングの手順、実装におけるワンポイント アドバイスを公開いたします。 留意事項サイトのコンテンツや情報において、可能な限り正確な情報を掲載し、更新するよう努めております。しかしながら、状況の変化や情報が古くなることにより、必ずしもお客様環境に適用できない情報となる場合がございます。恐れ入りますが、予めご留意くださいますようお願い申し上げます。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/categories/Cognitive-Services/"}],"tags":[{"name":"はじめに","slug":"はじめに","permalink":"https://jpaiblog.github.io/tags/%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB/"}]}]}