{"meta":{"title":"Japan Cognitive Services Support Blog","subtitle":"","description":"","author":"jpaiblog","url":"https://jpaiblog.github.io/blog"},"pages":[],"posts":[{"title":"Text to Speech の API を Entra ID 認証で呼び出す方法","slug":"speech-how-to-call-API-with-Entra-ID-auth","date":"2025-04-20T15:00:00.000Z","updated":"2025-04-25T06:37:16.608Z","comments":true,"path":"2025/04/21/speech-how-to-call-API-with-Entra-ID-auth/","link":"","permalink":"https://jpaiblog.github.io/blog/2025/04/21/speech-how-to-call-API-with-Entra-ID-auth/","excerpt":"Speech Service の API、特に Text to Speech の API を Entra ID 認証で呼び出す方法について、Azure VM と curl を使用した場合の具体的な手順例をご紹介します。","text":"Speech Service の API、特に Text to Speech の API を Entra ID 認証で呼び出す方法について、Azure VM と curl を使用した場合の具体的な手順例をご紹介します。 Speech Service の API を Entra ID 認証で呼び出す方法Speech Service の API を Entra ID 認証で呼び出すには、他の Azure AI services とは異なり、認証トークンに追加の処理が必要です。この点を踏まえた具体的な手順例を以下にまとめていますので、アプリケーションへ組み込みいただく際の参考としてご利用ください。 事前準備 Azure VM でシステム割り当てのマネージド ID を有効 にします。 (1) のマネージド ID に、Speech Service のリソースに対して Cognitive Services Speech User のロールを割り当てます。 Cognitive Services User など他のロールでも可能です。 Speech Service のリソースでカスタムサブドメイン名を有効にします。 Entra ID 認証を使用するにはカスタムサブドメイン名を有効にする必要があります。この点は他の Azure AI services と共通です。 API 呼び出し以降は Azure VM (Linux) に SSH でログインして curl のコマンドで動作確認します。 マネージド ID を使用して Entra ID トークンを取得します。 コマンド例: 1curl -X GET &quot;http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&amp;resource=https%3A%2F%2Fcognitiveservices.azure.com&quot; -H &quot;Metadata: true&quot; 応答例: 12345678910&#123; &quot;access_token&quot;: &quot;eyJ0eX...g&quot;, &quot;client_id&quot;: &quot;2a...3&quot;, &quot;expires_in&quot;: &quot;86061&quot;, &quot;expires_on&quot;: &quot;1738835772&quot;, &quot;ext_expires_in&quot;: &quot;86399&quot;, &quot;not_before&quot;: &quot;1738749072&quot;, &quot;resource&quot;: &quot;https://cognitiveservices.azure.com&quot;, &quot;token_type&quot;: &quot;Bearer&quot;&#125; “aad#{resourceId}#{aadToken}” の形式でトークンを成形します。 例: 1aad#/subscriptions/&lt;Sub ID&gt;/resourceGroups/&lt;Resource Group&gt;/providers/Microsoft.CognitiveServices/accounts/&lt;Resource&gt;#eyJ0eX...g Text to Speech の API を呼び出します コマンド例: 12345678910curl -v --location --request POST &quot;https://&lt;Custom subdomain&gt;.cognitiveservices.azure.com/tts/cognitiveservices/v1&quot; \\--header &quot;Authorization: aad#/subscriptions/&lt;Sub ID&gt;/resourceGroups/&lt;Resource Group&gt;/providers/Microsoft.CognitiveServices/accounts/&lt;Resource&gt;#eyJ0eX...g&quot; \\--header &#x27;Content-Type: application/ssml+xml&#x27; \\--header &#x27;X-Microsoft-OutputFormat: audio-16khz-128kbitrate-mono-mp3&#x27; \\--header &#x27;User-Agent: curl&#x27; \\--data-raw &#x27;&lt;speak version=&#x27;\\&#x27;&#x27;1.0&#x27;\\&#x27;&#x27; xml:lang=&#x27;\\&#x27;&#x27;en-US&#x27;\\&#x27;&#x27;&gt; &lt;voice xml:lang=&#x27;\\&#x27;&#x27;en-US&#x27;\\&#x27;&#x27; xml:gender=&#x27;\\&#x27;&#x27;Female&#x27;\\&#x27;&#x27; name=&#x27;\\&#x27;&#x27;en-US-AvaMultilingualNeural&#x27;\\&#x27;&#x27;&gt; my voice is my passport verify me &lt;/voice&gt;&lt;/speak&gt;&#x27; &gt; output.mp3 応答例: 123&lt; HTTP/2 200&lt; date: Wed, 05 Feb 2025 10:02:43 GMT&lt; content-type: audio/mpeg 指定したフォーマット (audio-16khz-128kbitrate-mono-mp3) で音声ファイル (output.mp3) が出力されます。 変更履歴2025/04/21 created by Nakagami","categories":[{"name":"Speech Service","slug":"Speech-Service","permalink":"https://jpaiblog.github.io/blog/categories/Speech-Service/"}],"tags":[{"name":"Speech Service","slug":"Speech-Service","permalink":"https://jpaiblog.github.io/blog/tags/Speech-Service/"},{"name":"Text-to-Speech","slug":"Text-to-Speech","permalink":"https://jpaiblog.github.io/blog/tags/Text-to-Speech/"},{"name":"Synthesis","slug":"Synthesis","permalink":"https://jpaiblog.github.io/blog/tags/Synthesis/"}],"keywords":[{"name":"Speech Service","slug":"Speech-Service","permalink":"https://jpaiblog.github.io/blog/categories/Speech-Service/"}]},{"title":"Azure OpenAI Service に関する FAQ","slug":"AzureOpenAIService-FAQ","date":"2025-04-09T15:00:00.000Z","updated":"2025-04-25T06:37:16.152Z","comments":true,"path":"2025/04/10/AzureOpenAIService-FAQ/","link":"","permalink":"https://jpaiblog.github.io/blog/2025/04/10/AzureOpenAIService-FAQ/","excerpt":"この記事では、Azure OpenAI Service に関して Azure サポート によくお問い合わせいただくご質問と回答 (FAQ) をまとめています。","text":"この記事では、Azure OpenAI Service に関して Azure サポート によくお問い合わせいただくご質問と回答 (FAQ) をまとめています。 (1) 制限付きアクセス (Limited Access) についてAzure OpenAI Service には制限付きアクセス (Limited Access) のため、利用に事前の申請が必要なケースがあります。例: 新しくリリースされた制限付きアクセスのモデル (例: computer-use-preview) の利用 Modified Content Filtering の有効化 Modified Abuse Monitoring の有効化 Limited Access の申請・審査のプロセスは、マイクロソフト本社の特別な部門が管理しています。そのため Azure ポータルからのお問い合わせでは回答できません。申請フォームに記載のメールアドレス &#99;&#115;&#103;&#97;&#x74;&#x65;&#x40;&#109;&#105;&#99;&#114;&#111;&#115;&#x6f;&#102;&#116;&#x2e;&#x63;&#x6f;&#109; にご連絡ください。また &#99;&#x73;&#103;&#97;&#x74;&#101;&#x40;&#109;&#x69;&#x63;&#x72;&#111;&#115;&#x6f;&#102;&#116;&#x2e;&#x63;&#x6f;&#109; へのお問い合わせは 英語のみ での対応となりますのでご留意ください。 Q&amp;AQ: 申請フォームに記載するべき内容について確認したい。 申請が受理・承認されるまでの時間の目安を知りたい。 申請フォームからアクセスをリクエストしたが応答が無いため状況を確認したい。 申請が拒否されたのでその理由を知りたい・再審査を要求したい。 Content Filtering &#x2F; Abuse Monitoring について “オプトアウト” をリクエストしたい。 (注: マイクロソフトのドキュメントでは “オプトアウト” という単語は使用していません) A. 申請フォームに記載のメールアドレス &#x63;&#x73;&#x67;&#97;&#x74;&#101;&#64;&#109;&#x69;&#x63;&#114;&#111;&#x73;&#x6f;&#102;&#116;&#46;&#x63;&#x6f;&#x6d; にご連絡ください。Azure ポータルからのお問い合わせでは回答できません。 (2) クォータ申請についてAzure OpenAI Service では多くのお客様にご利用いただけるよう、利用量の上限 (クォータ) が設けられています。TPM &#x2F; RPM やユニット数に関する既定のクォータが不足する場合は、専用のフォームから引き上げをリクエストすることができます。 Q&amp;AQ. Azure サポートに TPM &#x2F; RPM のクォータ引き上げを依頼したい。A. Azure サポートを通じたクォータ引き上げリクエストはお承りしておりません。上記の通り専用のフォームからリクエストいただけます。 Q. 申請できるクォータの上限を知りたい。承認されるかどうか事前に確認したい。A. Azure サポートでは承認可否を事前に確認することはできません。実際に必要なクォータをフォームからリクエストいただくことをご検討ください。申請フォームでリクエスト可能な数量を超える場合、マイクロソフトのアカウント担当者 (以下、”アカウント チーム”) にお問い合わせください。 Q. クォータの申請が受理・承認されるまでの時間の目安を知りたい。A. クォータの引き上げ申請は Azure サポートではなく、専門の部署 (&#x6d;&#x73;&#97;&#x7a;&#117;&#x72;&#x65;&#x6f;&#x70;&#x65;&#110;&#97;&#x69;&#x40;&#x6d;&#105;&#x63;&#114;&#111;&#x73;&#x6f;&#102;&#x74;&#x2e;&#x63;&#111;&#109;) で審査されています。申請は受け付けた順に処理されます。リードタイムに関する保証はありません。 Q. クォータの引き上げをリクエストしたが応答が無いため状況を確認したい。A. Azure サポートでは申請の状況を確認したり、加速したりすることはできません。申請受領の応答メールにある担当部門の連絡先 (&#109;&#x73;&#97;&#122;&#117;&#114;&#x65;&#x6f;&#x70;&#101;&#110;&#97;&#105;&#64;&#x6d;&#105;&#x63;&#x72;&#111;&#x73;&#x6f;&#102;&#x74;&#46;&#99;&#111;&#x6d;, 英語のみ) にお問い合わせいただくことをご検討ください。また個別の審査状況についてビジネス面からの優先対応をご要望の場合はアカウント チームへご相談ください。 申請フォームより抜粋: 1Azure Technical Support cannot be used to expedite the submission process. Q. クォータ引き上げのリクエストが拒否された。A. Azure OpenAI Service は世界中から需要があるため、リクエストされた内容 (リージョン・デプロイの種類・数量) によってはお承りできない場合があります。リクエスト内容を変更して再度申請いただくことをご検討ください。Azure サポートでは具体的な理由の説明や再審査のリクエストは受付できません。もし同じ内容での再審査をご希望の場合はアカウント チームへご相談ください。 Q. Provisioned のデプロイで 1000 ユニットを超えるクォータをリクエストしたい。A. 申請フォームでリクエスト可能な数量を超える場合、アカウント チームにお問い合わせください。 Q. TPM &#x2F; RPM のクォータ変更をリクエストをしていないがクォータの上限が変更された。A. クォータの上限は変更される可能性があります。変更後のクォータで不足する場合は上記の通り専用のフォームからリクエストいただけます。 参考: Manage Azure OpenAI Service quota12ImportantQuotas and limits are subject to change, for the most up-date-information consult our quotas and limits article. Q. CSP サブスクリプションでは誰が申請するべきか？パートナーか、エンドユーザーか？A.原則としてはサブスクリプションの種類によらず、リクエスト対象の Azure サブスクリプションについて契約上の責任を負う方から申請いただくことを想定しています。Azure サポートでは個別のケースについて具体的な入力内容のアドバイスをすることはできません。 (3) サンプルの Web アプリについてAzure OpenAI Studio や Azure AI Foundry のチャット プレイグランドでは、 サンプルの Web アプリをデプロイすることができます。この Web アプリはサンプルであり、マイクロソフトが動作を保証するものではありません。お客様ご自身が独自に開発されたアプリケーションと同じ扱いになります。このサンプルのサポートについては GitHub に記載されています。 Q&amp;AQ. デプロイされた Web アプリにアクセスできない。A. Web アプリケーションのどこで問題が発生しているのか (例. Entra ID 認証がエラーになる) についてはお客様側で切り分けが必要です。ソースコードは GitHub でご確認いただけます。 Q. Web アプリで操作 (例. チャットのメッセージ送信) を行うとエラーになる。A. お客様側で Web アプリの実装に依存しないことが切り分けされている (例. curl で呼び出した場合でも再現することを確認している) 場合は、具体的にエラーになっているサービス・API について Azure サポートで調査を支援することは可能です。 Q. 環境変数を変更したが期待する動作にならない。A. サンプルコードの問題は GitHub の Issues で報告いただけます。サンプルコードの調査・デバッグは Azure サポートの対応範囲外です。 Q. 仮想ネットワークに統合してプライベート エンドポイント経由でアクセスできるようにしたい。A. 各サービスのネットワークに関連した機能についてそれぞれご確認ください。このサンプルを前提とした手順や構成例は用意されていません。 Azure OpenAI Service、特に On-Your-Data をご利用の場合に、ネットワークを制限 (いわゆる “閉域化”) を行う方法については、ドキュメントが用意されています。それぞれの製品 (例. App Service の仮想ネットワーク統合) の具体的な設定に関するお問い合わせは対象のサービス・リソースを選択して Azure ポータルからご起票ください。 Q. サンプルの Web アプリで可能ことを確認したい。A. Web アプリの実装や機能に関する解説は Azure サポートでは行っておりません。具体的な実装は GitHub をご確認ください。 Q. Web アプリの表示を変更したい・機能を追加したい。A. お客様個別のご要件に応じた設定のアドバイスや、カスタマイズされたコードの提供は Azure サポートでは行っておりません。GitHub のソースコードを元に必要な変更を行ってください。 (4) 新しいモデル・機能やリージョンの利用可否について将来のリリース予定については、一般に公開 (マイクロソフト公式のドキュメントやブログで広くアナウンス) されていない限り、ビジネス上の機密情報に当たるため、Azure サポートでは回答できません。 Q&amp;AQ: OpenAI が発表した新機能が Azure OpenAI Service でいつ利用できるようになるのか。 OpenAI の新しいモデルを Azure で利用したいが提供予定を教えてほしい。 あるリージョン (例. 東日本) で特定のモデル・バージョンが利用できるようになる時期を知りたい。 データの所在地に要件があるため Standard のデプロイで利用したい。Standard のデプロイで利用できるようになる予定はあるか。 A. 公開情報でのアナウンスをお待ちください。 Azure OpenAI Service や Azure AI Foundry のリリース情報は製品開発部門のブログでもご確認いただけます。 補足: ドキュメントの更新についてリージョンやモデルの利用可否を列挙している公開ドキュメントは手動で更新されており、最新の状況が反映されていない場合があります。また Limited Access のため一部のサブスクリプションに限定して提供されている場合もあります。 そのため実際に利用可能なモデル・バージョン・リージョン・デプロイの種類に関する最新の情報は、ご利用の Azure サブスクリプションで Model Capacities - List の API を使用してご確認いただくことが推奨されます。 Azure CLI での実行例:123456789101112131415161718192021$ az rest --method get --url &quot;/subscriptions/&lt;YOUR SUB ID&gt;/providers/Microsoft.CognitiveServices/modelCapacities?api-version=2024-04-01-preview&amp;modelFormat=OpenAI&amp;modelName=gpt-4o&amp;modelVersion=2024-11-20&quot; ... &#123; &quot;id&quot;: &quot;/subscriptions//&lt;YOUR SUB ID&gt;/providers/Microsoft.CognitiveServices/locations/japaneast/models/OpenAI.gpt-4o.2024-11-20/skuCapacities/Standard&quot;, &quot;location&quot;: &quot;japaneast&quot;, &quot;name&quot;: &quot;Standard&quot;, &quot;properties&quot;: &#123; &quot;availableCapacity&quot;: 50, &quot;model&quot;: &#123; &quot;format&quot;: &quot;OpenAI&quot;, &quot;name&quot;: &quot;gpt-4o&quot;, &quot;version&quot;: &quot;2024-11-20&quot; &#125;, &quot;skuName&quot;: &quot;Standard&quot; &#125;, &quot;type&quot;: &quot;Microsoft.CognitiveServices/locations/models/skuCapacities&quot; &#125;,... Azure CLI については Azure ポータルの Cloud Shell でも利用できます。 (5) 利用契約や関連法規についてAzure の 技術 (テクニカル) サポートは API 呼び出し時のエラーなど、何らか技術的な問題が発生した際のトラブルシューティングや修正 (break fix) を支援するものです。 Azure サポートでは利用規約や法規に関するご質問、例えば法律的な解釈や法務的なアドバイスを差し上げることはできません。 Q&amp;AQ. 現在想定している使い方は利用規約の観点から問題無いか。A. Azure サポートでは個別の利用シナリオについて可否を判断することはできません。関連する利用規約や法規に照らした場合に問題無いかどうかは、必要に応じて専門家 (法務部門や顧問弁護士など) を交えて、ユーザー側の責任でご判断いただく必要があります。 Q. Azure OpenAI Service の準拠法・管轄裁判所について教えてほしい。A. Azure OpenAI Service は Azure サブスクリプションの契約に基づいて提供されます。準拠法や管轄裁判所は Azure OpenAI Service 固有ではなく、Azure サブスクリプションの契約で規定されているため、契約内容をご確認ください。 Q. Azure OpenAI Service で日本国外のリージョンを使用する場合、個人情報保護法で規定された第三者提供に当たるのか。A. 関連する利用規約やドキュメントを元にユーザー側でご判断ください。 Azure OpenAI Service に限らず、多くの Azure サービスにおける顧客情報の取り扱いについては、サブスクリプションの利用開始時に同意されている契約条項が適用されます。 顧客情報の取り扱い (例. EU の GDPR への準拠等) については、“Microsoft 製品およびサービス データ保護補遺” (Microsoft Products and Services Data Protection Addendum , DPA) に規定されています。 Azure OpenAI Service については製品固有の利用条件 (Product Terms) があり、例えば Abuse Monitoring について規定されています。 具体的な Azure OpenAI Service における顧客情報の取り扱いについては Data, privacy, and security for Azure OpenAI Service でも説明されています。 これらに照らした場合に、想定されている利用方法が日本の個人情報保護法の観点で問題があるかどうかについては、Azure サポートでは回答できません。必要に応じて専門家 (法務部門や顧問弁護士など) にご相談ください。 また公開情報に記載が無い、製品の内部仕様については回答できません。内部仕様は予告無く変更される可能性があるため、法務的な判断に利用することは推奨できかねます。 Q. Azure OpenAI Service を使用して生成されたテキストや画像の著作権はサービスの利用者に帰属するのか。A. ユーザーが Azure OpenAI Service を利用して生成したテキストや画像は顧客データです。一方これは生成物の知的財産権 (例.著作権) がユーザーに帰属することをマイクロソフトが約束するものではありません。 「AI が生成したものに著作権が認められるのかどうか？」は各国や地域の法律、また具体的な事例によっても判断が異なっています。例えば日本では文化庁が生成 AI と著作権に関するガイドライン (外部リンク)を公開しています。 想定されている利用方法で知的財産権に関する問題が無いかどうかは、必要に応じて専門家 (例. 著作権を専門とする弁護士) にご相談ください。 補足として、Customer Copyright Commitment (CCC) は「知的財産権 (intellectual property) に限って、もし第三者から権利侵害の申し立てがあった場合に、一定の要件を満たせば、マイクロソフトがお客様に代わって防御 (defend) する」という規定です。知的財産権の帰属を担保するものではありません。 製品条項 (Product Terms) の規定より抜粋: 12Customer Copyright CommitmentMicrosoft’s obligation to defend Customer against third-party intellectual property claims under Customer’s volume licensing agreement will apply to Customer’s use or distribution of Output Content of a Covered Product if all the following additional conditions are met: Microsoft Customer Agreement の日本語ドキュメントより抜粋: 123第三者からの申し立てに対する防御 両当事者は、本条に規定する第三者からの申し立てについて、他方当事者を防御し、敗訴の確定判決または他方当事者が承認した和解によって生じた金員を支払うものとします。ただし、防御を行う当事者が、当該申し立てについて速やかに書面で通知を受け、その防御および和解を管理する決定権を与えられた場合に限ります。防御される当事者は、防御を行う当事者に対し、要請されたすべての支援、情報および権限を提供しなければなりません。防御を行う当事者は、他方当事者が支援の提供のために現実に支出した合理的な経費を補償します。本条は、かかる申し立てにおける両当事者の唯一の権利および全責任について規定するものです。 Q. Customer Copyright Commitment (CCC) について適用条件を満たすために十分と言えるかどうか判断してほしい。A. 条件に準拠していることはユーザー自身が判断して示す必要があります。 例えば “Testing and Evaluation Report” の項目について、現在実施している内容が十分かどうかは関連するドキュメントに照らしてユーザーが判断する必要があります。 もしコンテンツ フィルターなどの技術的な設定で問題がある場合は Azure サポートで対応できます。 参考: Azure OpenAI Service に関してよく寄せられる質問12Customer Copyright Commitment に基づくカバレッジを取得するにはどうすればよいですか?Customer Copyright Commitment は、2023 年 12 月 1 日の Microsoft の製品条項に含まれる規定であり、出力コンテンツに関連する特定のサードパーティの知的財産権に関するクレームから顧客を保護するための Microsoft の義務を説明するものです。 クレームの対象が Azure OpenAI Service (または顧客が安全システムを構成できる他の対象製品) から生成された出力コンテンツである場合は、カバレッジを受けるために、顧客は出力コンテンツを提供するオファリングで Azure OpenAI Service ドキュメントで必要とされるすべての軽減策を実装している必要があります。 必要な軽減策については、こちらに記載されており、継続的に更新されています。 新しいサービス、機能、モデル、またはユース ケースの場合、新しい CCC 要件が投稿され、そのようなサービス、機能、モデル、またはユース ケースの開始時または開始後に有効になります。 それ以外の場合、CCC のカバレッジを維持するために、顧客は公開から 6 か月以内に新しい軽減策を実装することになります。 顧客がクレームを申し立てる場合、その顧客は関連する要件への準拠を示す必要があります。 これらの軽減策は、Azure OpenAI Service を含め、顧客が安全システムを構成できる対象製品に必要です。他の対象製品を使っている顧客のカバレッジには影響しません。 変更履歴2025/04/10 created by Nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"Azure OpenAI Service の Provisioned デプロイについて","slug":"AzureOpenAIService-Provisioned-Deployment","date":"2024-08-28T15:00:00.000Z","updated":"2025-04-25T06:37:16.262Z","comments":true,"path":"2024/08/29/AzureOpenAIService-Provisioned-Deployment/","link":"","permalink":"https://jpaiblog.github.io/blog/2024/08/29/AzureOpenAIService-Provisioned-Deployment/","excerpt":"この記事では、 Azure OpenAI Service のデプロイの種類のひとつである Provisioned (プロビジョニング済み) について説明します。","text":"この記事では、 Azure OpenAI Service のデプロイの種類のひとつである Provisioned (プロビジョニング済み) について説明します。 Provisioned (プロビジョニング済み) のデプロイの概要Azure OpenAI Service では、モデルをデプロイする際にデプロイの種類を選択します。その中で今回紹介するのは “プロビジョニング済み” (Provisioned または Provisioned-managed) のデプロイです。 2024年8月の更新により、広く一般に Provisioned のデプロイが利用できるようになりました (それ以前は、Microsoft のアカウントチームを通じて個別でリクエストが必要でした)。これに伴い、利用方法や料金体系も変更となっています。 新しい Provisioned のポイント ユーザーは割り当てられたクォータの範囲で、デプロイの種類:Provisioned-managed のデプロイを作成することができます Provisioned-managed のデプロイを作成すると、ユニット数および利用時間に応じた課金が発生します (処理されたトークン数に基づく従量課金ではありません) (必要に応じて) 月単位または年単位で予約 (Reservation) を購入することで料金が割り引かれます 時間単位の課金を停止するにはデプロイを削除します 時間単位の課金についてProvisioned のデプロイでは、指定されたユニット (Provisioned Throughput Unit, PTU) の数に応じて、ハードウェアの処理容量 (キャパシティ) が占有されます。これにより、トークン数に応じた従量課金 (Standard, Global Standard) のデプロイよりも安定したパフォーマンスが見込める一方で、高性能なハードウェアを占有するために比較的高い単価となっています (1 ユニット、 1 時間当たり 2 USD など)。また、モデル毎に最低ユニット数が決まっており、例えば gpt-4o mini であれば 25 PTU が最小単位であるため、時間単位の課金では最低でも 25 * 2 &#x3D; 50 USD が 1 時間ごとに課金されます。※最新の価格はAzure OpenAI Service の価格をご参照ください。 利用可能なリージョンやモデルについてリージョンやモデル、バージョンによって、Provisioned のデプロイの利用可否は異なります。例えば、東日本リージョンでは gpt-4o は Standard では提供されていませんが、Provisioned であれば提供されています。最新の提供状況についてはAzure OpenAI Service modelsをご参照ください。 デプロイ時の表示についてAzure OpenAI Studio からモデルをデプロイする際には、デプロイの種類は Provisioned-managed と表示されます。また、指定されたユニット数に応じた時間単位の課金額の見込みも確認できます。 Azure OpenAI Studio での表示例: Provisioned のデプロイを制限する方法Azure サブスクリプションで Provisioned のデプロイを作成できないように制限する必要がある場合は、Azure Policy により利用可能なデプロイの種類を限定できます。 Provisioned のデプロイを禁止するポリシー定義の例: 12345678910111213141516171819&#123; &quot;policyRule&quot;: &#123; &quot;if&quot;: &#123; &quot;allOf&quot;: [ &#123; &quot;field&quot;: &quot;type&quot;, &quot;equals&quot;: &quot;Microsoft.CognitiveServices/accounts/deployments&quot; &#125;, &#123; &quot;field&quot;: &quot;Microsoft.CognitiveServices/accounts/deployments/sku.name&quot;, &quot;equals&quot;: &quot;ProvisionedManaged&quot; &#125; ] &#125;, &quot;then&quot;: &#123; &quot;effect&quot;: &quot;Deny&quot; &#125; &#125;&#125; ポリシーにより操作がブロックされた場合の表示例: 参考 1. チュートリアル:コンプライアンスを強制するポリシーの作成と管理 - 新しいカスタム ポリシーを実施する 参考 2. クイックスタート: Azure portal を使用して、ポリシーの割り当てを作成し、準拠していないリソースを特定する - ポリシー割り当てを作成する 以上は2024年8月29日時点の情報です。日本語での表示名等は今後変わる可能性があります。最新の情報は公式ドキュメントを併せてご参照ください。 変更履歴2024-08-29 created by nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"メトリック エクスプローラーを用いてAzure OpenAI の トークン使用量を確認する方法","slug":"AzureOpenAIService-Metric-TPM","date":"2024-07-24T15:00:00.000Z","updated":"2025-04-25T06:37:16.198Z","comments":true,"path":"2024/07/25/AzureOpenAIService-Metric-TPM/","link":"","permalink":"https://jpaiblog.github.io/blog/2024/07/25/AzureOpenAIService-Metric-TPM/","excerpt":"この記事はAzure Portal 上で使用できるメトリック エクスプローラーを用いて、トークン使用量の推移をグラフで表示させる方法についてご紹介します。","text":"この記事はAzure Portal 上で使用できるメトリック エクスプローラーを用いて、トークン使用量の推移をグラフで表示させる方法についてご紹介します。 メトリックについてメトリックとは、Azure 上で特定のリソースに紐づいて集計された測定値のことを指します。Azure OpenAI リソースで集計されるメトリックには、リソースのパフォーマンスや使用状況を評価するための指標が含まれます。 具体的には、Azure OpenAI リソースに関する、HTTP 要求数、入出力で処理されたトークン数、微調整モデルで処理されたトレーニング時間数などが含まれます。このように、メトリックを確認することで現在までのトークンの使用量を簡単に確認することできるため、トークン数の消費が多い時間帯の可視化が可能になります。 メトリックを通じて Azure OpenAI モデルで処理された入出力トークン数を確認する方法Azure Portal 上で該当するメトリックを確認する手順についてご紹介します。まず、以下の画像のようにAzure Portal のホーム画面から、対象の Azure OpenAI のリソースを開きます。 次に、以下の画像のように、上でアクセスしたAzure OpenAIリソース画面の左側のタブから「メトリック」を選択します。選択しますと、ページ上にメトリック エクスプローラーを開くことが出来ます。この時メトリック エクスプローラーを操作し、「スコープ」に Azure OpenAI リソース名、「メトリック名前空間」に「コグニティブ サービス 標準的なメトリック」が表示されているかを確認します。 ここでは、Azure OpenAI モデルで処理された入出力トークンの数「Processed Inference Tokens」を示すことを考えてみます。 公式ドキュメントAzure OpenAI Service の監視 より「Azure OpenAIのメトリック」を参照することで、Azure Portalで確認できる「メトリック」と「集計」の情報を確認することができます。 以下は公式ドキュメントの一部を抜粋したものですが、今回該当するメトリックは、入力と出力の合計のトークンであることから「メトリック」の列を見ると「Processed Inference Tokens」であることがわかります。また、その集計方法については、「集計」の列を見ると「SUM」(合計)であることがわかります。そのため、「メトリック」に 「Processed Inference Tokens」、「集計」に 「合計」をプルダウンから選択することでトークンの使用量を確認することが可能です。 上記の画像の通り、メトリックに「Processed Inference Tokens」、集計に「合計」を入力した結果、以下のようにトークンの使用量を確認することができました。 また、画面右上(赤枠部)より時刻表示の調整が可能になります。デフォルトでの表示以外のスケール(過去7日間や過去30日間など)で時刻の表示をすることができます。 ここで、次の画像のように、時間の粒度を「1 分」と選択することで、1 分あたりの入出力トークンの合計を算出することが出来ます。先ほどの「集計」で「合計」を選択したため、1 分あたりのトークン数の合計値が、グラフに描画されています。 以上の手順で、メトリック エクスプローラーで 1 分あたりの入出力トークン数をグラフに描画することができました。 関連ドキュメント Azure OpenAI Service とは - Azure AI services | Microsoft Learn Azure OpenAI Service のクォータを管理する - Azure AI services | Microsoft Learn-Azure OpenAI Service のクォータと制限 - Azure AI services | Microsoft Learn Azure リソースのメトリックを分析する - Azure Monitor | Microsoft Learn Azure OpenAI Service の監視 - Azure AI services | Microsoft Learn Azure Monitor メトリックによる集計と表示の説明 - Azure Monitor | Microsoft Learn 変更履歴2024/07/25 created by naokatayama ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"Azure OpenAI Service の使用中に発生する可能性がある一般的なエラー コードについて","slug":"AzureOpenAIService-error-codes","date":"2023-12-28T15:00:00.000Z","updated":"2025-04-25T06:37:16.133Z","comments":true,"path":"2023/12/29/AzureOpenAIService-error-codes/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/12/29/AzureOpenAIService-error-codes/","excerpt":"この記事では、Azure OpenAI Service の使用中に発生する可能性がある一般的なエラー コードの内容や原因、解決策についてご紹介します。","text":"この記事では、Azure OpenAI Service の使用中に発生する可能性がある一般的なエラー コードの内容や原因、解決策についてご紹介します。 HTTP 400 エラー &#x2F; Bad Requestこのエラーは、クライアント側から送信したリクエストに問題があることを示します。原因として、プロンプトの誤入力、プロンプトがコンテンツフィルターによりブロックされている可能性が挙げられます。 対処方法： クライアント側から送信したプロンプトを見直してください (Jsonペイロードの形式や、パラメーターのミススペルなど) コンテンツのフィルター処理 の設定を確認し、必要に応じてレベルを調整してください。 HTTP 401 エラー &#x2F; Unauthorizedこのエラーは、認証に問題が発生していることを示します。原因として、Azure OpenAI Service へのリクエストに必要な API キーなどの認証情報に誤りがある可能性が挙げられます。 例：リクエスト時にキーが含まれていない、キーに余分なスペースや欠落文字がある、アクセス トークンの有効期限が切れている、必要なロールが割り当てられていない 対処方法：API キー 認証をご使用の場合は、リクエスト時に必要なENDPOINT, API-KEY, DEPLOYMENT-NAME が正しいかどうかをご確認ください。確認方法は、以下の公開情報をご参照ください。 キーとエンドポイントを取得する | クイック スタート: Azure OpenAI Service を使用してテキストの生成を開始する Microsoft Entra ID 認証をご使用の場合は、リクエストを行うユーザーに対して、必要なロールが割り当たっているかどうかをご確認ください。詳細は、以下の公開情報をご参照ください。 Cognitive Services User ロールに自分自身を割り当てる | マネージド ID を使用して Azure OpenAI Service を構成する方法 HTTP 403 エラー &#x2F; Forbiddenこのエラーは、ネットワーク制限により生じている可能性があります。 対処方法： Azure OpenAI Service リソースに設定したネットワーク設定 を確認します。 HTTP 404 エラー &#x2F; Not Foundこのエラーは、クライアント側の要求で指定されたリソースが、サーバー側で見つけられなかったことを示します。 原因として、API エンドポイントが正しくないといったことが挙げられます。 対処方法： API リファレンス や SDK リファレンスを参照し、API エンドポイントの指定が正しいことを確認します エンドポイント指定時の必須パラメーターを確認します。 (リソース名、デプロイメントID、API バージョン (後述)) API バージョン (モデルバージョンとは異なります）が正しいかどうかをご確認ください。 (API エンドポイントは、指定された要求が正しく最新であることを確認するために、バージョン管理に api-version クエリ パラメーターを使用しており、サービス API のすべてのバージョンは、YYYY-MM-DD の日付構造になっています。) 例）https:&#x2F;&#x2F; (中略) &#x2F;openai&#x2F;deployments&#x2F;my-first-deployment&#x2F;completions?api-version&#x3D;2022-12-01 HTTP 408 エラー &#x2F; Request Timeoutこのエラーは、サーバー側の応答がない、ネットワーク接続が不安定などでリクエストがタイムアウトしたことを示します。原因として、クライアント側のインターネット接続の速度が遅い、大きな要求の送信に時間がかかりすぎている、サーバー側に要求の処理に遅延を引き起こす何らかの問題がある、などが挙げられます。 対処方法： ご利用のインターネット環境において、リクエストを送信するのに十分な安定性と速度があることをご確認ください。そのうえで、再度リクエストを送信しエラーが解消するかどうかをご確認ください。 大きなクエリが送信されている場合は、要求を複数の小さなクエリに分割することをご検討ください。これにより、Azure OpenAI は情報をより効率的に処理することができ、タイムアウトの可能性が低減します。 Chat Completions API を使用している場合は、API リクエストを行う際に stream&#x3D;true を設定することを検討してください。これにより、サーバー側は、部分的な結果が利用可能になったときに送信できるため、タイムアウトの可能性が低減します。 HTTP 429 エラー &#x2F; Too Many Requestsこのエラーは、定義されたレート制限を超過していることや、バックエンドサービスがスケーリング中であることを示します。原因として、モデルデプロイに割り当てられているクォーターの TPM (Tokens-per-Minute) が少ない場合や、Azure OpenAI サービスが需要に合わせてスケールアップしているときにスローされ、必要なスケールに達しなかった一時的なエラーの可能性が挙げられます。 対処方法： モデルデプロイに対して割り当てている TPM のレート制限の変更を検討します。Azure OpenAI Service のクォータを管理する - Azure AI services | Microsoft Learn デプロイ後は、Azure AI Studio の [管理&gt;デプロイ] で [デプロイの編集] を選択して、TPM の割り当てを調整できます。 この選択は、新しいクォータ管理エクスペリエンスの [管理&gt;クォータ] で変更することもできます。 429エラーがスローされたときに提示される時間を空けて再度実行していただくことが必要となります。Azure サービスの再試行ガイダンス - Best practices for cloud applications | Microsoft Learn 429 エラーの場合は、Retry-After ヘッダーに示されている時間が経過した後でのみ再試行してください。 参考情報： Azure OpenAI Service のクォータを管理する - Azure AI services | Microsoft Learn デプロイが作成されると、割り当てられた TPM は、推論要求で適用される TPM (Tokens-per-Minute) のレート制限に直接マップされます。 1 分あたりの要求 (RPM) レート制限も適用され、その値は次の比率を使用して TPM 割り当てに比例して設定されます。 1000 TPM あたり 6 RPM。(中略)RPM レート制限は、時間の経過と同時に受信した要求の数に基づいています。 レート制限では、1 分間に要求が均等に分散されることを想定しています。 この平均フローが維持されない場合、1 分間測定しても制限が満たされない場合でも、要求は 429 応答を受け取る可能性があります。この動作を実装するために、Azure OpenAI Service は、短い時間 (通常は 1 秒または 10 秒) にわたる受信要求の速度を評価します。その間に受信した要求の数が設定された RPM 制限で予想される数を超えた場合、新しい要求は次の評価期間まで 429 応答コードを受け取ります。たとえば、Azure OpenAI が 1 秒間隔で要求レートを監視している場合、1 秒ごとに 10 件を超える要求を受信すると、600 RPM デプロイでレート制限が発生します (1 分あたり 600 件の要求 &#x3D; 1 秒あたり 10 件の要求)。 レート制限のベスト プラクティス 変更履歴2023-12-29 created by Uehara ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"openai-python ライブラリについて","slug":"AzureOpenAIService-OpenaiPythonLibrary","date":"2023-10-18T15:00:00.000Z","updated":"2025-04-25T06:37:16.239Z","comments":true,"path":"2023/10/19/AzureOpenAIService-OpenaiPythonLibrary/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/10/19/AzureOpenAIService-OpenaiPythonLibrary/","excerpt":"この記事は、 Azure OpenAI の公式ドキュメント上に記載がある openai-python ライブラリについてご紹介します。","text":"この記事は、 Azure OpenAI の公式ドキュメント上に記載がある openai-python ライブラリについてご紹介します。 openai-python ライブラリについて本ライブラリは OpenAI の API を Python で利用するための公式ライブラリで、機械学習モデルの訓練や予測など、 OpenAI の各種サービスに利用することができます。openai-python ライブラリは、 OpenAI 社によって管理されています。その為、本ライブラリに関して弊社( Microsoft )の技術サポート サービスより正式なご案内をすることはできません。 最新の情報を確認するには、 GitHub 上のリリース履歴やアナウンスをご覧ください。 openai-python ライブラリのお問い合わせ先についてopenai-python に関する正式な見解が必要な場合、大変お手数ですが openai-python コミュニティへ直接お問い合わせをお願いします。 GitHub の issue や pull request を通じて、開発者コミュニティと直接コミュニケーションを取ることが可能です。 Azure OpenAI Service に対する openai-python ライブラリを使用する際の注意点Azure OpenAI Service の機能変更に伴い、過去バージョンのライブラリの互換性が失われる可能性があります。 上記にて記載していますとおり、弊社では openai-python ライブラリと Azure OpenAI Service の互換性を保証していないため、ライブラリへの依存性のリスクを回避したい場合は、Azure OpenAI Service の REST API レファレンスに準拠した HTTP リクエスト クライアントの実装をご検討ください。 特定のバージョンを指定してopenai-python ライブラリをインストールする方法もし特定のバージョンを利用する必要が生じた場合には、以下のコマンドを実施することで特定のバージョンを指定してライブラリを使用することが可能です。例) v0.28.1 のバージョンを指定してインストールするコマンドは以下の通りです： 1$ pip install openai==0.28.1 (参考: https://docs.python.org/ja/3/installing/index.html#basic-usage ) Azure 公式ドキュメントに記載のある openai-python ライブラリの取り扱いについてAzure 公式ドキュメント内や Azure OpenAI Studio 内で、 openai-python ライブラリを使用したサンプルコードを提供しています。これらのコードは、 Azure OpenAI Service を Python のコードでよりシンプルに記載するための参考資料となっております。これらのサンプルコードは上記にてご案内させていただいております通り、弊社技術サポート対象としてご提供させていただいているわけではないこと、また、これらのコードはあくまで参考であり、それらがすべてのユースケースや状況で正確に動作することを保証するものではないことを前提に利用いただくようお願いします。 変更履歴2023-10-19 created by Kudou ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"Azure OpenAI Service に対するアクセス制御について","slug":"AzureOpenAIService-NetworkLimit","date":"2023-07-27T15:00:00.000Z","updated":"2025-04-25T06:37:16.220Z","comments":true,"path":"2023/07/28/AzureOpenAIService-NetworkLimit/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/07/28/AzureOpenAIService-NetworkLimit/","excerpt":"この記事は、Azure OpenAI Service に対するアクセス制御についてご紹介します。","text":"この記事は、Azure OpenAI Service に対するアクセス制御についてご紹介します。 Azure OpenAI Service にて仮想ネットワークを構成するAzure OpenAI Service は、他の Cognitive Services と同様、アクセス元を「特定の IP アドレス範囲」または「仮想ネットワーク」に限定することが可能です。詳細につきましては、以下のドキュメントをご参照ください。 Configure Virtual Networks for Azure Cognitive Services Azure Cognitive Services は、多層型のセキュリティ モデルを採用しています。このモデルでは、ネットワークの特定のサブセットに、Cognitive Services アカウントを固定することができます。ネットワーク ルールを構成すると、指定したネットワークのセットを経由してデータを要求しているアプリケーションのみが、アカウントにアクセスできます。 なお、Azure OpenAI Service のエンドポイントのホスト名は以下となります。 1&lt;リソース名&gt;.openai.azure.com すべての Azure OpenAI Service リソースのエンドポイントは、リソース名以外が共通のため、リソース名が Azure 全体( Global )で一意である必要があります。 Azure OpenAI Studio をプライベート エンドポイント接続にて使用するには Azure OpenAI Service は、前述のアクセス元の制限に加え、プライベート エンドポイント利用をサポートしています。プライベート エンドポイントを利用する場合、 Azure OpenAI Service の エンドポイント (*.openai.azure.com ) へのアクセスを仮想ネットワーク内のクライアントに限定することが可能です。ただし、留意点として、Azure OpenAI Studio(https://oai.azure.com/) へのアクセスでは、プライベートではない一定範囲のパブリック IP アドレスでネットワーク アクセスが必要となります。 具体的には、Azure OpenAI Studioへアクセスするクライアントマシンのデプロイ先サブネットに紐づく NSG 及び Firewall にて、以下のドキュメントに記載されているサービスタグを許可する必要があります。 Configure Virtual Networks for Azure Cognitive Services Azure OpenAI、LUIS、Speech Services、または言語サービスを使用している場合、CognitiveServicesManagement タグを指定しても、SDK または REST API を使用してサービスを使用できるようになるだけです。仮想ネットワークから Azure OpenAI Studio、LUIS ポータル、Speech Studio または言語サービスにアクセスして使用するには、次のタグを使用する必要があります。･ AzureActiveDirectory･ AzureFrontDoor.Frontend･ AzureResourceManager･ CognitiveServicesManagement･ CognitiveServicesFrontEnd Azure OpenAI Studio は、Azure OpenAI Service の機能 (HTTP REST API) を簡便に試すための、簡易な (サンプル) アプリケーションという扱いになります。Azure OpenAI Studio の Web サイトそのものは、特定のユーザーやリソースに紐づかない、パブリックな Web サイトとして公開されています。そのため、Azure OpenAI Studio の Web サイトの表示に必要なリソース (画像や JavaScript 等) のダウンロードはプライベート エンドポイント経由とはなりません。 特定の国からのアクセス制御について Azure OpenAI Service は、特定の国からのアクセスを制限するような、内部的なアクセス制御を行っておりません。エンドポイントは、パブリックなインターネット経由 (すなわちインターネット上で到達可能なグローバル IP アドレスから) のアクセスを全て許可します。一方で、実際のアクセス可否は、特定の国のネットワーク制限 (例. Great Firewall of China) や法規制に左右されます。特定の地域やネットワーク環境下におけるアクセス可否は、お客様側で現地にてご確認いただく必要があります。ご参考 : Azure Virtual WAN とセキュリティ保護付きハブを使用した中国との相互接続 変更履歴2023/07/28 created by Kudou ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"Azure OpenAI Service のトークン数の上限について","slug":"AzureOpenAIService-TokenLimit","date":"2023-07-18T15:00:00.000Z","updated":"2025-04-25T06:37:16.281Z","comments":true,"path":"2023/07/19/AzureOpenAIService-TokenLimit/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/07/19/AzureOpenAIService-TokenLimit/","excerpt":"この記事は、Azure OpenAI Service のトークン数の上限についてご紹介します。","text":"この記事は、Azure OpenAI Service のトークン数の上限についてご紹介します。 トークン数の上限値(最大要求)とはAzure OpenAI Service では、モデル毎にトークン数の上限値(最大要求)が設定されています。 モデル毎のトークン数の上限値(最大要求)は、下記ドキュメントに記載されています。 Model Summary table and region availability : Max Request (tokens) トークン数の上限値(最大要求)を超えた場合の挙動現在の Azure OpenAI Service の動作では、トークン数の上限値(最大要求)を超えるトークンが消費された要求も、エラーが発生せず処理される場合があります。しかし、この挙動は、あくまで現状の内部動作の関係で生じます。将来的に予告無く変更される可能性があるため、ドキュメントに記載されているトークン数の上限値(最大要求)を超えないよう、利用することを強くお勧めします。 この留意事項は、下記ドキュメント抜粋部分でも明記しております。 GPT-35-Turbo および GPT-4 モデルの操作方法 : 会話の管理 注意すべてのモデルに関する文書化された入力トークンの制限を超えることができる場合でも、その制限内に留まることを強くお勧めします。 トークン数の上限値(最大要求)を超えないようにする方法Azure OpenAI Service が使用するモデルを開発している OpenAI 社では、指定された文章からモデルが判定するトークン数を計算するライブラリ ( tiktoken ) を提供しています。 下記ドキュメントでは、サンプル コードを交えた、ライブラリの使用例を紹介しております。この使用例では、過去の会話が続くことでトークンの合計数が上限 (例では 4096 トークン) を超える場合に、古い会話を削除しつつ、上限のトークン数以下の会話を実現します。モデル利用時にトークンを管理する一例として、ご参考になれば幸いです。 ChatGPT および GPT-4 モデルの操作方法の説明 : 会話の管理 次のコード サンプルは、OpenAI の tiktoken ライブラリを使用して 4096 トークン数を処理する手法を使用した単純なチャット ループの例を示しています。 なお、tiktoken 自体はマイクロソフトのサービスの一部ではないため、Azure の技術サポートの範囲外です。予めご了承ください。 openai&#x2F;tiktoken (GitHub) 変更履歴2023/07/19 created by Kudou ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"Azure OpenAI Service の Fine-tuning について","slug":"AzureOpenAIService-Fine-tuning","date":"2023-07-17T15:00:00.000Z","updated":"2025-04-25T06:37:16.169Z","comments":true,"path":"2023/07/18/AzureOpenAIService-Fine-tuning/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/07/18/AzureOpenAIService-Fine-tuning/","excerpt":"この記事は、Azure OpenAI Service で実施可能である Fine-tuning の 2023 年 7 月 14 日現在の状況についてご紹介します。","text":"この記事は、Azure OpenAI Service で実施可能である Fine-tuning の 2023 年 7 月 14 日現在の状況についてご紹介します。 Fine-tuning (微調整)とはAzure OpenAI Service では、Fine-tuning (微調整)という機能が提供されています。 Azure OpenAI Service を使用してモデルをカスタマイズする方法 “微調整” と呼ばれるプロセスを使用して、個人用データセットに合わせてモデルを調整できます。 Fine-tuning (微調整)の現状2023 年 7 月 14 日現在、 下記ドキュメントにも記載の通り、微調整 (Fine-tuning) されたモデルを実行可能なリージョンは現状ありません (いずれのリージョンも N&#x2F;A となっています)。 Model Summary table and region availability : Fine-Tuning Regions ※日本語版のドキュメントは翻訳の遅れにより情報が古い場合がありますので、最新の情報は英語版のドキュメントを参照ください。 なお、今後 予定されている機能として、「 GPT-3.5 Turbo 」および「 GPT-4 」モデルの Fine-tuning 機能があります。以下製品開発部門のブログ内で、今年 2023 年後半に向けた段階的なリリースを予定している旨を案内しています。 Announcing Updates to Azure OpenAI Service Models - Microsoft Community Hub Introducing new models・Offer a preview of fine-tuning for GPT-3.5-Turbo and GPT-4.We are working on safely enabling fine-tuning for GPT-3.5 Turbo and GPT-4 and expect this feature to be available later this year.This service will initially be available on a limited basis, prioritizing customers who have previously fine-tuned the Davinci series.Fine-tuning of GPT-3.5-Turbo will replace Text and Code-Davinci-002 fine-tunable models. Fine-tuning (微調整)の一般的な位置付け補足事項といたしまして、ここで一般的な Fine-tuning の位置付けについて説明します。一般的に、微調整 (Fine-tuning) は最後の手段 (last resort) と位置付けられます。Fine-tuning の検討の前に、プロンプトを工夫 (プロンプト エンジニアリングを実施) することが推奨されています。 プロンプト エンジニアリングの概要 プロンプト エンジニアリングの手法 特に現在は、Fine-tuning が可能な古いモデル (ada, curie 等) よりも高性能とされる gpt-35-turbo (ChatGPT) や GPT-4 などのモデルがリリースされています。これらの新しいモデルでプロンプト エンジニアリングを組み合わせることで、古いモデルで Fine-tuning を行うよりも、高いパフォーマンスが得られることが多くあります。 上記の点は以下のセミナー動画でも説明されておりますので、こちらもご覧いただけますと幸いです。 Azure OpenAI Developers セミナー※プロンプト エンジニアリングや Fine-tuning については動画の 22:25 頃から確認できます。 Fine-tuning (微調整)の代替手段Fine-tuning の目的が「内部情報の活用」である場合、Azure OpenAI 以外のサービスと組み合わせた手法があります。 具体的には、「独自データ」を格納した Azure Cognitive Search と組み合わせることにより、Fine-tuning を使用せずに、基本モデルを使用して内部情報に基づいた回答文を生成できます。さらに、回答を提示する際に、Bing AI チャットのように、回答のソースとなるドキュメントへのポインターを表示することも可能です。 Azure OpenAI Service×Cognitive Searchでの独自データを利用したボット 日本語の解説記事:Azure で ChatGPT × Cognitive Search を使ったエンタープライズサーチを実現※弊社社員が有志で執筆した記事となります。 上記の元になる製品開発部門のブログ: Revolutionize your Enterprise Data with ChatGPT:Next-gen Apps w&#x2F; Azure OpenAI and Cognitive Search サンプルコード:ChatGPT + Enterprise data with Azure OpenAI and Cognitive Search 上記を比較的簡単にお試しいただける方法として以下のプレビュー機能もリリースされています。 プレビュー段階の機能:クイック スタート: 独自のデータを使用して Azure OpenAI モデルとチャットする ※プレビュー段階での機能であるため、「現状有姿のまま」、「瑕疵を問わない条件」で、かつ「提供可能な場合に限り提供しうる形」で提供されておりますこと事前にご理解のほどお願いいたします。(プレビュー機能に関する使用条件: Online Services Terms の「Preview」事項を参照) 変更履歴2023/07/18 created by Kudou ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"Azure OpenAI 関連の申請について","slug":"RequestAccess-to-AzureOpenAIService","date":"2023-04-20T15:00:00.000Z","updated":"2025-04-25T06:37:16.588Z","comments":true,"path":"2023/04/21/RequestAccess-to-AzureOpenAIService/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/04/21/RequestAccess-to-AzureOpenAIService/","excerpt":"※以下は2024年1月時点の情報です。最新の状況については Azure OpenAI Service のよくあるご質問と回答(FAQ)に関するブログ記事も併せてご参照ください。 Azure OpenAI 関連の申請について、以下にご説明します。","text":"※以下は2024年1月時点の情報です。最新の状況については Azure OpenAI Service のよくあるご質問と回答(FAQ)に関するブログ記事も併せてご参照ください。 Azure OpenAI 関連の申請について、以下にご説明します。 Azure OpenAI Service の利用開始時に行う申請Azure OpenAI Service は申請フォーム 「Request Access to Azure OpenAI Service」 より必要事項を入力して送信、承認されたサブスクリプションにて利用が可能になります。[1] 申請状況に関する確認はメールアドレス &#x63;&#x73;&#x67;&#x61;&#x74;&#x65;&#64;&#x6d;&#105;&#99;&#114;&#x6f;&#x73;&#x6f;&#102;&#x74;&#x2e;&#x63;&#x6f;&#109; にて受け付けています。 この宛先は Azure OpenAI Service の利用申請を管理・レビューしている米国本社内の専用部門となり、公平性と独立性のために、技術サポート部門を含めた各国の他の部門はレビュープロセスに直接介入できません。 そのため、当該メールでのご質問は 英語のみ となる点にご留意ください。 用途に応じて行う申請追加のユース ケース利用開始申請時に選択したユース ケースとは別に、追加でユース ケースを申請する場合、申請フォーム 「Azure OpenAI Additional Use Case Form」 より必要事項を入力して送信ください。[1] オプトアウト弊社が定める責任ある AI の原則に従って、倫理的・社会的に問題があると考えられる利用 (abuse) を防止するために、人間によるレビューが行われる場合があります。これは要件を満たす場合にはオプトアウトすることが可能です。以下の申請フォームより必要事項を入力して送信ください。 [1] コンテンツフィルターの変更：Azure OpenAI Limited Access Review: Modified Content Filtering 不正使用監視の変更：Azure OpenAI Limited Access Review:Modified Abuse Monitoring オプトアウト申請に関する FAQ Q. オプトアウトを申請して承認されましたが、きちんと反映されているか確認したいです。確認方法はありますか？A. はい、確認方法があります。Abuse Monitoring は “ContentLogging” の項目が”false”となっているかを参照することで確認可能です。[2]Content Filtering については Azure OpenAI Studio [管理]-&gt;[Content Filters]よりFilteringをオフに設定可能かどうかで確認可能です。[6] クォータの引き上げAzure OpenAI には、適用されるクォータによる制限があります。 この引き上げを希望する場合、Azure OpenAI Studio の [管理 &gt; クォータ &gt; クォータの要求] の申請フォーム 「Azure OpenAI Service: Request for Quota Increase」 より必要事項を入力して送信ください。[3] 2023&#x2F;05&#x2F;23現在の状況 Azure OpenAI Service は世界中から非常に高い需要が続いています。そのため、大変恐れ入りますがリソースまたはクォータの制限を引き上げる要求は、現在受付を停止しています。受付が再開される時期については、今後の更新をお待ちいただけますと幸いです。 2023&#x2F;10&#x2F;19現在の状況 クォータの引き上げ要求の受付は再開されました。最新の状況については Azure OpenAI Service のクォータと制限のドキュメントをご参照ください。[5] GPT-4 モデル以前は、GPT-4モデルを利用するためには申請が必要でしたが、2023年10月19日現在、申請は不要となりました。しかし、GPT-4モデルへの高い需要のため、Azure OpenAI Serviceが利用できるすべてのリージョンでGPT-4モデルが利用可能なわけではなく、利用できるリージョンは限られています[4] 。使用中のリージョンでGPT-4が表示されない場合は、時間を置いて再度確認をお願いします。 Azure OpenAI on your data のプライベート ネットワークのサポートAzure OpenAI on your dataにてプライベートネットワークの利用を可能にする場合、申請フォーム 「Apply Azure AI Search Private Endpoint Request for Azure OpenAI on Your Data 」 より必要事項を入力して送信ください。[7] 関連ドキュメント [1]: Limited access to Azure OpenAI Service - Azure Cognitive Services | Microsoft Learn [2]: Data, privacy, and security for Azure OpenAI Service - Azure Cognitive Services | Microsoft Learn [3]: Manage Azure OpenAI Service quota - Azure AI services | Microsoft Learn [4]: Azure OpenAI Service models - Azure OpenAI | Microsoft Learn [5]: Azure OpenAI Service quotas and limits - Azure Cognitive Services | Microsoft Learn [6]: How to use content filters (preview) with Azure OpenAI Service - Azure OpenAI | Microsoft Learn [7]: Using your data with Azure OpenAI securely - Azure OpenAI | Microsoft Learn 申請関連の FAQ については、以下のドキュメントも参考になります。Cognitive Services の制限付きアクセス機能 - Azure Cognitive Services | Microsoft Learn 制限付きアクセスに関する FAQ中略Q.制限付きアクセスのサービスを使用する資格があるのはだれですか?Q.管理下の顧客とは? 管理下の顧客に該当するかどうかがわからない場合はどうすればよいですか?Q.申請が拒否された場合、私のデータはどうなりますか? 変更履歴2023/04/21 created by Kudou2023/05/23 update by Kudou2023/07/04 update by Kudou2023/08/18 update by Kudou2023/10/19 update by Kudou2024/01/05 update by Uehara2025/04/15 add link by Nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}],"tags":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/tags/Azure-OpenAI/"}],"keywords":[{"name":"Azure OpenAI","slug":"Azure-OpenAI","permalink":"https://jpaiblog.github.io/blog/categories/Azure-OpenAI/"}]},{"title":"Azure Face API 顔認識機能の制限および利用申請について","slug":"Register-for-LimitedAccessfeatures-of-FaceAPI","date":"2023-03-13T15:00:00.000Z","updated":"2025-04-25T06:37:16.555Z","comments":true,"path":"2023/03/14/Register-for-LimitedAccessfeatures-of-FaceAPI/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/03/14/Register-for-LimitedAccessfeatures-of-FaceAPI/","excerpt":"Azure Face API 顔認識機能の制限および、利用申請について、以下にご説明します。","text":"Azure Face API 顔認識機能の制限および、利用申請について、以下にご説明します。 Face リソース作成日と機能制限2022 年 6 月より前に作成された Face リソースでは、2023 年 6 月 30 日までの間、Face API が提供する全ての機能が利用することができました。これは、Face API の機能制限に関する発表が 2022 年 6 月に行われたため、それより前に作成された Face リソースに対する約１年の移行措置でした。なお、移行措置は 2023年 6月 30日 に終了しました。それ以降にも、後述する「顔認識」機能を継続利用する場合は、利用申請および承認が必要です。 Responsible AI investments and safeguards for facial recognition | Azure Blog and Updates | Microsoft Azure (Posted on June 21, 2022) Starting June 30, 2023, existing customers will no longer be able to access facial recognition capabilities if their facial recognition application has not been approved. Azure ポータル で Face リソースページの [プロパティ] メニューを開くと、リソース作成日が確認できます。 Face API 提供機能についてAzure Face API の提供機能は、主に、以下の 2つの機能（顔検出、顔認識）に大別できます。 1. 顔検出 2. 顔認識 上記のうち、「顔検出」（Facial Detection）機能には 「廃止された機能」 と、2023 年 6 月 30 日以降も 「申請不要で利用できる機能」および、 「申請および承認が必要な機能」 の 3 つが含まれます。 「顔認識」 機能は、その配下の 「顔識別」 （Facial identification） および 「顔検証」（Facial verification） ともに全て 「申請および承認が必要な機能」 です。 それぞれの詳細を、以下に詳述します。 廃止された機能「顔検出」機能を通じて得られる顔属性の一部の情報 「顔検出」機能を通じて得られる顔属性のうち、特定の一部情報は廃止されました。詳細は以下をご参照ください。 これらは、申請を行っても利用することはできません。 顔検出と顔属性 - Face - Azure Cognitive Services | Microsoft Learn 注意事項：感情の状態やアイデンティティの属性の推測に使用できる顔認識機能は廃止されました。この機能は使い方を誤ると、ステレオタイプ化、差別、サービスの不当な拒否に人々をさらす可能性があります。 たとえば、感情、性別、年齢、笑顔、顔ひげ、髪、メイクを予測する機能が該当します。 申請不要で利用できる機能 「顔検出」 機能のみを利用する場合は、利用申請は不要です。 この機能は 「この画像に 1 つ以上の人間の顔がありますか?」 という質問に答えます。画像内の人間の顔が検出され、その位置を示す座標情報と属性情報が返されます。 たとえば、人数（顔の数）を数えたり、プライバシーのために画像の顔領域に \"ぼかし\" を入れたりするだけのユースケースでの利用が想定されています。 顔認識に関する責任あるAIポリシーの変更とガイダンスについて | Microsoft Base 顔検出機能 (ぼかし、露出、眼鏡、頭部姿勢、ランドマーク、ノイズ、オクルージョン、顔の境界ボックスなど) は引き続き一般提供を行いますので、申請は不要です。 なお、「顔検出」機能において、もし、顔情報を一意の識別子文字列で特定するための「Face ID」を利用する場合には、申請および承認が必要です。 顔検出、属性、入力データ | Microsoft Learn Face ID には、申し込みフォーム（ https://aka.ms/facerecognition ）に入力することで申請できる、制限付きアクセスの承認が必要です。 そのため、申請承認なしで「顔検出」機能の Detect API を利用する場合には、「Face ID」利用有無を指定する「returnFaceId」 パラメーター を 明示的に「false」 として設定するようにご留意ください。（既定値「true」の設定のまま利用する場合には、申請承認が必要です） Face API - v1.0 API Reference | Face - Detect Request parameters &#x2F; returnFaceId (optional) &#x2F; boolean &#x2F;Return faceIds of the detected faces or not. The default value is true. 申請および承認が必要な機能「顔認識」機能は、「申請および承認が必要な機能」です。 なお、Face API における「顔認識」機能配下の「顔識別（Facial identification）」、「顔検証（Facial verification）」の両機能の差異については、以下のドキュメント抜粋をご参照ください。 Azure Face サービスとは - Azure Cognitive Services | Microsoft Docs 顔識別では、画像内の 1 つの顔を、安全なリポジトリ内の一連の顔と “一対多” で照合できます。 検証操作は、”これら 2 つの顔は同じ人物のものでしょうか?” という質問に答えます。また、検証では、画像内の顔をセキュリティで保護されたリポジトリや写真からの 1 つの顔と “1 対 1” で照合して、それらが同じ個人であることが確認されます 顔認識利用申請フォーム では、申請対象ユース ケースが「顔識別」か「顔検証」かどちらに該当するかを選択して申請する必要があります。 ユースケースに関する詳細は、以下のドキュメントもご参照ください。Use cases for Face - Azure Cognitive Services | Microsoft Learn 申請フォームに記載されたもの以外のユースケースに関するフィードバックについては、申請フォームとは別途の フィードバックフォーム が用意されています。なお、こちらのフォームに登録した内容はフィードバックに留まり、利用申請とはみなされない点にご留意ください。 申請に関する情報 申請フォーム および申請後のご連絡メール等は、英語のみでの対応となり、日本語対応はございません。Face API の利用申請を管理・レビューするのは米国本社内の専用部門であり、公平性と独立性のために、技術サポート部門を含めた各国の他の部門はレビュープロセスに直接介入できないためです。 申請に関する FAQ については、以下のドキュメントもご参考として頂けます。 Cognitive Services の制限付きアクセス機能 - Azure Cognitive Services | Microsoft Learn 制限付きアクセスに関する FAQ （抜粋）Q.制限付きアクセスのサービスを使用する資格があるのはだれですか?Q.管理下の顧客とは? 管理下の顧客に該当するかどうかがわからない場合はどうすればよいですか?Q.申請が拒否された場合、私のデータはどうなりますか? 関連ドキュメント Responsible AI investments and safeguards for facial recognition | Azure Blog and Updates | Microsoft Azure 顔認識に関する責任あるAIポリシーの変更とガイダンスについて | Microsoft Base （※ 上記ドキュメントの日本語翻訳です） Responsible AI investments and safeguards for Facial Recognition | Azure の更新情報 | Microsoft Azure 変更履歴2023/03/22 created by Uehara2024/05/20 modified by Uehara ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Face API","slug":"Face-API","permalink":"https://jpaiblog.github.io/blog/categories/Face-API/"}],"tags":[{"name":"Face API Recognition Identify","slug":"Face-API-Recognition-Identify","permalink":"https://jpaiblog.github.io/blog/tags/Face-API-Recognition-Identify/"}],"keywords":[{"name":"Face API","slug":"Face-API","permalink":"https://jpaiblog.github.io/blog/categories/Face-API/"}]},{"title":"Custom Vision モデルのドメイン変更方法","slug":"how-to-convert-the-domain-of-an-existing-cvmodel","date":"2023-02-27T15:00:00.000Z","updated":"2025-04-25T06:37:16.392Z","comments":true,"path":"2023/02/28/how-to-convert-the-domain-of-an-existing-cvmodel/","link":"","permalink":"https://jpaiblog.github.io/blog/2023/02/28/how-to-convert-the-domain-of-an-existing-cvmodel/","excerpt":"Custom Vision モデルのドメイン変更方法をご紹介します。","text":"Custom Vision モデルのドメイン変更方法をご紹介します。 Custom Vision モデルのドメインについてAzure Custom Vision を使用して、画像のクラス分類 &#x2F; または 物体検出のモデル作成が可能です。モデルのトレーニング開始前には、モデルのドメイン（対応領域）を選択します。ドメインの詳細については、以下のドキュメントをご確認ください。 Custom Vision プロジェクトのドメインを選択する 一方で、モデルのトレーニングが完了した後にも、ドメインの変更は可能です。ドメインを変更することで、ご自分のシナリオに、より適したモデルとなり、精度の向上が見込める場合があります。 なお、ドメインの変更に際して、再度、画像のタグ付けの作業を行って頂く必要はありません。 また、ドメインの変更の結果が、既存モデルに上書きされることはありません。１つのプロジェクトの中で、ドメインを変更したトレーニング結果は別々に保持されます。 以下は、Custom Vision ポータルで、１つのプロジェクトに異なるドメイン（General (Compact[S1] と General (Compact)) ）が保持されている例のスクリーンショットです。 この記事では、既存モデルのドメインの変更方法をご紹介します。 既存モデルのドメイン変更手順(1) プロジェクト設定画面の表示Custom Vision ポータル (https://www.customvision.ai/) 上で、プロジェクトを一覧表示します。 一覧から、対象のプロジェクトを選択し、ページ右上にある 歯車 アイコンを選択して、プロジェクト設定画面を表示します。 (2) ドメインの選択と、変更の保存[Domains] セクションで、[General [A1]] 等、任意ドメインを変更先として選択します。 [Save Changes] を選択して変更を保存します。 (3) 再トレーニング実行[Train] ボタンを使用して、再度トレーニングを行います。 (4) 新しいモデルのテストトレーニング完了後、[Performance] タブで、ドメイン変更が反映されたモデルの新しい Iteration のパフォーマンスを確認できます。 個別の画像に対する精度を確認する場合には、[Quick Test] ボタンを使用して、該当の Iteration を指定したテストを行います。 変更履歴2023/02/28 created by Uehara ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"Custom Vision","slug":"Custom-Vision","permalink":"https://jpaiblog.github.io/blog/tags/Custom-Vision/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"Translator Text API へのアクセスを VNET やプライベート エンドポイントに限定する方法","slug":"TranslatorTextAPI-VNET-and-PrivateEndpoint","date":"2022-04-12T15:00:00.000Z","updated":"2025-04-25T06:37:16.688Z","comments":true,"path":"2022/04/13/TranslatorTextAPI-VNET-and-PrivateEndpoint/","link":"","permalink":"https://jpaiblog.github.io/blog/2022/04/13/TranslatorTextAPI-VNET-and-PrivateEndpoint/","excerpt":"Translator Text API の呼び出しを特定の VNET やプライベート エンドポイント経由に限定する方法について紹介します。","text":"Translator Text API の呼び出しを特定の VNET やプライベート エンドポイント経由に限定する方法について紹介します。 Cognitive Services における VNET との統合Translator Text API を含む Cognitive Services では、リソースを VNET と統合して、API へのアクセスを特定の VNET やプライベート エンドポイント経由に限定する方法を提供しています。 Azure Cognitive Services 仮想ネットワークを構成する Translator Text API については他の API とは一部異なる点があるため、本ブログ記事では具体的な設定および API の呼び出し手順を例として紹介します。 Translator Text API v3.0 - 仮想ネットワークのサポート Translator Text API を VNET に統合するTranslator Text API へのアクセスを VNET やプライベート エンドポイントに限定した場合は、通常とは以下の点が異なります。 グローバル トランスレーター エンドポイント (“api.cognitive.microsofttranslator.com”) は使用できません。代わりにカスタム サブドメインを使用します。 認証にトークン (Authorization ヘッダー) を使うことはできません。代わりにサブスクリプション キー (Ocp-Apim-Subscription-Key) を使用します。 Ocp-Apim-Subscription-Region ヘッダーで Translator リソースのリージョンを指定します。(global の場合のみ省略可能) 上記を踏まえた手順例を以下で紹介します。ここでは簡便のためリクエストの送信元を Azure 上の仮想マシン (VM) とします。 手順例(1) Ubuntu Server 18.04 の VM および仮想ネットワークを新規で作成します仮想ネットワークやその他のリソースのリージョンは東日本とします。 参考: Azure で Linux 仮想マシンを作成する (2) Translator Text API のリソースを作成しますリージョンとして東日本を選択します。 設定例: (3) Translator Text API のネットワークの設定で (1) の仮想ネットワークを指定しますTranslator Text API へのアクセスを指定された仮想ネットーク (VNET) からのみに限定します。 VNET を指定したタイミングでカスタム サブドメイン名が割り当てられます。 (4) 仮想マシンから Translator Text API の呼び出しが成功することを確認します 仮想ネットワークのサポート – Translator Text API1234567カスタム エンドポイントを使用する Translator を呼び出す要求の例を次に示します。// Pass secret key and region using headerscurl -X POST &quot;https://&lt;your-custom-domain&gt;.cognitiveservices.azure.com/translator/text/v3.0/translate?api-version=3.0&amp;to=es&quot; \\ -H &quot;Ocp-Apim-Subscription-Key:&lt;your-key&gt;&quot; \\ -H &quot;Ocp-Apim-Subscription-Region:&lt;your-region&gt;&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d &quot;[&#123;&#x27;Text&#x27;:&#x27;Hello, what is your name?&#x27;&#125;]&quot; コマンドと結果の例: 123$ curl -X POST &quot;https://&lt;your-custom-domain&gt;.cognitiveservices.azure.com/translator/text/v3.0/translate?api-version=3.0&amp;to=es&quot; -H &quot;Ocp-Apim-Subscription-Key:xxx &quot; -H &quot;Ocp-Apim-Subscription-Region:japaneast&quot; -H &quot;Content-Type: application/json&quot; -d &quot;[&#123;&#x27;Text&#x27;:&#x27;Hello, what is your name?&#x27;&#125;]&quot;[&#123;&quot;detectedLanguage&quot;:&#123;&quot;language&quot;:&quot;en&quot;,&quot;score&quot;:1.0&#125;,&quot;translations&quot;:[&#123;&quot;text&quot;:&quot;Hola, ¿cómo te llamas?&quot;,&quot;to&quot;:&quot;es&quot;&#125;]&#125;] ここで、仮想ネットワーク外からアクセスしようとした場合、以下のようなエラーで失敗します。 1&#123;&quot;error&quot;:&#123;&quot;code&quot;:&quot;AccessDenied&quot;,&quot;message&quot;: &quot;Access denied due to Virtual Network/Firewall rules. Your IP address is XX.XX.XX.XX.&quot;&#125;&#125; この設定では、Translator Text API 側でアクセスを許可する送信元を特定の仮想ネットワークに限定しているだけで、VM から見た宛先は仮想ネットワークのプライベート IP アドレスではなくパブリック IP アドレスになります。これは、仮想マシン上でカスタムサブドメイン名を名前解決した結果から確認できます。 コマンドと結果の例:12345678$ dig &lt;your-custom-domain&gt;.cognitiveservices.azure.com...;; ANSWER SECTION:&lt;your-custom-domain&gt;.cognitiveservices.azure.com. 541 IN CNAME japaneast.prod.vnet.cog.trafficmanager.net.japaneast.prod.vnet.cog.trafficmanager.net. 60 IN CNAME vnetproxyv1-jpe-prod.japaneast.cloudapp.azure.com.vnetproxyv1-jpe-prod.japaneast.cloudapp.azure.com. 9 IN A 40.79.187.171 パブリック IP アドレスである 40.79.187.171 に名前解決されています。 (5) プライベート IP アドレスで通信するためにプライベート エンドポイントを追加しますTranslator Text API は他の Cognitive Services と同様にプライベート エンドポイントをサポートしています。 プライベート エンドポイントを使用する1お使いの Cognitive Services リソースのプライベート エンドポイントを使用すると、仮想ネットワーク (VNet) 上のクライアントはプライベート リンクを介してデータに安全にアクセスできるようになります。 プライベート エンドポイントは、Cognitive Services リソースの VNet アドレス空間からの IP アドレスを使用します。 設定例: DNS の設定が更新されると、名前解決した結果がプライベート IP アドレスとなります。 コマンドと結果の例: 1234567$ dig &lt;your-custom-domain&gt;.cognitiveservices.azure.com ...;; ANSWER SECTION:&lt;your-custom-domain&gt;.cognitiveservices.azure.com. 900 IN CNAME &lt;your-custom-domain&gt;.privatelink.cognitiveservices.azure.com.&lt;your-custom-domain&gt;.privatelink.cognitiveservices.azure.com. 9 IN A 10.0.0.5 この状態で仮想マシンから curl コマンドで Translator の API を呼び出すとプライベート IP アドレス (プライベートエンドポイント経由) でのアクセスになります。 変更履歴2022/04/13 created by Hiroki Nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/blog/categories/Translator-Text-API/"}],"tags":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/blog/tags/Translator-Text-API/"}],"keywords":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/blog/categories/Translator-Text-API/"}]},{"title":"Speech to Text のコンテナーに関する FAQ","slug":"Speech-to-Text-Conatiner-FAQ","date":"2022-04-07T15:00:00.000Z","updated":"2025-04-25T06:37:16.617Z","comments":true,"path":"2022/04/08/Speech-to-Text-Conatiner-FAQ/","link":"","permalink":"https://jpaiblog.github.io/blog/2022/04/08/Speech-to-Text-Conatiner-FAQ/","excerpt":"Speech to Text のコンテナーに関する FAQ をまとめました。 主にベースライン (標準) モデルのコンテナーに関する内容となります。カスタム モデルの場合は異なることがあります。","text":"Speech to Text のコンテナーに関する FAQ をまとめました。 主にベースライン (標準) モデルのコンテナーに関する内容となります。カスタム モデルの場合は異なることがあります。 コンテナーが起動しない、またはすぐに停止するまずはオプションを除いた最小限のパラメーター構成で動作を確認します。 12345docker run --rm -it -p 5000:5000 --memory 4g --cpus 4 \\mcr.microsoft.com/azure-cognitive-services/speechservices/speech-to-text \\Eula=accept \\Billing=&#123;ENDPOINT_URI&#125; \\ApiKey=&#123;API_KEY&#125; docker run でコンテナーを実行する またコンテナーを実行しているマシンが動作要件を満たしているか確認します。CPU は最低 2 コア、メモリは 2 GB が必要となりますが、最新 (latest) のモデルでは以前よりもメモリ使用量が増大しているため、推奨構成 + α で確認することをお勧めします。 ホスト コンピューターの要件と推奨事項 Azure Cognitive Services container image tags and release notes 加えて、コンテナーの実行には CPU が AVX2 の命令をサポートしている必要があります。ホスト OS が Linux であれば以下のコマンドで AVX2 のサポート有無を確認できます。 1grep -q avx2 /proc/cpuinfo &amp;&amp; echo AVX2 supported || echo No AVX2 support detected Speech to Text のコンテナーは Azure VM でも実行することができるため、オンプレミス環境で動作しない場合は切り分けとして Azure VM での動作確認を検討します。VM のサイズによって CPU は異なりますが、AVX2 をサポートしている CPU かどうかについては以下のリストからも確認できます。 Linux VM のコンピューティング ベンチマーク スコア ※CPU の型番から AVX2 のサポート状況を確認するには各ベンダー (Intel, AMD など) の情報を参照します。 例. Intel Product Specifications※Intel 社のサイトとなります コンテナーは起動したが音声認識の結果が期待と異なるSpeech to Text のコンテナーは言語ごとにコンテナーのイメージが分かれています。latest のタグは英語 (en-us) の最新イメージです。その他の言語については下記のリストから該当する言語のイメージを取得・実行する必要があります。 Azure Cognitive Services container image tags and release notes 日本語 (ja-jp) の場合のコマンド実行例: 12345docker run --rm -it -p 5000:5000 --memory 4g --cpus 4 \\mcr.microsoft.com/azure-cognitive-services/speechservices/speech-to-text:3.0.0-amd64-ja-jp \\Eula=accept \\Billing=&#123;ENDPOINT_URI&#125; \\ApiKey=&#123;API_KEY&#125; ホスト OS のディレクトリを指定したログの出力に失敗するSpeech to Text のコンテナーではディレクトリをマウントすることでホスト OS 上にログを出力することができます。 Speech Service コンテナーを構成する - Logging の設定1--mount type=bind,src=/home/azureuser/output,target=/output \\ ここで指定されたホスト OS のディレクトリ (例. &#x2F;home&#x2F;azureuser&#x2F;output) は Docker コンテナーから書き込みできるようにアクセス許可が設定されている必要があります。もし書き込みが許可されていない場合はコンテナーの実行は以下のようなエラーで停止します。 1Creating directory &#x27;/app/speechtotext/xxx&#x27; failed with error &#x27;Access to the path &#x27;/app/speechtotext/xxx&#x27; is denied.&#x27;. Please make sure that the path is writable. ※Docker のマウントやプロセスの実行権限の詳細については利用しているプラットフォーム (OS) によって異なります。 参考: Docker docs - Use bind mounts※Docker のサイトとなります 起動後しばらく動作した後に停止するコンテナーから課金 (Billing) エンドポイントへの接続に失敗している可能性があります。Speech to Text のコンテナーは利用量を定期的に Azure クラウドに報告する必要があり、一定時間接続に失敗すると動作を停止します。 課金エンドポイントへの接続について ホスト OS や Docker コンテナーのネットワーク構成として、課金エンドポイントに HTTPS (TCP ポート 443) で通信が可能か確認します。例えばファイアウォールやプロキシが接続を拒否している可能性があります。 Speech Service コンテナーのプロキシ設定 123456789 docker run --rm -it -p 5000:5000 \\--memory 2g --cpus 1 \\--mount type=bind,src=/home/azureuser/output,target=/output \\&lt;registry-location&gt;/&lt;image-name&gt; \\Eula=accept \\Billing=&lt;endpoint&gt; \\ApiKey=&lt;api-key&gt; \\HTTP_PROXY=&lt;proxy-url&gt; \\HTTP_PROXY_CREDS=&lt;proxy-user&gt;:&lt;proxy-password&gt; \\ また Docker は既定の DNS サーバーとして Google Public DNS (IP アドレス: 8.8.8.8) を使用するため、もしこの DNS サーバーへのアクセスが許可されない場合は別の DNS サーバーを指定する必要があります。 参考: Docker 既定の DNS サーバーについて言及した GitHub 上の Issue ※Linux では &#x2F;etc&#x2F;docker&#x2F;daemon.json のファイルで既定の DNS サーバーを設定できます。 変更履歴2022/04/08 created by Hiroki Nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"Speech","slug":"Speech","permalink":"https://jpaiblog.github.io/blog/tags/Speech/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"Custom Vision の Advanced トレーニングの利用方法","slug":"how-to-use-advanced-training","date":"2022-03-30T15:00:00.000Z","updated":"2025-04-25T06:37:16.437Z","comments":true,"path":"2022/03/31/how-to-use-advanced-training/","link":"","permalink":"https://jpaiblog.github.io/blog/2022/03/31/how-to-use-advanced-training/","excerpt":"Custom Vision の Advanced Training の利用方法をご紹介します。","text":"Custom Vision の Advanced Training の利用方法をご紹介します。 Custom Vision モデル作成Custom Vision ポータル (https://www.customvision.ai/) を使用して、画像のクラス分類 &#x2F; または 物体検出のモデル作成が可能です。一連の流れについては、以下のドキュメントをご参照ください。 クイックスタート: Custom Vision Web ポータルを使用して画像分類器モデルを構築する クイックスタート: クイックスタート: Custom Vision の Web サイトでオブジェクト検出器を構築する モデルトレーニングでは “Quick Training” &#x2F; “Advanced Training” のどちらかのタイプを選択可能です。上記ドキュメントは、比較的短時間で完了する Quick Training を前提として記載されていますが、この記事では、Advanced Training の利用手順をご案内します。 Advanced Training の利用手順(1) [Train] ボタンクリックCustom Vision ポータル (https://www.customvision.ai/) 上で、トレーニングデータをアップロードした後、画面右上の [Train] ボタンをクリックします。 (2) [Advanced Training] の設定[Train] ボタンクリックで表示される子画面上で、Training Types：[Advanced Training] を選択します。 Custom Vision では、トレーニング時間あたりの課金を設定させて頂いております。 Custom Vision の価格 そのため、ご予算の範囲内で今回のトレーニングにかけられる時間の最大値をTraining budget に設定してください。 なお、Custom Vision ポータル では、トレーニングを停止する機能のご提供がないことにご留意ください。 また、Advanced Training が完了次第、メールでお知らせすることが可能です。 お知らせ機能を利用する場合には、[Send me an email notification after training completes] のチェックボックスをクリックして、任意の Email address を記載してください。 [Train] ボタンをクリックするとトレーニングが始まります。誠に恐れ入りますが、トレーニング進捗や完了までの残り時間などの表示機能のご提供はありません。前述の メールでのトレーニング完了お知らせ機能のご利用をご検討ください、 お問い合わせについてリソース個別の技術的なご質問については、DEVELOPER サポートプラン 以上のサポートプランをご契約いただき、Azure ポータルからお問い合わせください。 なお、Azure ポータルからの起票時に選択されたサブスクリプションと、同じサブスクリプションに含まれるリソースではない場合は、調査をお承りすることができませんのでご注意ください。 問い合わせ起票時のセキュリティ チェックの強化について 変更履歴2022/03/31 created by Uehara ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"Custom Vision","slug":"Custom-Vision","permalink":"https://jpaiblog.github.io/blog/tags/Custom-Vision/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"Custom Vision のトレーニングが失敗した場合の調査に必要な情報について","slug":"how-to-troubleshoot-custom-vision-training-issue","date":"2022-03-24T15:00:00.000Z","updated":"2025-04-25T06:37:16.416Z","comments":true,"path":"2022/03/25/how-to-troubleshoot-custom-vision-training-issue/","link":"","permalink":"https://jpaiblog.github.io/blog/2022/03/25/how-to-troubleshoot-custom-vision-training-issue/","excerpt":"Custom Vision のトレーニングが失敗した場合の調査に必要な情報をまとめました。","text":"Custom Vision のトレーニングが失敗した場合の調査に必要な情報をまとめました。 Custom Vision のトレーニングが失敗した場合の調査についてCustom Vision でトレーニングを実行した際に何らかの原因によってトレーニングが失敗すると、そのイテレーションは “Failed” と表示されます。これはリソースの一時的な不足など一過性の問題でも発生するため、まずはリトライ (再実行) をお試しください。また、下記ドキュメントに記載されたトレーニング データの推奨量を満たしているかも併せてご確認ください。 Custom Vision のモデルを改善する方法 もし繰り返し実行しても失敗する場合は別途原因の調査が必要となります。Azure ポータルからお問い合わせいただく際には、以下の情報を採取・提供いただけるとスムーズです。 (1) トレーニングを実行したプロジェクトの ID (Project Id)Custom Vision ポータル (https://www.customvision.ai/) 上で、プロジェクトを選択した後、画面右上の歯車マーク (Settings) からご確認いただけます。 (2) トレーニング (イテレーション) 毎に付与される ID (Iteration Id)まず (1) と同じプロジェクトの Settings で KEY の情報をメモしておきます。 次に下記のコンソールから、イテレーションを列挙する API を呼び出すことで Failed となったイテレーションの Iteration Id を確認することができます。 Custom Vision Training v3.3 - GetIterations コンソールの起動時には現在ご利用のリージョンを選択してください。 API の呼び出しには Training リソースの KEY および Project Id の情報が必要です。 API を呼び出した結果の “id” の部分が Iteration Id に相当するため、”status” が “Failed” となっているイテレーションの “id” をご提供ください。 (3) トレーニングを実行したリソースのリソース ID (1) と同様に Settings からご確認いただけます。 なお、Azure ポータルからの起票時に選択されたサブスクリプションと、同じサブスクリプションに含まれるリソースではない場合は、調査をお承りすることができませんのでご注意ください。 問い合わせ起票時のセキュリティ チェックの強化について 変更履歴2022/03/25 created by Hiroki Nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"Custom Vision","slug":"Custom-Vision","permalink":"https://jpaiblog.github.io/blog/tags/Custom-Vision/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"Custom Vision でモデルを ONNX 形式でエクスポートして利用する方法について","slug":"custom-vision-exported-onnx-format","date":"2022-02-21T01:30:00.000Z","updated":"2025-04-25T06:37:16.323Z","comments":true,"path":"2022/02/21/custom-vision-exported-onnx-format/","link":"","permalink":"https://jpaiblog.github.io/blog/2022/02/21/custom-vision-exported-onnx-format/","excerpt":"Custom Vision において ONNX 形式でエクスポートされたモデルを使用する方法と参考情報を紹介します。","text":"Custom Vision において ONNX 形式でエクスポートされたモデルを使用する方法と参考情報を紹介します。 エクスポートされた ONNX モデルを使用する方法Custom Vision では、エッジ デバイス上でのリアルタイム推論用に最適化されている、”コンパクト ドメイン” で学習されたイテレーションでのみモデルのエクスポートが可能です。 コンパクト ドメインとは もしコンパクト ドメイン以外のドメインで一度学習を行ったプロジェクトで、学習済みモデルのエクスポートを行いたい場合は、対象プロジェクトの設定 (Settings) から、[ドメイン (Domains)] のセクションでコンパクト ドメインを選択して、再度学習 (Train) を実行することでエクスポートが可能になります。 コンパクト ドメインへの変換方法 学習済みモデルをエクスポートするには、対象プロジェクトの [Performance] タブを選択し、[Export] をクリックします。 エクスポートの際にモデル ファイルの形式を指定できます。ONNX 形式のモデルを利用する場合は以下を選択します。 モデルをエクスポートする ONNX 形式のモデル ファイルをアプリケーションで利用する方法については以下のサンプルを適宜ご利用ください。 ONNXファイルを用いた推論サンプルコード Onnx on GitHub 参考情報■ 再学習やエクスポートのタイミングによって、ONNX ファイル内の入力および出力のフォーマットが変更されることはあるか？いいえ。Custom Vision の同一プロジェクト・同一ドメインで、画像やタグ付けだけを変更して再学習を行っても、入力や出力のデータサイズやノード名は固定で変わりません。また、これらの形式はエクスポートのタイミングで変更されることもないため、アプリケーションで参照するモデル ファイルの置き換えを行っても、再学習前に利用していた推論コードの変更は変更無く、そのまま実行が可能です。 変更履歴2022/02/21 created by kazuyaonuki ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"Custom Vision","slug":"Custom-Vision","permalink":"https://jpaiblog.github.io/blog/tags/Custom-Vision/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"Azure に関するお問い合わせ起票時のセキュリティ チェックが強化されます","slug":"enhance-security-check","date":"2021-12-08T01:00:00.000Z","updated":"2025-04-25T06:37:16.348Z","comments":true,"path":"2021/12/08/enhance-security-check/","link":"","permalink":"https://jpaiblog.github.io/blog/2021/12/08/enhance-security-check/","excerpt":"2021 年 12 月 8 日以降、Azure サブスクリプションへのアクセス権のセキュリティ チェックが強化されます。具体的な内容を以下に紹介します。","text":"2021 年 12 月 8 日以降、Azure サブスクリプションへのアクセス権のセキュリティ チェックが強化されます。具体的な内容を以下に紹介します。 セキュリティ チェック強化の背景と具体的な対応についてマイクロソフトではお客様の情報保護を最優先としており、様々な側面からセキュリティ上の脅威を評価して対策を行っています。その中で、サポート窓口が悪用されるリスクを低減するための対応として、調査対象となる Azure サブスクリプションへのアクセス権を確認していますが、2021 年 12 月 8 日以降、セキュリティ チェックが強化されます。 これにより、問い合わせ起票時に選択された Azure サブスクリプションと異なるサブスクリプションに関するお問い合わせはお承りできなくなります。詳細および最新情報については 2021 年 11 月 26 日 に公開された以下のブログをご参照ください。 お問い合わせ発行時と「異なる」サブスクリプションならびに AAD テナントの調査依頼に対してのセキュリティ チェックが強化されます またこちらは電話でお問い合わせの発行を依頼いただいた場合も同様となります。電話については下記のブログで個別に説明していますので、併せてご確認ください。 電話経由における Azure サブスクリプションの調査のセキュリティ チェックが厳格化されます ※ 本情報の内容（添付文書、リンク先などを含む）は、作成日時点でのものであり、予告なく変更される場合があります。 変更履歴2021/12/8 created by Nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"セキュリティ","slug":"セキュリティ","permalink":"https://jpaiblog.github.io/blog/categories/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/"}],"tags":[{"name":"Azure","slug":"Azure","permalink":"https://jpaiblog.github.io/blog/tags/Azure/"}],"keywords":[{"name":"セキュリティ","slug":"セキュリティ","permalink":"https://jpaiblog.github.io/blog/categories/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/"}]},{"title":"Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法","slug":"speech-translation-with-custom-translator","date":"2021-05-16T15:00:00.000Z","updated":"2025-04-25T06:37:16.638Z","comments":true,"path":"2021/05/17/speech-translation-with-custom-translator/","link":"","permalink":"https://jpaiblog.github.io/blog/2021/05/17/speech-translation-with-custom-translator/","excerpt":"Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法をご紹介します。","text":"Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法をご紹介します。 Custom Translator で作成した翻訳モデルを Speech Translation で使用する方法Speech Services の音声翻訳 (Speech Translation) は Speech-to-Text で文字起こしされた結果を元に Text Translation で翻訳を行います。 How does speech translation work? この時、Speech-to-Text で使用される音声認識モデルは Custom Speech でカスタマイズすることができます。 Custom Speech また Text Translation については Custom Translator で構築した独自の翻訳モデルを使用することができます。 Custom Translator ここでは、Custom Translator で作成した翻訳モデルを Speech SDK で使用する方法をご紹介します。前提として、事前に Custom Translator でモデルを作成してデプロイしておく必要があります。また、モデルの識別子である Category ID は Custom Translsator のポータルサイトでモデルを作成したプロジェクトの情報から確認することができます。 C# (.NET) を使用する場合のコード例:123456789SpeechTranslationConfig config = SpeechTranslationConfig.FromSubscription(SubscriptionKey, Region);// Custom Speech のモデル指定 (*Speech-to-Text もカスタマイズする場合のみ)config.EndpointId = &quot;&lt;Your Endpoint ID here&gt;&quot;;// Custom Translator のモデル指定config.SetServiceProperty(&quot;category&quot;, &quot;&lt;Your Category ID here&gt;&quot;, ServicePropertyChannel.UriQueryParameter);// 以降の音声認識・翻訳は通常と同じ JavaScript を使用する場合のコード例:123456speechConfig = SpeechSDK.SpeechTranslationConfig.fromSubscription(key.value, regionOptions.value);// Custom Translator のモデル指定speechConfig.setServiceProperty(&quot;category&quot;, &quot;&lt;Category ID&gt;&quot;, SpeechSDK.ServicePropertyChannel.UriQueryParameter);// 以降の音声認識・翻訳は通常と同じ いずれの言語でも、SpeechTranslationConfig の setServiceProperty を使用して、category のパラメーターに Custom Translator の Category ID を指定する方法が基本となります。 Speech Services のサンプルコード Speech SDK のリファレンス Speech Translation でカスタム翻訳モデルを利用した場合の料金についてSpeech Translation で Custom Translator の翻訳モデルを使用した場合に、発生する課金項目としては以下の通りです。 (1) Speech Translation Standard ($2.50 per hour) (2) Custom Speech Model Hosting ($0.0538 per model per hour, Optional) (3) Custom Translation - Training ($10 per million source + target chars of training data (max. $300&#x2F;training)) (4) Custom Translation - Custom model hosting ($10 per hosted custom translation model per region, per month) 実際の料金レートは選択された価格帯によって異なります。(2) は Custom Speech で作成した音声認識モデルも使用する場合に発生します。Translator Text API の翻訳文字数に応じた課金 “Custom Translation - Translation ($40 per million chars of custom translation) “ は Speech Translation では発生しません。 Speech Services の価格 Translator Text の価格 変更履歴2021/05/17 created by Nakagami","categories":[{"name":"Speech Services","slug":"Speech-Services","permalink":"https://jpaiblog.github.io/blog/categories/Speech-Services/"}],"tags":[{"name":"Speech Services","slug":"Speech-Services","permalink":"https://jpaiblog.github.io/blog/tags/Speech-Services/"},{"name":"Custom Translator","slug":"Custom-Translator","permalink":"https://jpaiblog.github.io/blog/tags/Custom-Translator/"},{"name":"Speech SDK","slug":"Speech-SDK","permalink":"https://jpaiblog.github.io/blog/tags/Speech-SDK/"}],"keywords":[{"name":"Speech Services","slug":"Speech-Services","permalink":"https://jpaiblog.github.io/blog/categories/Speech-Services/"}]},{"title":"Bing Search API 関するお問い合わせについて","slug":"support-request-for-bing-search-apis","date":"2021-04-30T07:00:00.000Z","updated":"2025-04-25T06:37:16.646Z","comments":true,"path":"2021/04/30/support-request-for-bing-search-apis/","link":"","permalink":"https://jpaiblog.github.io/blog/2021/04/30/support-request-for-bing-search-apis/","excerpt":"Bing Search API に関するお問い合わせを起票いただく際にご留意いただきたい点をご案内します。","text":"Bing Search API に関するお問い合わせを起票いただく際にご留意いただきたい点をご案内します。 (1) Bing Search API の具体的な動作に関するご質問についてBing Search API の具体的な動作、例えば特定のパラメーターを設定するとエラーが発生する、あるクエリのみレスポンスが非常に遅い、といった内容について調査を行うには、個々の API リクエストを一意に識別可能な BingAPIs-TraceId が必要となります。これは API のレスポンス ヘッダーに含まれています。 Web Search API v7 headers また、事象を再現可能な curl のコマンド例を併せて提供いただけるとよりスムーズに調査を行うことができます。例えば以下のように -v オプションを指定することで BingAPIs-TraceId を確認することもできます。 curl -v –header “Ocp-Apim-Subscription-Key: Key” “https://api.bing.microsoft.com/v7.0/custom/search?q=Test&amp;customconfig=ID&amp;setLang=ja&amp;textDecorations=true&amp;count=10&amp;offset=10&amp;textFormat=HTML“ curl command reference (※弊社外のサイトとなります) その他 Bing Search API で利用可能なパラメーターやレスポンスの形式については以下のリファレンスをご参照ください。 Web Search API v7 reference なお、BingAPIs-TraceId は有効期限が非常に短いため、発生から時間が経過すると調査が困難になる場合があります。 (2) Bing Search API で取得した情報の利用についてBing Search API は Cognitive Services とは異なる利用条件が設定されています。 Bing Search API use and display requirements 特に多くお問い合わせいただく内容として、Bing Search API の検索結果を機械学習もしくはそれに類する処理で使用することは禁止されています。また特定のシナリオついて、技術サポート窓口で利用の可否を回答することはできませんので、必要に応じて法務部門や顧問弁護士等の専門家にご相談いただき、利用者の責任においてご判断ください。 Microsoft Azure の法的情報 (3) Bing Search API で検索対象になる情報についてBing Search API は一般向けの Bing と同じ検索インデックスを使用しているため、インデックスに含まれていない Web ページやコンテンツは検索の対象となりません。すなわち、通常の Bing で検索できない情報は Bing Search API の検索結果にも含まれません。これは Bing Custom Search についても同様です。ご自身が管理しているコンテンツを Bing のインデックスに追加するための具体的な手法 (いわゆる検索エンジン対策, SEO) については Azure サポート プランの対象外となるため、Bing Webmaster へお問い合わせください。 Bing Webmaster について: Bing Webmaster Tools Bing Webmaster Support Bing Custom Search について: Configure your Bing Custom Search instance 変更履歴2021/04/30 created by Nakagami ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"},{"name":"Bing Search API","slug":"Cognitive-Services/Bing-Search-API","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/Bing-Search-API/"}],"tags":[{"name":"Bing Search API","slug":"Bing-Search-API","permalink":"https://jpaiblog.github.io/blog/tags/Bing-Search-API/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"},{"name":"Bing Search API","slug":"Cognitive-Services/Bing-Search-API","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/Bing-Search-API/"}]},{"title":"QnA Maker における Excel ファイルを使用した QnA ペアの追加について","slug":"QnA-Maker-Import-Excel","date":"2021-02-02T15:00:00.000Z","updated":"2025-04-25T06:37:16.507Z","comments":true,"path":"2021/02/03/QnA-Maker-Import-Excel/","link":"","permalink":"https://jpaiblog.github.io/blog/2021/02/03/QnA-Maker-Import-Excel/","excerpt":"Excel ファイルを利用して日本語の QnA ペアを追加する際の注意事項についてご紹介します。","text":"Excel ファイルを利用して日本語の QnA ペアを追加する際の注意事項についてご紹介します。 Excel ファイルを利用した場合の注意事項Excel ファイルを利用して日本語の漢字を含める質問と回答を登録する際に、以下の図のように、登録された質問と回答の末尾に漢字のふりがなが付いていることがあります。 また、上記の図では、Excel ファイルの 「Prompts」 列に入っている、漢字を含める内容がマルチターンの Prompts として反映されていません。 この事象の原因としては、Excel 上で漢字を入力した際に自動的に付加されたふりがな (ルビ) が QnA Maker によって抽出されたためと想定されます。 日本語の文字列にふりがな (ルビ) を使用する シート データを並べ替える場合、日本語データは既定でふりがなによって並べ替えられます。 正しいふりがながそれらを使用する文字に使用されている場合、日本語の用語は、国語辞書に現れるのと同じ順序で並べ替えられます。(中略)ふりがなを日本語版の Excel で表示し、漢字 (日本語で使用される漢字) を入力すると、Excel はふりがなを自動的にガイドに追加します。 これは以下の図のように、Excel 上で漢字のふりがなを表示することで確認できます。 現状 QnA Maker は Excel のふりがなも抽出するため、Excel が自動的に付与したふりがなを削除しない状態で、QnA Maker ポータルの [+Add file] もしくは [Import knowledge base] の機能で QnA ペアを追加した場合は、漢字のふりがなも質問と回答に含まれます。 対処策としては、Excel ファイルからふりがなを削除することになりますが、以下の図ように、ふりがなを含むセルをコピーして別のセルへ「数式」として貼り付けると、ふりがなの部分はコピーされませんので、一括削除のアイデアとしてご参考ください。 上記のように、ふりがなを削除した状態の Excel ファイルを利用して質問と回答を追加した場合は、以下の通り漢字のふりがなは表示されません。また、Excel の「Prompts」列の内容もマルチターンの Prompts として反映されるようになります。 変更履歴2021/02/03 created by Chao2024/05/20 modified by Uehara","categories":[{"name":"QNA Maker","slug":"QNA-Maker","permalink":"https://jpaiblog.github.io/blog/categories/QNA-Maker/"}],"tags":[{"name":"QnA ペアの追加","slug":"QnA-ペアの追加","permalink":"https://jpaiblog.github.io/blog/tags/QnA-%E3%83%9A%E3%82%A2%E3%81%AE%E8%BF%BD%E5%8A%A0/"},{"name":"Excel ファイル","slug":"Excel-ファイル","permalink":"https://jpaiblog.github.io/blog/tags/Excel-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB/"}],"keywords":[{"name":"QNA Maker","slug":"QNA-Maker","permalink":"https://jpaiblog.github.io/blog/categories/QNA-Maker/"}]},{"title":"Webポータル画面が期待通りに表示されない場合の確認方法","slug":"not-expected-display-on-the-webbrowser","date":"2020-11-10T15:00:00.000Z","updated":"2025-04-25T06:37:16.461Z","comments":true,"path":"2020/11/11/not-expected-display-on-the-webbrowser/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/11/11/not-expected-display-on-the-webbrowser/","excerpt":"Web ポータル画面が 『プルダウンリストに選択肢が表示されるはずなのに、表示されない』 など、期待通りに表示されない場合に確認するポイントをご紹介します。","text":"Web ポータル画面が 『プルダウンリストに選択肢が表示されるはずなのに、表示されない』 など、期待通りに表示されない場合に確認するポイントをご紹介します。 Coginitive Services の一部には、固有の Web ポータル画面を持つサービスがあります。Azure ポータル画面や、それらサービス固有の Web ポータル画面で期待通りの画面表示とならない場合には、まず以下3点のポイントを確認してみてください。（以下の画像は、Metrics Advisor サービスのポータル画面における画面表示例です） Webブラウザーの言語翻訳機能の状態を確認する Webブラウザーから最新のデータにアクセスして確認する 現在利用しているWebブラウザー以外のブラウザーを使用して確認する Web ブラウザーの言語翻訳機能の状態を確認するブラウザー上で言語翻訳ツールなどをお使いでしたら、その機能が事象に影響している可能性があります。翻訳機能を使用しない状態で画面表示をご確認ください。 Web ブラウザーから最新のデータにアクセスして確認するWeb ブラウザーがローカルに保存したキャッシュデータ等を使用しているために、古い状態のデータが画面表示されている可能性があります。 インターネット上の最新のデータにアクセスして画面表示が行えるよう、以下をご確認ください。 (1) Web ブラウザーのプライベート ブラウジングを用いて確認する プライベート ブラウジングでは、閲覧履歴、ダウンロード履歴、キャッシュ、Cookie などを保存せずに Web サイトを閲覧可能となります。 Microsoft Edge をご利用の場合、以下のドキュメントの手順に添って、InPrivate ブラウズを利用してください。 Microsoft Edge で InPrivate ブラウズを使う Google Chrome をご利用の場合、以下の Google 社のヘルプドキュメントの手順に添って、シークレットブラウジングを利用してください。 (Google Chrome ヘルプ) シークレット ブラウジング (2) ブラウザーのキャッシュを削除してから確認する Microsoft Edge をご利用の場合、以下のドキュメント以下のドキュメントの [キャッシュされたデータとファイル] にて削除してください。 Microsoft Edge の閲覧履歴を表示または削除する Google Chrome をご利用の場合、以下の Google 社のヘルプドキュメントの手順に添って削除してください。 (Google Chrome ヘルプ) キャッシュと Cookie の消去 現在利用している Web ブラウザー以外のブラウザーを使用して確認する現在利用している Web ブラウザー以外のブラウザーを使用した場合に、画面表示が変わるかどうかご確認ください。 原則として、次のブラウザーの最新バージョンがサポートされています。 Microsoft Edge Chrome Firefox 古いバージョンのブラウザーでは新機能に対応していないため、表示不具合に加えて、Javascript 実行エラーを含めた機能不具合が生じる可能性がございます。 変更履歴2020/11/11 created by Uehara2023/02/24 modified by Uehara","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/tags/Cognitive-Services/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"Translator Text API の翻訳文字数の確認方法","slug":"TranslatorTextAPI-char-translated","date":"2020-05-27T15:00:00.000Z","updated":"2025-04-25T06:37:16.664Z","comments":true,"path":"2020/05/28/TranslatorTextAPI-char-translated/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/05/28/TranslatorTextAPI-char-translated/","excerpt":"Translator Text API の翻訳文字数の確認方法と、参考情報をご紹介します。 翻訳文字数データの確認手順 翻訳文字数データをファイルとしてダウンロードする手順 （参考情報）文字数カウント方法に関する公開ドキュメント","text":"Translator Text API の翻訳文字数の確認方法と、参考情報をご紹介します。 翻訳文字数データの確認手順 翻訳文字数データをファイルとしてダウンロードする手順 （参考情報）文字数カウント方法に関する公開ドキュメント 翻訳文字数データの確認手順(1) Azure Portal 上で、対象のTranslator Text API のリソースを選択します。(2) [監視] ブレードの [メトリック] をクリックします。(3) 表示された、画面中央の [メトリック] から [Text Characters Translated] または、カスタム翻訳を行った文字数の確認に関しては [Text Custom Characters Translated] を選択します。 (4) 画面右上にある [現地時刻: 過去 24 時間 (自動)] をクリックし、表示されたポップアップから希望の時間範囲と粒度を設定します。 (5) グラフ上に指定した期間の翻訳文字数が表示されます。 (6) グラフの中で確認したい時点にカーソルをあてると、その時間帯（指定した時間の粒度単位）に絞って、翻訳文字数を表示することができます。 翻訳文字数のグラフを表示する際に設定したメトリック [Text Characters Translated] の説明は、下記の公開ドキュメントを参照ください。 Supported metrics for Microsoft.CognitiveServices&#x2F;accounts Text Characters Translated Number of characters in incoming text translation request. 翻訳文字数データをファイルとしてダウンロードする手順(1) “１．翻訳文字数データの確認手順” に沿って、翻訳文字数のグラフを表示します。(2) 表示された翻訳文字数のグラフ上部の [共有] プルダウンから [Excelへのダウンロード] を選択します。 (3) 翻訳文字数のグラフを表示する際に設定した “メトリック”, “時間の範囲および粒度” のデータのExcelファイルがダウンロードされます。 （参考情報）文字数カウント方法に関する公開ドキュメントどのようにAPIが呼び出されるかによって、カウントされる文字数は変わります。例えば、1文字入力の場合でも、その後ろに空白が付与されたままの状態のテキストがAPIに渡された場合、空白も含めた文字数がカウントされます。‘A’ のような状態では、1文字とカウントされますが、後ろに3つ空白を付与した ‘A ’ のような状態の場合は、4文字とカウントされます。空白の他にも、カウントされる対象がございますので、文字数カウント方法に関する詳細は、下記の公開ドキュメントをご確認ください。 よく寄せられる質問 - Translator API：Translator では文字をどのようにカウントしますか。 変更履歴2020/05/28 created by Uehara2022/01/25 modified by Uehara2023/02/14 modified by Uehara2024/05/20 modified by Uehara","categories":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/blog/categories/Translator-Text-API/"}],"tags":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/blog/tags/Translator-Text-API/"}],"keywords":[{"name":"Translator Text API","slug":"Translator-Text-API","permalink":"https://jpaiblog.github.io/blog/categories/Translator-Text-API/"}]},{"title":"Azure の関連ポータル サイトで一部の Azure サブスクリプションやリソースが表示されない事象の原因と対処策","slug":"cognitive-portal-sub-not-found","date":"2020-05-13T15:00:00.000Z","updated":"2025-04-25T06:37:16.302Z","comments":true,"path":"2020/05/14/cognitive-portal-sub-not-found/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/05/14/cognitive-portal-sub-not-found/","excerpt":"Azure の関連ポータル サイトで Azure サブスクリプションやリソースが表示されない原因と対処策について解説します。","text":"Azure の関連ポータル サイトで Azure サブスクリプションやリソースが表示されない原因と対処策について解説します。 Azure で提供されているサービスの一部は、Azure ポータル以外に独自のポータル サイトを提供しています。より具体的に Cognitive Services を例に挙げると以下のようなポータル サイトが存在します。 QnA Maker: https://www.qnamaker.ai/ Custom Vision: https://www.customvision.ai/ Speech Services: https://speech.microsoft.com/ LUIS: https://www.luis.ai/ これらのポータル サイトは Azure と連携しており、サインインしたユーザーの Azure サブスクリプションやリソースを、ポータル内で表示・操作することができます。 しかしながら、例えば、以下のように複数の Azure AD ディレクトリ (contoso.onmicrosoft.com と fabrikam.onmicrosoft.com) に関連付けられているユーザー アカウント (user@contoso.onmicrosoft.com) があるとします。この場合、ロールベースのアクセス制御 (RBAC) の設定が適切でも、上記のポータル サイトでサブスクリプションやリソースが表示されないことがあります。 ■原因これらのポータルサイトへ Azure AD の組織アカウントでアカウントサインインする場合、特定の Azure AD ディレクトリに依存しない common エンドポイント (login.microsoftonline.com&#x2F;common&#x2F;…) が使用されます。この時、サインイン先となるのは、ホーム ディレクトリ (上記の図では ディレクトリ A の contoso.onmicrosoft.com) となります。通常はこの挙動で問題になることはありません。 しかし、別のディレクトリにゲスト ユーザーとして招待されることで、複数のディレクトリと関連付けられている場合、ホーム ディレクトリ以外のディレクトリ (上記の図では Bの fabrikam.onmicrosoft.com) に対するサインインは行われないため、そのディレクトリに対するアクセス トークンは取得されません。それにより、ポータルサイト上ではディレクトリ B に紐づいたサブスクリプションやリソースが表示されない事象が発生します。これは Azure AD ディレクトリへのサインインを伴うアクセス権の管理上想定される動作です。 ■対処策ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得するには、ディレクトリ B へのサインインを明示的に完了する必要があります。 方法 1. ポータル サイト内でディレクトリを変更するポータル サイトによっては、サイト内でディレクトリを切り替える機能が用意されています。この機能を利用してディレクトリ B に切り替えます。 例. Custom Vision ポータル: これはディレクトリ (テナント) 固有のサインイン エンドポイント (login.microsoftonline.com&#x2F;**&lt;テナント ID またはテナント名&gt;&#x2F;**…) を使用してサインインすることで実現されています。 ご参考: Azure AD のサインイン エンドポイント 方法 2. Azure ポータルでディレクトリを変更するポータル サイト内でディレクリを切り替える機能が用意されていない場合は、Azure ポータル (https://portal.azure.com) を使ってディレクトリの切り替えを行います。そして、各サービスのポータルサイト (QnA Maker など) にアクセスします。 特にディレクトリ B で多要素認証 (MFA) が強制されているなどサインイン方法に制約がある場合は、こちらの方法をお試しください。 Azure ポータルでのディレクトリの切り替え方法は次の手順のようになります。 Azure ポータルの画面右上のユーザーアイコンから「ディレクトリの切り替え」を選択します Azure サブスクリプションが存在するディレクトリを選択してサインインを完了します Web ブラウザーの別のタブで対象のポータル サイト (例. QnA Maker) を開きます もし上記の手順でもポータル サイトで Azure サブスクリプションやリソースが表示されない場合、既定のディレクトリを Azure サブスクリプションが紐づいたディレクトリに変更してから、そのディレクトリに切り替えることで解消するかご確認ください。 ■ 補足ポータル サイト内でディレクトリを切り替える機能が用意されておらず、ホーム ディレクトリでサインインした場合でも、ゲスト ユーザーとして招待されているディレクトリ B に関連付けられた Azure サブスクリプションやリソースがポータル サイト上で表示されることがあります。 これは他のサイト、例えば Azure ポータルでディレクトリ B にサインインしていた場合、ブラウザーにディレクトリ B の認証情報がキャッシュされ、ディレクトリ B に関連付けられた Azure サブスクリプションに対するアクセス トークンを取得できるためです。 ディレクトリ B で多要素認証 (MFA) が強制されているなど、サインイン方法に制約がある場合は、キャッシュされたサインイン情報が有効でないため、方法 2 のように Azure ポータルで MFA などの認証を完了する必要があります。 変更履歴2020/05/14 created by Chao2020/05/14 modified by Nakagami","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"Custom Vision","slug":"Custom-Vision","permalink":"https://jpaiblog.github.io/blog/tags/Custom-Vision/"},{"name":"QnA Maker","slug":"QnA-Maker","permalink":"https://jpaiblog.github.io/blog/tags/QnA-Maker/"},{"name":"LUIS","slug":"LUIS","permalink":"https://jpaiblog.github.io/blog/tags/LUIS/"},{"name":"Speech Services","slug":"Speech-Services","permalink":"https://jpaiblog.github.io/blog/tags/Speech-Services/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"Cognitive Serivces で使用する API テスト ページについて","slug":"test-APIs","date":"2020-04-30T03:00:00.000Z","updated":"2025-04-25T06:37:16.654Z","comments":true,"path":"2020/04/30/test-APIs/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/04/30/test-APIs/","excerpt":"Cognitive Serivces の API について、テスト実行用の参考サイトを紹介します。","text":"Cognitive Serivces の API について、テスト実行用の参考サイトを紹介します。 はじめに Cognitive Serivces の API は複数あります。どのような API があるかは以下サイトを参照ください。Azure Cognitive Services とは Azure REST API のリファレンス サイトより、Cognitive Services の REST API を確認できます。いくつかのサービスは、こちらのサイトから REST API の実行が可能です。Azure REST API ReferenceAzure Cognitive Services REST API referenceAzure Cognitive Services - Bing Search REST API reference Cognitive Services 関連の API をまとめたサイトにも REST API を実行可能なページが用意されています。https:&#x2F;&#x2F; に続くリージョンの指定によっては API が用意されていない場合があるため、代表的な 4 リージョンを紹介します。Cognitive Services APIs (westus)Cognitive Services APIs (westus2)Cognitive Services APIs (southcentralus)Cognitive Services APIs (westeurope) REST API の実行には API キーが必要になります。以下のサイトから API キーを取得できます。こちらにないサービスについては、各サービスのクイック スタート ページ等から利用方法を参照ください。Cognitive Services を試す 各 API のリンクを紹介します。 掲載されていないサービスは上述で列記したサイトより検索ください。 Computer Vision Cognitive Services APIs (?pattern&#x3D;Computer%20Vision) Custom Vision Service Cognitive Services APIs (?pattern&#x3D;Custom_Vision) Face Cognitive Services APIs (?pattern&#x3D;Face+API) Form Recognizer Cognitive Services APIs (?pattern&#x3D;Form+Recognizer) Speech ServiceSpeech Service はさらに複数のサービス・機能に分かれます。利用可能な REST API の直リンクを以下に列挙します。サービス、機能の一覧は こちら をご確認ください。 Cognitive Services APIs (?pattern&#x3D;Speech+to+Text) Speech to Text REST API Conversation transcription (Preview) Speaker Recognition Speaker Recognition Cognitive Services APIs (?pattern&#x3D;Speaker+Recognition) Language Understanding - LUIS利用可能な REST API の仕様について こちら をご確認ください。 Cognitive Services APIs (?pattern&#x3D;LUIS) QnA Maker QnA Maker REST APIリファレンス Text Analytics Cognitive Services APIs (?pattern&#x3D;Text+Analytics) Anomaly Detector Cognitive Services APIs (?pattern&#x3D;Anomaly+Detector) Content Moderator Content Moderator API リファレンス Cognitive Services APIs (?pattern&#x3D;Content+Moderator) Metrics Advisor Cognitive Services APIs (?pattern&#x3D;Metrics+Advisor) Personalizer Cognitive Services APIs (?pattern&#x3D;Personalizer) 変更履歴2020/04/30 created by Mochizuki2020/05/01 modified by Mochizuki2020/10/19 modified by Mochizuki2020/11/02 modified by Mochizuki2022/06/08 modified by Mochizuki ※ 本記事は 「jpaiblog について」 の留意事項に準じます。※ 併せて 「ホームページ」 および 「記事一覧」 もご参照いただければ幸いです。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"API","slug":"API","permalink":"https://jpaiblog.github.io/blog/tags/API/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"ポータルにサインインできない事象について (AADSTS650051)","slug":"error-AADSTS650051","date":"2020-03-06T15:00:00.000Z","updated":"2025-04-25T06:37:16.371Z","comments":true,"path":"2020/03/07/error-AADSTS650051/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/03/07/error-AADSTS650051/","excerpt":"エラー コード AADSTS650051 を含むメッセージが出力し、製品ポータル (www.luis.ai や www.customvision.ai など) へのサインインが失敗する場合の対処方法を紹介します。","text":"エラー コード AADSTS650051 を含むメッセージが出力し、製品ポータル (www.luis.ai や www.customvision.ai など) へのサインインが失敗する場合の対処方法を紹介します。 下記エラーメッセージは (ドメイン名) の DNS 名に紐づく Azure AD のテナントが、管理者不在のバイラル (非管理) テナントと呼ばれる状態 (unmanaged state) であり、それが原因でポータルへサインインできないことを意味します。 ErrorDescription’: ‘AADSTS650051: Using application ‘&lt;ポータル FQDN&gt;’ is currently not supported for your organization &lt;ドメイン名&gt; because it is in an unmanaged state. An administrator needs to claim ownership of the company by DNS validation of &lt;ドメイン名&gt; before the application &lt;ポータル FQDN&gt; can be provisioned.&#96; 類似のサービスに関する記事とはなりますが、詳細と対処方法は以下をご参照ください。 非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法 この問題は、当該テナントに紐づく (ドメイン名) のドメインの所有確認を行うことで解消されるため、以下のドキュメントの “3. 「管理者になる」メニューを実行します。” まで実施ください。 セルフサービス サインアップで登録されたドメインの対処方法 なお、この問題を解消するだけであれば、手順 4 以降の作業は必要ありませんが、手順 3 を実施する段階で DNS の設定変更が必要となります。Azure AD テナントやドメインの管理者にて確認ください。 関連する公開情報: Azure リソースにログインしようとすると “AADSTS65005” エラーを受け取ります Azure Active Directory の非管理対象ディレクトリを管理者として引き継ぐ 変更履歴2020/03/07 created by Mochizuki","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"AADSTS650051","slug":"AADSTS650051","permalink":"https://jpaiblog.github.io/blog/tags/AADSTS650051/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"QNA Maker の管理サービス (Cognitive Services リソース) のリージョンについて","slug":"QNA-management-service","date":"2020-03-02T15:00:00.000Z","updated":"2025-04-25T06:37:16.516Z","comments":true,"path":"2020/03/03/QNA-management-service/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/03/03/QNA-management-service/","excerpt":"QNA Maker の管理サービス (Cognitive Services リソース) についてご紹介します。","text":"QNA Maker の管理サービス (Cognitive Services リソース) についてご紹介します。 QnA Maker サービスの全体構成は下記ドキュメントの図を参照ください。 QnA Maker 用の Azure リソース Cognitive Services としてのリソースは、図中の右上の QnA Maker Subscription に相当します。例えば、ポータルを操作して KB を編集した場合、米国西部リージョンにおいてホストされている API 群が呼び出されます (5. Manage KB in portal or via APIs)。この API 群を別リージョンに移行することができないため、こちらのサイト の記載の通り、Cognitive Services リソースは米国西部リージョン固定になります。 米国西部リージョンにある API のバックエンドから、Web Apps 上でホストされた QnA Maker ランタイムに対してアクセスし、Q&amp;A の追加や削除といった操作が行われます。なお、実際の KB のコンテンツ (Q&amp;A、メタデータ等) は Azure Search に保存されており、ユーザーのチャットログは Application Insights に保存されているため、顧客データは米国西部リージョンには保存されません。 ※ 管理サービスで使用する API の詳細は以下サイトを参照ください。 QnA Maker V4.0 KB を公開した後の、ボット等のアプリケーションからの問い合わせ (4. User QnA endpoint in Bot) は GenerateAnswer API が使用されます。これは QnA Maker ランタイム (Web Apps) に対して直接アクセスするため、米国西部リージョンを経由することはありません。 ※ GenerateAnswer API の詳細は以下サイトをご参照ください。 GenerateAnswer API およびメタデータを使って回答を取得する 変更履歴2020/03/03 created by Mochizuki","categories":[{"name":"QNA Maker","slug":"QNA-Maker","permalink":"https://jpaiblog.github.io/blog/categories/QNA-Maker/"}],"tags":[{"name":"管理サービス","slug":"管理サービス","permalink":"https://jpaiblog.github.io/blog/tags/%E7%AE%A1%E7%90%86%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9/"}],"keywords":[{"name":"QNA Maker","slug":"QNA-Maker","permalink":"https://jpaiblog.github.io/blog/categories/QNA-Maker/"}]},{"title":"過去ブログについて","slug":"past-blog","date":"2020-01-11T15:00:00.000Z","updated":"2025-04-25T06:37:16.483Z","comments":true,"path":"2020/01/12/past-blog/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/01/12/past-blog/","excerpt":"過去のブログ情報を紹介します。","text":"過去のブログ情報を紹介します。 Cognitive Services Translator Text API の翻訳文字数の確認方法 Open API Testing Console HTTP 401 Access Denied (invalid subscription key) のエラーが発生した場合の切り分け方法 Cognitive Services の料金について LUIS ポータル (www.luis.ai) にサインインできない場合の対処方法 QnA Maker API V4 (一般公開版) の Azure Search に関するよくあるご質問 非管理テナントのアカウントで Custom Vision Service のポータルにサインインできない場合の対処方法 QnA Maker API V4 (一般公開版) のよくあるご質問 Bing Speech API の新規 API キー作成は 10 月 15 日で終了しました Cognitive Services の技術サポートのお問い合わせ方法 Cognitive Services への接続には TLS 1.2 をご利用ください 変更履歴2020/01/12 created by Mochizuki","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"過去ブログ","slug":"過去ブログ","permalink":"https://jpaiblog.github.io/blog/tags/%E9%81%8E%E5%8E%BB%E3%83%96%E3%83%AD%E3%82%B0/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]},{"title":"jpaiblog について","slug":"about-jpaiblog","date":"2019-12-31T15:00:00.000Z","updated":"2025-04-25T06:37:16.102Z","comments":true,"path":"2020/01/01/about-jpaiblog/","link":"","permalink":"https://jpaiblog.github.io/blog/2020/01/01/about-jpaiblog/","excerpt":"","text":"日本マイクロソフトの Cognitive Serivce に関するサポート情報のブログです。 公開日2020 年 1 月 1 日より公開いたしました。 活動について製品のサポート メンバーによって運用されております。仕様に関する情報やトラブル シューティングの手順、実装におけるワンポイント アドバイスを公開いたします。 留意事項サイトのコンテンツや情報において、可能な限り正確な情報を掲載し、更新するよう努めております。しかしながら、状況の変化や情報が古くなることにより、必ずしもお客様環境に適用できない情報となる場合がございます。恐れ入りますが、予めご留意くださいますようお願い申し上げます。","categories":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}],"tags":[{"name":"はじめに","slug":"はじめに","permalink":"https://jpaiblog.github.io/blog/tags/%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB/"}],"keywords":[{"name":"Cognitive Services","slug":"Cognitive-Services","permalink":"https://jpaiblog.github.io/blog/categories/Cognitive-Services/"}]}]}